/*! Webphone v@2.0 */

/*!function() {

	if (typeof jQuery == 'undefined') {
	  var scriptwph = document.createElement("script");
	  scriptwph.type = "text/javascript";
	  scriptwph.src = "//llamamegratis.es/evo/js/jquery.js";
	  ( document.getElementsByTagName("head")[0] || document.documentElement ).appendChild( scriptwph )    
	}
	
}();*/

var configTrafficEvoSiteDefault = {
			'haztecliente':{
				// porcentaje_url1: Es el porcentaje de tráfico de los botones "hazte cliente" que se destina a la url1, el % restante se derivará a la url 2.
				// Ejemplo porcentaje_url1: 5 >> 50% Porcentaje de tráfico a la url 1
				porcentaje_url1:'50',
				// URL destinada al tráfico (1)
				url1:'https://cuentainteligente.evobanco.com/',
				// URL destinada al tráfico (2)
				url2:'https://v2.cuentainteligente.evobanco.com/'
			},
			'cuentajoven':{
				// porcentaje_url1: Es el porcentaje de tráfico de los botones de la "sección cuanta joven" que se destina a la url1, el % restante se derivará a la url 2.
				// Ejemplo porcentaje_url1: 0 >> 0% Porcentaje de tráfico a la url 1. El 100% a la url 2.
				porcentaje_url1:'0', 
				// URL destinada al tráfico (1)
				url1:'javascript:void(0);openWphCall(2725,null);',
				// URL destinada al tráfico (2)
				url2:'https://cuentajoven.evobanco.com/'
			},
			'ctclegal':'<div class="ctclegal"><p><p><strong>1. &iquest;Qui&eacute;n es el responsable del tratamiento?</strong></p><p><br></p><p>El responsable del tratamiento de tus datos personales es EVO BANCO, S.A. ("la ENTIDAD") NIF A70386024 I.R.A.E. del BdE n&#186; 0239. I.R.M. MADRID, T.31.840, F.88, H. M-572999, Insc. 2&#170; Dom. Social: Don Ram&oacute;n de la Cruz, n&uacute;mero 84, 28006, Madrid.</p><p><br></p><p><strong>2. &iquest;Con qu&eacute; finalidades tratamos tus datos?</strong></p><p><br></p><p>Los datos que facilites ser&aacute;n tratados para atender tu solicitud de informaci&oacute;n.</p><p><br></p><p><strong>3. &iquest;Cu&aacute;les son las bases legitimadoras para el tratamiento de tus datos?</strong></p><p><br></p><p>La base jur&iacute;dica para el desarrollo de la finalidad incluida en el apartado anterior ser&aacute; tu consentimiento al solicitar que EVO se ponga en contacto contigo a trav&eacute;s de la direcci&oacute;n o n&uacute;mero de tel&eacute;fono que t&uacute; nos indiques.</p><p><br></p><p><strong>4. &iquest;Qui&eacute;nes recibir&aacute;n tus datos?</strong></p><p><br></p><p>No se ceder&aacute;n los datos facilitados a terceros, salvo que tengamos tu consentimiento previo o sea necesario por obligaci&oacute;n legal o para la ejecuci&oacute;n del contrato.</p><p><br></p><p><strong>5. &iquest;Qu&eacute; derechos te amparan en relaci&oacute;n al tratamiento de tus datos?</strong></p><p><br></p><p>Puedes ejercer tus derechos de acceso, rectificaci&oacute;n, cancelaci&oacute;n, oposici&oacute;n, limitaci&oacute;n del tratamiento y portabilidad de los datos a trav&eacute;s del correo electr&oacute;nico <a href="mailto:protecciondedatos@evobanco.com">protecciondedatos@evobanco.com</a> o bien por escrito dirigido a EVO BANCO, S.A. Don Ram&oacute;n de la Cruz, n&uacute;mero 84, 28006, Madrid, indicando en el asunto &ldquo;Protecci&oacute;n de Datos&rdquo; y adjuntando copia de tu DNI o documento identificativo v&aacute;lido, a cualquiera de ellos. Asimismo, te informamos de que tienes derecho a recabar la tutela de la Agencia Espa&ntilde;ola de Protecci&oacute;n de Datos a trav&eacute;s de su p&aacute;gina Web <a href="http://www.aepd.es/" rel="noopener noreferrer" target="_blank">www.aepd.es</a>.</p><p><br></p><p><strong>6. &iquest;D&oacute;nde puede obtener m&aacute;s informaci&oacute;n sobre el tratamiento de sus datos?</strong></p><p><br></p><p>Puede consultar informaci&oacute;n adicional sobre el tratamiento que realizamos sobre sus datos en este enlace <a href="https://www.evobanco.com/politica-de-privacidad" rel="noopener noreferrer" target="_blank">https://www.evobanco.com/politica-de-privacidad</a>.</p></div>',
			'defaultlegal':'<div class="ctclegal"><p><strong>1. &iquest;Qui&eacute;n es el responsable del tratamiento?</strong></p><p><br></p><p>El responsable del tratamiento de tus datos personales es EVO BANCO, S.A. ("la ENTIDAD") NIF A70386024 I.R.A.E. del BdE n&#186; 0239. I.R.M. MADRID, T.31.840, F.88, H. M-572999, Insc. 2&#170; Dom. Social: Don Ram&oacute;n de la Cruz, n&uacute;mero 84, 28006, Madrid.</p><p><br></p><p><strong>2. &iquest;Con qu&eacute; finalidades tratamos tus datos?</strong></p><p><br></p><p>Los datos que facilites ser&aacute;n tratados para atender tu solicitud de informaci&oacute;n.</p><p><br></p><p><strong>3. &iquest;Cu&aacute;les son las bases legitimadoras para el tratamiento de tus datos?</strong></p><p><br></p><p>La base jur&iacute;dica para el desarrollo de la finalidad incluida en el apartado anterior ser&aacute; tu consentimiento al solicitar que EVO se ponga en contacto contigo a trav&eacute;s de la direcci&oacute;n o n&uacute;mero de tel&eacute;fono que t&uacute; nos indiques.</p><p><br></p><p><strong>4. &iquest;Qui&eacute;nes recibir&aacute;n tus datos?</strong></p><p><br></p><p>No se ceder&aacute;n los datos facilitados a terceros, salvo que tengamos tu consentimiento previo o sea necesario por obligaci&oacute;n legal o para la ejecuci&oacute;n del contrato.</p><p><br></p><p><strong>5. &iquest;Qu&eacute; derechos te amparan en relaci&oacute;n al tratamiento de tus datos?</strong></p><p><br></p><p>Puedes ejercer tus derechos de acceso, rectificaci&oacute;n, cancelaci&oacute;n, oposici&oacute;n, limitaci&oacute;n del tratamiento y portabilidad de los datos a trav&eacute;s del correo electr&oacute;nico <a href="mailto:protecciondedatos@evobanco.com">protecciondedatos@evobanco.com</a> o bien por escrito dirigido a EVO BANCO, S.A. Don Ram&oacute;n de la Cruz, n&uacute;mero 84, 28006, Madrid, indicando en el asunto &ldquo;Protecci&oacute;n de Datos&rdquo; y adjuntando copia de tu DNI o documento identificativo v&aacute;lido, a cualquiera de ellos. Asimismo, te informamos de que tienes derecho a recabar la tutela de la Agencia Espa&ntilde;ola de Protecci&oacute;n de Datos a trav&eacute;s de su p&aacute;gina Web <a href="http://www.aepd.es/" rel="noopener noreferrer" target="_blank">www.aepd.es</a>.</p><p><br></p><p><strong>6. &iquest;D&oacute;nde puede obtener m&aacute;s informaci&oacute;n sobre el tratamiento de sus datos?</strong></p><p><br></p><p>Puede consultar informaci&oacute;n adicional sobre el tratamiento que realizamos sobre sus datos en este enlace <a href="https://www.evobanco.com/politica-de-privacidad" rel="noopener noreferrer" target="_blank">https://www.evobanco.com/politica-de-privacidad</a>.</p></div>',
			//'defaultlegal':'<div class="defaultlegal"><p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protección de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><br><br><p><em>(i) Los datos de carácter personal, incluida la dirección de correo electrónico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), serán incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, así como de los que puedan generarse por causa de la correspondiente relación que en su caso conciertes con nosotros.</em></p><p><em>Mediante el envío de cualquiera de los formularios que figuren en el PORTAL, prestarás tu inequívoco consentimiento al régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico que se describa en el aviso sobre dicho régimen habilitado en el formulario correspondiente.</em></p><br><br><p><em>Asimismo, los datos de carácter personal, incluida la dirección de correo electrónico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y sólo en aquellos casos donde no sea viable una relación comercial con nosotros debido a nuestra política de admisión y/o riesgos, podrán ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiación similares a los solicitados a nuestra entidad.</em></p><br><br><p><em>(ii) Utilizaremos la información personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, así como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefonía, electrónica, seguros, moda o de consumo, entretenimiento, servicios de consultoría y asesoramiento.</em></p><br><br><p><em>Además, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electrónico u otro medio de comunicación electrónica equivalente, informaciones publicitarias o promocionales, de carácter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><br><br><p><em>En los avisos sobre régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico serás adecuadamente informado respecto del carácter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><br><br><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicación de Banca Móvil debes conocer que realizamos otros tratamientos, como el uso del micrófono, el acceso a tu galería multimedia, los contactos de tu agenda, la geolocalización para indicarte tus cajeros más cercanos o el comparador de productos, y te pediremos un consentimiento específico para ello.</em></p><br><br><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en función de la relación que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservarán durante 1 año, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitación de solicitudes y evitar la duplicación de formalidades.</em></p><br><br><p><em>(v) EVO BANCO S.A.U. tratará de forma confidencial los datos de carácter personal que nos proporciones, ajustándose a lo establecido en el Reglamento 679/2016 de Protección de Datos y en las normas que lo desarrollen o complementen, y con aplicación de las medidas de índole técnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteración, pérdida, tratamiento o acceso no autorizados.</em></p><br><br><p><em>Verificar la identidad, verificar la vinculación entre un cliente y su cuenta bancaria o tarjeta de crédito/débito, proporcionarnos información que nos permita tomar decisiones relacionadas con análisis de solvencia de un cliente en materia de prevención y detección de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperación de deudas, realizar análisis estadísticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>'
}
var evoBancaProductForm = '';
var evoBancaTypeForm = '';
var isPresence = false;
var idButtonClicked = '';
var intervalCheckHazloEasy = null;
var eventActionCtaHipotecaJoven = '';
var isModalOpenedByFollow = '';

if(typeof configTrafficEvoSite == 'undefined'){
		var configTrafficEvoSite = configTrafficEvoSiteDefault;	
}else{
	var configTrafficEvoSiteISOk  = true;
	var configTrafficContainItmes = false;
	for (var key in configTrafficEvoSite) {
    // check if the property/key is defined in the object itself, not in parent
	    if (configTrafficEvoSite.hasOwnProperty(key)) {    
	    	configTrafficContainItmes = true;       
	        if(key=='haztecliente' || key=='cuentajoven'){
	        	if(typeof configTrafficEvoSite[key] != 'undefined'){
	        		if(typeof configTrafficEvoSite[key].porcentaje_url1 !='undefined'){
	        			if(configTrafficEvoSite[key].porcentaje_url1 =='' || !(/^\d+$/.test(configTrafficEvoSite[key].porcentaje_url1))){
	        				configTrafficEvoSiteISOk = false;
	        			}
	        		}else if(typeof configTrafficEvoSite[key].url1 !='undefined'){
	        			if(configTrafficEvoSite[key].url1 == ''){
	        				configTrafficEvoSiteISOk = false;
	        			}	        			
	        		}else if(typeof configTrafficEvoSite[key].url2 !='undefined'){
	        			if(configTrafficEvoSite[key].url2 == ''){
	        				configTrafficEvoSiteISOk = false;
	        			}
	        		}else{
	        			configTrafficEvoSiteISOk = false;
	        		}
				}
	        }else{
	        	configTrafficEvoSiteISOk = false;
	        }
	    }
	}
	if(!configTrafficEvoSiteISOk || !configTrafficContainItmes){
		configTrafficEvoSite = configTrafficEvoSiteDefault;		
	}
}


function isMobile() {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
}

function isTheDayOf(){
	date 	= new Date();
	year 	= date.getFullYear();
	isTheDay = false;

	//Returns the month (from 0-11)
	month 	= date.getMonth();

	//Returns the day of the month (from 1-31)
	day 	= date.getDate();

	//Returns the hour (from 0-23)
	hour    = date.getHours();

	//Returns the minutes (from 0-59)
	minutes = date.getMinutes();

	if(year == 2018 && month == 1 && day == 13 && hour>=23){
		isTheDay = true; 
	}

	if(year == 2018 && month == 1 && day == 14 && (hour == 0 || hour == 1 && minutes<=30)){
		isTheDay = true; 
	}

	return isTheDay;
}


function updateRegisterLink(){	

	if(generatePercentRandom(configTrafficEvoSite.haztecliente.porcentaje_url1)){
		//70%
		urlToChange = configTrafficEvoSite.haztecliente.url1;
	}else{
		//30%
		urlToChange = configTrafficEvoSite.haztecliente.url2;
	}

	// NOTA: El próximo 13 de febrero de las 23.00 a la 1.30 del 14 de Febrero hay un batch 
	// y se nos cae el 2.0  https://v2.cuentainteligente.evobanco.com/ con lo que en esas horas tenemos que poner todo al 1.0, 
	// pero si no se puede programar https://cuentainteligente.evobanco.com/  lo tenemos que hacer de otra manera.
	//if(isTheDayOf()) {
	//	urlToChange = urlEvoCuentaInteligenteOnline;
	//}

		//urlToChange = urlEvoCuentaInteligenteOnline;
	if(typeof jQuery !== 'undefined'){
		if(checkWphIsCampaignCuentaInteligenteOnline()){
			

			if(jQuery("#client_register").length>0 && jQuery("#client_register").attr("href").indexOf(urlPatternCuentaInteligenteOnline)>= 0){
				jQuery("#client_register").attr("href",urlToChange+sessionStorage.linkCuentaInteligenteOnline);
			}

			jQuery("a.m_btn.m_btn_inv").each(function(){
				if(this.href.indexOf(urlPatternCuentaInteligenteOnline)>= 0){
					this.href=urlToChange+sessionStorage.linkCuentaInteligenteOnline;
				}
			});

			jQuery("a.m_btn.m_btn_std").each(function(){
				if(this.href.indexOf(urlPatternCuentaInteligenteOnline)>= 0){
					this.href=urlToChange+sessionStorage.linkCuentaInteligenteOnline;
				}
			});
			
		}else{		

			if(jQuery("#client_register").length>0 && jQuery("#client_register").attr("href").indexOf(urlPatternCuentaInteligenteOnline)>= 0){
				jQuery("#client_register").attr("href",urlToChange);
			}

			/*
			[2023-11-14] - FBB Quitamos modificación de url https://ipglobal.atlassian.net/browse/WE-121
			jQuery("a.m_btn.m_btn_inv").each(function(){
				if(this.href.indexOf(urlPatternCuentaInteligenteOnline)>= 0){
					this.href=urlToChange;
				}
			});

			jQuery("a.m_btn.m_btn_std").each(function(){
				if(this.href.indexOf(urlPatternCuentaInteligenteOnline)>= 0){
					this.href=urlToChange;
				}
			});
			*/

			
		}
		if(generatePercentRandom(50)){
			//50%
			urlToChange = 'http://bit.ly/2p8VAgV';
		}else{		
			urlToChange = 'http://bit.ly/2p7ulTM';
		}

		if(checkWphIsCampaignHazloEasy()){
			

			//Botón "Vente a EVO"
			if(jQuery("a.btn").length>0 && jQuery("a.btn").attr("href").indexOf('v2.contratacioncuenta.evobanco.com')>= 0){
				jQuery("a.btn").attr("href",urlToChange);
			}

			//Botones ¡pásate a lo easy!
			//initCheckHazloEasy(urlToChange); 
			
			
			
		}

		//if(document.location.search.indexOf("codRecommendation")>= 0){
		if(document.location.href.indexOf("v2.contratacioncuenta.evobanco.com")>= 0 || document.location.href.indexOf("contratacioncuenta.evobanco.com")>= 0){
			$('a[id^="boton_contratacion_"]').each(function( index ) {

					if ($( this ).attr("href").indexOf("?") > 0) {
						var clean_uri = $( this ).attr("href").substring(0, $( this ).attr("href").indexOf("?"));
						$( this ).attr("href",clean_uri + document.location.search );
					}
					//

					console.log( index + ": " + $( this ).attr("href") );

					/*var re = new RegExp("&codRecommendation=\\d+");
					var newUrl=$( this ).attr("href");
					console.log(newUrl.replace(re, ''));*/

					
			});
				//console.log($('div[id^="boton_contratacion_"]').attr("href"));// document.location.search
		}

		

		//if(document.location.search.indexOf("codRecommendation")>= 0){
		if(document.location.href.indexOf("v2.contratacuenta.evobanco.es")>= 0 || document.location.href.indexOf("contratacioncuenta.evobanco.com")>= 0){
			$('a[id^="boton_contratacion_"]').each(function( index ) {

					/*if ($( this ).attr("href").indexOf("?") > 0) {
						var clean_uri = $( this ).attr("href").substring(0, $( this ).attr("href").indexOf("?"));
						$( this ).attr("href",clean_uri + document.location.search );
					}else if ($( this ).attr("href").indexOf("bienvenido") > 0) {
						//var clean_uri = $( this ).attr("href").substring(0, $( this ).attr("href").indexOf("bienvenido"));
						
					}*/
					var separator = ( $( this ).attr("href").indexOf("?") === -1) ? "?" : "&";

						$( this ).attr("href", $( this ).attr("href") + document.location.search.replace("&ectrans=1", "") );

					//console.log( index + ": " + $( this ).attr("href") );  		

					
			});
		}

		/* [2022-09-16] - FBB Proyecto Magnolia
		Si en la url de aterrizaje contiene origen WEB -- pisar seccion y origen en los botones siguientes. La regla de propagar origen y seccion de aterrizaje es OK
		Si en la url de aterrizaje contiene origen bmi -- pisar seccion y origen en los botones siguientes. La regla de propagar origen y seccion de aterrizaje es OK
		Si en la url no aparece nada --> pisar seccion y origen por origen=be&seccion=be
		*/

		if(document.location.href.indexOf("inversis.es")>= 0 && document.location.href.indexOf("inversis.es/evobanco/buscador-de-etf")<0 && document.location.href.indexOf("inversis.es/evobanco/buscador-de-fondos")<0){

			$('a').each(function( index ) {
					//Default  origen=BE&seccion=magnolia_inversis
					if(document.location.search == ''){
						//Default
						if($( this ).attr("href").indexOf("cuentainversora.evobanco.com")>= 0){
							console.log( index + " Default: " + $( this ).attr("href") );								
							$( this ).attr("href", updateQueryStringParameterInUrl($( this ).attr("href"), 'origen', 'BE'));
								$( this ).attr("href", updateQueryStringParameterInUrl($( this ).attr("href"), 'seccion', 'be'));
							console.log( index + " Default: " + $( this ).attr("href") );
						}
					}else if(getParameterByNameInUrl('origen', document.location.href)!=''){
						if(getParameterByNameInUrl('origen', document.location.href)=='WEB' || getParameterByNameInUrl('origen', document.location.href)=='bmi'){
							if($( this ).attr("href").indexOf("cuentainversora.evobanco.com")>= 0){
								console.log( index + " WEB/bmi: " + $( this ).attr("href") );
																
								$( this ).attr("href", updateQueryStringParameterInUrl($( this ).attr("href"), 'origen',  getParameterByNameInUrl('origen', document.location.href)));
								$( this ).attr("href", updateQueryStringParameterInUrl($( this ).attr("href"), 'seccion', getParameterByNameInUrl('seccion', document.location.href)));
								console.log( index + " WEB/bmi: " + $( this ).attr("href") );
							}
							
						}else{
							//Default
							if($( this ).attr("href").indexOf("cuentainversora.evobanco.com")>= 0){
								console.log( index + " Default: " + $( this ).attr("href") );								
								$( this ).attr("href", updateQueryStringParameterInUrl($( this ).attr("href"), 'origen', 'BE'));
								$( this ).attr("href", updateQueryStringParameterInUrl($( this ).attr("href"), 'seccion', 'be'));
								console.log( index + " Default: " + $( this ).attr("href") );
							}
						}
					}					
					
			});				
		}

		if(document.location.href.indexOf("hdhvvsugds6743sgsihdskah9/cuentas/depositos")>= 0){

			$('a').each(function( index ) {
				if($( this ).attr("href").indexOf("https://svc.evobanco.com/depositos")>= 0){
					//Default origen=WEB&seccion=depositos
					if(document.location.search == '' || !(getParameterByNameInUrl('origen', document.location.href))){
						//Default																		
						$( this ).attr("href", $( this ).attr("href") + "?origen=WEB&seccion=depositos");								
						console.log( index + " Default: " + $( this ).attr("href") );
						
					}else if(getParameterByNameInUrl('origen', document.location.href)!=''){						
						$( this ).attr("href", $( this ).attr("href") + document.location.search);								
						console.log( index + " WEB/bmi: " + $( this ).attr("href") );
					}
				}					
					
			});				
		}

		//[2023-08-02] FBB parapagación parámetros 
		//[2023-09-26] FBB parapagación parámetros ampliamos a url
		/*
			https://www.evobanco.com/deposito-evo/
			https://www.evobanco.com/deposito-evo/inicio/
			https://evobanco.com/deposito-12-meses/
			https://evobanco.com/deposito-12-meses/inicio/
			https://evobanco.com/deposito-6-meses/
			https://evobanco.com/deposito-6-meses/inicio/
			https://www.evobanco.com/depositos-evo/
			https://www.evobanco.com/depositos-evo/inicio/
			https://evobanco.com/deposito-4-meses/
			https://evobanco.com/deposito-4-meses/inicio/
			https://evobanco.com/deposito-evo-4-meses/
			https://evobanco.com/deposito-evo-4-meses/inicio/
		*/
		if(document.location.href.indexOf("evobanco.com/deposito-")>= 0 
			|| document.location.href.indexOf("evobanco.com/depositos/inicio")>= 0
				|| document.location.href.indexOf("evobanco.com/depositos-evo/")>= 0){
					//[2023-11-02] FBB cambios página depositos si viene con imposicion cambiamso titulo class header-title
					if((getParameterByNameInUrl('utm_source', document.location.href)) 
					&& getParameterByNameInUrl('utm_source', document.location.href).indexOf("imposicion")>=0){				
						$('.subtitle ').html('<strong>Realiza la imposición en depósito y haz crecer tus ahorros.</strong>');
						changeCTATextDepositos = true;
					}

					$('a').each(function( index ) {						
						
						if($( this ).attr("href") && $( this ).attr("href").indexOf("https://svc.evobanco.com/depositos")>= 0){
							//[2023-11-02] FBB cambios página depositos modificar texto CTA si changeCTATextDepositos = true
							if(typeof changeCTATextDepositos !='undefined' && changeCTATextDepositos){
								$(this).children("button").text("REALIZAR IMPOSICIÓN");
							}
							//Default origen=WEB&seccion=depositos
							if(document.location.search == '' || !(getParameterByNameInUrl('origen', document.location.href))){
								//Default $( this ).attr("href", $( this ).attr("href") + "?origen=WEB&seccion=depositos");	

								//[2023-11-02] FBB cambios página depositos modificar la variable "seccion" del CTA
								//Si url es https://www.evobanco.com/deposito-evo/inicio/, https://www.evobanco.com/depositos/inicio/

								if(document.location.pathname == '/deposito-evo/inicio/' || document.location.pathname == '/depositos/inicio/'){
									$( this ).attr("href", $( this ).attr("href").split('?')[0] + "?origen=WEB&seccion=depositos_inicio");	
								}else{
									$( this ).attr("href", $( this ).attr("href").split('?')[0] + "?origen=WEB&seccion=depositos");	
								}							
								console.log( index + " Default: " + $( this ).attr("href") );
								
							}else if(getParameterByNameInUrl('origen', document.location.href)!=''){						
								$( this ).attr("href", $( this ).attr("href").split('?')[0] + document.location.search);								
								console.log( index + " WEB/bmi: " + $( this ).attr("href") );
							}
						}					
							
					});	
					
					
					//
		}

		//[2023-12-14] FBB WEB-propagación de parámetros
		if(document.location.href.indexOf("evobanco.com/cuentas/segunda-cuenta-inteligente/")>= 0){
			
			$('a').each(function( index ) {						
				
				if($( this ).attr("href") && $( this ).attr("href").indexOf("https://v2.cuentainteligente.evobanco.com/multicuenta")>= 0){
					
					if(getParameterByNameInUrl('origen', document.location.href)!=''){						
						$( this ).attr("href", $( this ).attr("href").split('?')[0] + document.location.search);								
						console.log( index + " WEB/bmi: " + $( this ).attr("href") );
					}
				}					
					
			});						
		}
		

		if(document.location.href.indexOf("inversis.es")>= 0){

			$('a').each(function( index ) {
					//Default  ?origen=BE añadir &seccion=be
					if($( this ).attr("href").indexOf("evobanco.finect.com")>= 0){
						console.log( index + ": " + $( this ).attr("href") );
						var separator = ( $( this ).attr("href").indexOf("?") === -1) ? "?" : "&";
						$( this ).attr("href", $( this ).attr("href") + separator+"seccion=be");
						console.log( index + ": " + $( this ).attr("href") );
					}	
			});				
		}

		//[2022-09-16] - FBB Modificar acción del botón de ../boker para TestA/B. 50% de tráfico se cambia por un link y otro 50% queda como está.
		//if(document.location.href.indexOf("https://www.evobanco.com/hdhvvsugds6743sgsihdskah9/inversion/broker/") >= 0 
		//	|| document.location.href.indexOf("https://www.evobanco.com/inversion/broker/") >= 0){
		/*if(document.location.href == "https://www.evobanco.com/hdhvvsugds6743sgsihdskah9/inversion/broker/" || document.location.href == "https://www.evobanco.com/inversion/broker/"){
			console.log("TestA/B - 50% link vs modal");
			if(jQuery( "button:contains('ENTRA A INVERTIR')")!=undefined && jQuery( "button:contains('ENTRA A INVERTIR')").attr("data-bs-target")!=undefined){
				if(generatePercentRandom(50)){					
					//Replace open Modal 
					jQuery( "button:contains('ENTRA A INVERTIR')").attr("data-bs-target", "");
					//Add link cuenta inversora
					jQuery( "button:contains('ENTRA A INVERTIR')").attr("onclick", "window.location.href=\'https://bit.ly/31Xrwbs\'") ;
				}
			}			
		}*/	
	}
	
	
}

function updateQueryStringParameterInUrl(uri, key, value) {
	var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
	var separator = uri.indexOf('?') !== -1 ? "&" : "?";
	if (uri.match(re)) {
	  return uri.replace(re, '$1' + key + "=" + value + '$2');
	}
	else {
	  return uri + separator + key + "=" + value;
	}
  }

function getParameterByNameInUrl(name, url = window.location.href) {
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}


function initCheckHazloEasy(url){
	setInterval(function(){ 
		if(jQuery("div.info a").length>0 && jQuery("div.info a").attr("href").indexOf('v2.contratacioncuenta.evobanco.com')>= 0){
			jQuery("div.info a").attr("href",url);
		}
	}, 1000);
}

function checkWphIsCampaignCuentaInteligenteOnline(){

	if(//document.referrer.indexOf("utm_campaign=Cuenta-Inteligente-Online")   >= 0 || 
		document.URL.indexOf(utmEvoCuentaInteligenteOnline) >= 0 ){		
		if(isPrivateBrowsingSupportedStorage()){
			 sessionStorage.isCuentaInteligenteOnline = true;
			 if(window.location.search!= '' && window.location.search.indexOf(utmEvoCuentaInteligenteOnline) >= 0)
			 	//sessionStorage.linkCuentaInteligenteOnline = '#'+window.location.search;
			 	sessionStorage.linkCuentaInteligenteOnline = ''+window.location.search;
			 if(window.location.hash!='' && window.location.hash.indexOf(utmEvoCuentaInteligenteOnline) >= 0)
			 	sessionStorage.linkCuentaInteligenteOnline = window.location.hash;
		}		
		return true;
	}else{
		if(isPrivateBrowsingSupportedStorage() && sessionStorage.isCuentaInteligenteOnline =='true'){
			return true;
		}else{
			return false;
		}
	}

}

function checkWphIsCampaignHazloEasy(){

	if(document.URL.indexOf('hazlo-easy.evobanco.es') >= 0 ){				 
		return true;
	}else{
		return false;
	}

}

function updateLinksCuentaJovenOnlineUtms(){

	//cuentajoven.evobanco.com
	try{
		if(window.location.search!=''){
			if(jQuery('.m_btn.m_btn_inv').attr('href').indexOf('cuentajoven.evobanco.com')>=0){
				jQuery('.m_btn.m_btn_inv').attr('href',jQuery('.m_btn.m_btn_inv').attr('href') + window.location.search);			
			}
			if(jQuery('.m_btn.m_btn_std')[1].href.indexOf('cuentajoven.evobanco.com')>=0){			
				jQuery('.m_btn.m_btn_std')[1].href =  jQuery('.m_btn.m_btn_std')[1].href + window.location.search;
			}
		}
	}catch(exception){
    	console.log(exception);  
        //showMgs('Opps!! algo ha ido mal.','');
    } 


}


/**
 * Generate a % by number given
 * Ej: calculate = 8  ( => 80%) if percent == 6  then true (6<8)
 */
function generatePercentRandom(calculate){
	percent = Math.floor(Math.random() * 100 + 1);
	//console.log(percent);
	//console.log(calculate);
	return (percent<=parseInt(calculate));
}

/**
 * Load custom css to change CMS styles
 */
function cmsCustomStyles() {

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/dinamicscss_customcms.css' type='text/css' rel='stylesheet' media='all'/>")

}

/**
 * Load custom css to custom chat-evoassistant
 */
 function chatEvoassistantCustomStyles() {

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/chat-evoassistant.css' type='text/css' rel='stylesheet' media='all'/>")

}

/**
 * Remove chat-evoassistant Element
 */
function removeChatEvoassistant(){
	if(document.getElementsByClassName('chat-evoassistant').length>0){
		document.querySelector(".chat-evoassistant").remove();
	}	
}


/**
 * Load custom button events by url
 */

function submitChatButton(){
	//if($("#form_asistente")){
		var a = "https://api.eu-de.apiconnect.ibmcloud.com/tecnologiaevobancocom-produccion/evo-apis/api/v1/authorization";
        var g = "cliente";
        var e = "false";
        var b = "https://evobanco-watson.eu-de.mybluemix.net/chat";
        var f = "EVOBot";
        var d = getCookie("portal_rvia_cmp");
        if (d == "prt0239") {
            e = "true"
        }
        var c = "";
        if ((a.length > 0 && a.indexOf("???") == -1) && (g.length > 0 && g.indexOf("???") == -1) && (e.length > 0 && e.indexOf("???") == -1)) {
            $.ajax({
                url: a,
                dataType: "jsonp",
                type: "get",
                error: function() {
                    //alert("No se encuentra disponible el asistente de ayuda.");
                    c = {token: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1M…Y1OH0.iz9m8MiqeZhR-zq7Uh6Ow52RW3k54bGqbseMKSlp38k"}
                    if ($("#form_asistente").length == 0) {
                        $("<form></form>").attr({
                            id: "form_asistente",
                            method: "post",
                            action: b,
                            target: f
                        }).on("submit", function(i) {
                            abrirNuevaVentana("EVOBot");
                            return true
                        }).appendTo("body");
                        $("<input />").attr({
                            type: "hidden",
                            name: g,
                            id: g,
                            value: e
                        }).appendTo("#form_asistente");
                        $("<input />").attr({
                            type: "hidden",
                            name: "token",
                            id: "token",
                            value: c
                        }).appendTo("#form_asistente")
                    }
                    $("#form_asistente").submit()
                },
                success: function(h) {
                	//console.log(h);
                    c = h.token;
                    if ($("#form_asistente").length == 0) {
                        $("<form></form>").attr({
                            id: "form_asistente",
                            method: "post",
                            action: b,
                            target: f
                        }).on("submit", function(i) {
                            abrirNuevaVentana("EVOBot");
                            return true
                        }).appendTo("body");
                        $("<input />").attr({
                            type: "hidden",
                            name: g,
                            id: g,
                            value: e
                        }).appendTo("#form_asistente");
                        $("<input />").attr({
                            type: "hidden",
                            name: "token",
                            id: "token",
                            value: c
                        }).appendTo("#form_asistente")
                    }
                    $("#form_asistente").submit()
                }
            })
        }
	//}
} 


function jsCustomEvents() {
	//get Module number 4
	if(document.getElementsByClassName('module_row').length>0){		
		var module =  document.getElementsByClassName('module_row')[5];
		if(module.getElementsByClassName('m_distri').length>0){			
			var m_distri = module.getElementsByClassName('m_distri')[0];
			if(m_distri.getElementsByClassName('m_infobox').length>0){				
				var m_infobox = m_distri.getElementsByClassName('m_infobox')[0];

				// Version para módulos con m_infobox_footer 				
				if(m_infobox.getElementsByClassName('m_infobox_footer').length>0){						
					var m_infobox_footer = m_infobox.getElementsByClassName('m_infobox_footer')[0];
					if(m_infobox_footer.getElementsByClassName('m_infobox_actions').length>0){							
						var m_infobox_actions = m_infobox_footer.getElementsByClassName('m_infobox_actions')[0];
						
						//Existe botón "Saber más"
						if(m_infobox_actions.getElementsByClassName('m_btn').length>0){	
							var m_btn = m_infobox_actions.getElementsByClassName('m_btn')[0];
							m_btn.setAttribute('id','myWphButtontoclick');
							document.getElementById("myWphButtontoclick").setAttribute('href','javascript:void(0);submitChatButton();');
							//document.getElementById("myWphButtontoclick").onclick = submitChatButton();
						}
					}
				}else{	
					// Version para módulos con m_infobox_text
					if(m_infobox.getElementsByClassName('m_infobox_text').length>0){						
						var m_infobox_text = m_infobox.getElementsByClassName('m_infobox_text')[0];										
						//Existe botón "Saber más"
						if(m_infobox_text.getElementsByClassName('m_btn').length>0){	
							var m_btn = m_infobox_text.getElementsByClassName('m_btn')[0];
							m_btn.setAttribute('id','myWphButtontoclick');
							document.getElementById("myWphButtontoclick").setAttribute('href','javascript:void(0);submitChatButton();');
							//document.getElementById("myWphButtontoclick").onclick = submitChatButton();
						}
					}
				}
					
			}


		}
	}

	if(document.getElementsByClassName('btnChat').length>0){
		var btChatboot = document.getElementsByClassName('btnChat')[0];		
		btChatboot.setAttribute('id','myWphButtontoclick');
		document.getElementById("myWphButtontoclick").setAttribute('onclick','javascript:void(0);openChatBootWph(event);');
	}
	if(document.getElementById('chatM')!=null){
		//var btChatboot = document.getElementById('chatM')[0];		
		//btChatboot.setAttribute('id','myWphButtontoclick');
		document.getElementById('chatM').setAttribute('onclick','javascript:void(0);openChatBootWph(event);');
	}
	

}


function openChatBootWph(event) {
   event.preventDefault();
   submitChatButton();
}

function convertIdC2CToString(idC2C){
	switch (idC2C) {
		case 'C2C_otros_fondos': 
		case 'C2C_otros_fondos_traer': 
		case 'C2C_fondos_traer_main':
		case 'C2C_fondos_guia_main': 
			return 'Fondos de Inversión';      
		break;
		case 'C2C_FI': 
			return 'Fondo Inteligente';      
		break;
		case 'C2C_Hucha': 
			return 'Hucha Inteligente';      
		break;
		case 'C2C_Caja': 
			return 'Hucha Caja Fuerte';      
		break;
		case 'C2C_plan': 
			return 'Plan de Inversión Inteligente';      
		break;
		case 'C2C_distributiva': 
			return 'Distributiva de Inversión';      
		break;	
		case 'C2C_ETF_traer':
		case 'C2C_ETF_traer_main':
		case 'C2C_ETF_guia_main':
		case 'C2C_ETF':  		
			return 'ETF';      
		break;
		case 'C2C_broker_traer': 
		case 'C2C_broker_traer_main':
		case 'C2C_broker_guia_main':
		case 'C2C_broker': 		 
			return 'Broker Inteligente';      
		break;
		case 'C2C_desplegado': case 'C2C_ayuda': case 'C2C_consulta': 
			return 'Inversión_especialistas_Web';      
		break;
		case 'C2C_contacto': 
			return 'Inversión_especialistas_Web';      
		break;
		case 'C2C_hipoteca': 
			return 'Hipoteca';      
		break;	
		case 'C2C_ayuda_multicuenta_Web': 
			return 'Multicuenta';      
		break;	
		case 'C2C_deposito_4':
		case 'C2C_deposito_6':
		//[2023-03-01] FBB C2C página depósitos a 4 y 6 meses
		case 'C2C_deposito_12':	
		case 'C2C_deposito': 
			return 'Deposito';      
		break;
		case 'C2C_Depositos': 
			return 'Deposito';      
		break;
		case 'C2C_display': 
			return 'Contratación Cuenta Inteligente';      
		break;					
		default:  
			return idC2C; 		 
		break; 
	}
}


function jsCustomEvoBootEvents() {
	//get Module number 4
	if(document.getElementsByClassName('module_row').length>0){		
		var module =  document.getElementsByClassName('module_row')[1];
		if(module.getElementsByClassName('m_storytelling_section_txt').length>0){			
			var m_distri = module.getElementsByClassName('m_storytelling_section_txt')[0];
			if(m_distri.getElementsByClassName('m_infobox').length>0){				
				var m_infobox = m_distri.getElementsByClassName('m_infobox')[0];

				// Version para módulos con m_infobox_footer 				
				if(m_infobox.getElementsByClassName('m_infobox_footer').length>0){						
					var m_infobox_footer = m_infobox.getElementsByClassName('m_infobox_footer')[0];
					if(m_infobox_footer.getElementsByClassName('m_infobox_actions').length>0){							
						var m_infobox_actions = m_infobox_footer.getElementsByClassName('m_infobox_actions')[0];
						
						//Existe botón "Saber más"
						if(m_infobox_actions.getElementsByClassName('m_btn').length>0){	
							var m_btn = m_infobox_actions.getElementsByClassName('m_btn')[0];
							m_btn.setAttribute('id','myWphButtontoclick');
							//document.getElementById("myWphButtontoclick").setAttribute('href','javascript:void(0);submitChatButton();');

							document.getElementById("myWphButtontoclick").setAttribute('href','javascript:void(0);submitChatButton();');	
							
							//document.getElementById("myWphButtontoclick").onclick = submitChatButton();
						}
					}
				}else{	
					// Version para módulos con m_infobox_text
					if(m_infobox.getElementsByClassName('m_infobox_text').length>0){						
						var m_infobox_text = m_infobox.getElementsByClassName('m_infobox_text')[0];										
						//Existe botón "Saber más"
						if(m_infobox_text.getElementsByClassName('m_btn').length>0){	
							var m_btn = m_infobox_text.getElementsByClassName('m_btn')[0];
							m_btn.setAttribute('id','myWphButtontoclick');
							
							document.getElementById("myWphButtontoclick").setAttribute('href','javascript:void(0);submitChatButton();');	
												
						}
					}
				}
					
			}


		}
	}
	

}


function createC2CFollowWidgetHipoteca(isforced) {
	
	
		chatEvoassistantCustomStyles();
		//Force remove element with timeout if exists delay in evebanco web		
		setTimeout(function(){ 
			removeChatEvoassistant();
		}, 3000);

		myFollowContent = /*'<div class="wph-btn-iframe">'+*/
		'<div class="wph-btn" id="wphFollow">'+
		  '<div class="wph-icon" id="wph-icon">'+
			'<img id="wph-c2c-icon" alt="icono operadora" src="https://www.evobanco.com/.galleries/valores/ic-operadora.svg">'+          
		  '</div>'+
		  //[2024-02-14] FBB - Añade alt icono operadora
		  '<div class="c2c_layer_chat_evoassistant" id="c2c_layer_chat_evoassistant">'+
		  		'<img class="img_layer_chat_evoassistant" id="img_layer_chat_evoassistant" alt="icono operadora" src="https://www.evobanco.com/.galleries/plan-inversion/ic_operadora.svg">'+
		  		'<span class="close_button_chat_evoassistant" id="close_button_chat_evoassistant" title="Cerrar">×</span>'+
		  		'<p class="main_help_text">¡Hola! ¿Alguna duda?</p>'+ 
				'<p class="secundary_help_text">Si necesitas ayuda pulsa el botón y te llamamos.</small></p>'+
		  		'<a class="m_btn m_btn_std btn_layer_chat_evoassistant" target="" id="my_wph_chat_evoassistant" href="javascript:void(0);saveLeadC2CNow(11311);">LLAMADME</a>'+				
		   '</div>'+
		   '<div class="pointer_layer_chat_evoassistant" id="pointer_layer_chat_evoassistant"></div>'+
		'</div>';
  
		setTimeout(function () { 

			window.document.body.insertAdjacentHTML( 'afterbegin', myFollowContent );
			
			var wphFollow = document.getElementById("wph-icon");
			//SET FOLLOW BTN EVENT
			wphFollow.addEventListener("click", function (e) { 
	
				console.log("click wphFollow");
				idCTAValue = 'Flotante_Hipoteca';				
				isPresence = true;
				isModalOpenedByFollow = "_flotante";		
				evoBancaProductForm = idCTAValue; 
				eventActionCtaHipotecaJoven = idCTAValue;
				console.log(eventActionCtaHipotecaJoven);
				appendCssModalC2C();
				createJsCustomModalFormsC2CBroker_NODAYHOUR(idCTAValue,11311);
	
				dataLayer.push({
					event: "CTA",
					eventCategory: 'Simulación Hipoteca',
					eventAction: 'Acceso a contratación sección Hipoteca' ,
					eventLabel: "Abre C2C" + isModalOpenedByFollow
				});
				
				toggleModal();
	
			}, false);
	
	  
			  //SET CLOSE BTN EVENT
			var wphFollowCloseBtn = document.getElementById("close_button_chat_evoassistant");      
			wphFollowCloseBtn.addEventListener("click", function (e) {          				
			if(isPrivateBrowsingSupportedStorage() && localStorage.is_opened_chat_evoassistant !== 'true') {
				console.log("close layer chat");
				localStorage.is_opened_chat_evoassistant = true;
				document.getElementById("c2c_layer_chat_evoassistant").style.display = 'none';
				document.getElementById("pointer_layer_chat_evoassistant").style.display = 'none';
				dataLayer.push({
					event: "CTA",
					eventCategory: 'Simulación Hipoteca',
					eventAction: 'Acceso a contratación sección Hipoteca' ,
					eventLabel: "Cierra Banner C2C_flotante"
				});
			}
			}, false);
	
			//SET FOLLOW BTN LAYER C2C EVENT
			var wphLayerFollow = document.getElementById("my_wph_chat_evoassistant");
			wphLayerFollow.addEventListener("click", function (e) { 
	
				console.log("click wphFollow");
				idCTAValue = 'Flotante_Hipoteca';
				isPresence = true;
				isModalOpenedByFollow = "_flotante";		
				evoBancaProductForm = idCTAValue; 
				eventActionCtaHipotecaJoven = idCTAValue;
				console.log(eventActionCtaHipotecaJoven);
				appendCssModalC2C();
				createJsCustomModalFormsC2CBroker_NODAYHOUR(idCTAValue,11311);
	
				dataLayer.push({
					event: "CTA",
					eventCategory: 'Simulación Hipoteca',
					eventAction: 'Acceso a contratación sección Hipoteca' ,
					eventLabel: "Abre Banner C2C" + isModalOpenedByFollow
				});
				
				toggleModal();
	
			}, false);
	
			//START- SHOW OR NOT SHOW LAYER C2C BY URL AND localStorage.is_opened_chat_evoassistant
			var allowedHostnameLayerC2C = ['www.evobanco.com'];
			var allowedPathnameUrlsLayerC2C = [			
				'/desarrollo/',
				'/hipoteca/'
			];
	  
	
			if (!isMobile() && allowedHostnameLayerC2C.indexOf(document.location.hostname) !== -1) {
				for (var i=0; i<allowedPathnameUrlsLayerC2C.length; i++) {
					if (document.location.pathname.indexOf(allowedPathnameUrlsLayerC2C[i]) !== -1) {
						
						if(isPrivateBrowsingSupportedStorage() && localStorage.is_opened_chat_evoassistant !== 'true'){
							console.log("Show c2C layer");
							document.getElementById("c2c_layer_chat_evoassistant").style.display = 'block';
							document.getElementById("pointer_layer_chat_evoassistant").style.display = 'block';
						}else{
							//console.log("Hide C2C layer");		
						}
					}
				}
			}
			//END - SHOW OR NOT SHOW LAYER BY URL AND localStorage.is_opened_chat_evoassistant
	
		}, 500);
    
}

//[FBB 2023-05-31] Añadimos función para no permitir ciertas url en C2C flotante
function urlNotAllowedinFollowC2C(){
	
	const urls = [
			'/cuentas/segunda-cuenta-inteligente/',
			'/hdhvvsugds6743sgsihdskah9/cuentas/segunda-cuenta-inteligente/'
			];

	return urls.includes(document.location.pathname);
}

function createC2CFollowWidget(isforced) {
	
	if( !(urlNotAllowedinFollowC2C()) && jQuery("button[id*='C2C_']").length>0 || isforced){
		chatEvoassistantCustomStyles();
		//Force remove element with timeout if exists delay in evebanco web		
		setTimeout(function(){ 
			removeChatEvoassistant();
		}, 3000);

		myFollowContent = /*'<div class="wph-btn-iframe">'+*/
		'<div class="wph-btn" id="wphFollow">'+
		  '<div class="wph-icon" id="wph-icon">'+
			'<img id="wph-c2c-icon" alt="icono operadora" src="https://www.evobanco.com/.galleries/valores/ic-operadora.svg">'+          
		  '</div>'+
		//[2024-02-14] FBB - Añade alt icono operadora
		  '<div class="c2c_layer_chat_evoassistant" id="c2c_layer_chat_evoassistant">'+
		  		'<img class="img_layer_chat_evoassistant" id="img_layer_chat_evoassistant" alt="icono operadora" src="https://www.evobanco.com/.galleries/plan-inversion/ic_operadora.svg">'+
		  		'<span class="close_button_chat_evoassistant" id="close_button_chat_evoassistant" title="Cerrar">×</span>'+
		  		'<p class="main_help_text">¡Hola! ¿Alguna duda?</p>'+ 
				'<p class="secundary_help_text">Si necesitas ayuda pulsa el botón y te llamamos.</small></p>'+
		  		'<a class="m_btn m_btn_std btn_layer_chat_evoassistant" target="" id="my_wph_chat_evoassistant" href="javascript:void(0);saveLeadC2CNow(11313);">LLAMADME</a>'+				
		   '</div>'+
		   '<div class="pointer_layer_chat_evoassistant" id="pointer_layer_chat_evoassistant"></div>'+
		'</div>';
  
		myAppendeWidgetFunction(myFollowContent);
	}
    
}

//ADDING C2C FOLLOW BTN AND LAYER C2C
function myAppendeWidgetFunction(content) {
    
    setTimeout(function () { 

		window.document.body.insertAdjacentHTML( 'afterbegin', content );
		
		var wphFollow = document.getElementById("wph-icon");
		//SET FOLLOW BTN EVENT
		wphFollow.addEventListener("click", function (e) { 

			console.log("click wphFollow");
			idCTAValue = 'Product';
			try{		
				//[2023-02-16] FBB C2C en sección /hipoteca - JIRA WE-109	
				//idCTAValue = jQuery("button[id*='C2C_']")[0].id;
				idCTAValue = (jQuery("button[id*='C2C_']").length>0)? jQuery("button[id*='C2C_']")[0].id: 'Hipoteca';
				idCTAValue = idCTAValue.replace('_traer_main', '').replace('_traer', '');
				if (idCTAValue == 'C2C_fondos_guia_main' || idCTAValue == 'C2C_otros_fondos_guia_main') { idCTAValue = 'C2C_otros_fondos'; }
			}catch(exception){
				showMgs('Opps!! algo ha ido mal.','', exception);			
			}

			isPresence = true;
			isModalOpenedByFollow = "_flotante";		
			evoBancaProductForm = idCTAValue; 
			eventActionCtaHipotecaJoven = idCTAValue;
			console.log(eventActionCtaHipotecaJoven);
			createJsCustomModalFormsC2CBroker_NODAYHOUR(idCTAValue,11313);

			dataLayer.push({
				event: "CTA",
				eventCategory: convertIdC2CToString(idCTAValue),
				eventAction: idCTAValue ,
				eventLabel: "Abre C2C" + isModalOpenedByFollow
			});
			
			toggleModal();

		}, false);

  
	  	//SET CLOSE BTN EVENT
		var wphFollowCloseBtn = document.getElementById("close_button_chat_evoassistant");      
		wphFollowCloseBtn.addEventListener("click", function (e) {          				
		if(isPrivateBrowsingSupportedStorage() && localStorage.is_opened_chat_evoassistant !== 'true') {
			console.log("close layer chat");
			localStorage.is_opened_chat_evoassistant = true;
			document.getElementById("c2c_layer_chat_evoassistant").style.display = 'none';
			document.getElementById("pointer_layer_chat_evoassistant").style.display = 'none';
			dataLayer.push({
				event: "CTA",
				eventCategory: convertIdC2CToString(idCTAValue),
				eventAction: idCTAValue ,
				eventLabel: "Cierra Banner C2C_flotante"
			});
		}
		}, false);

		//SET FOLLOW BTN LAYER C2C EVENT
		var wphLayerFollow = document.getElementById("my_wph_chat_evoassistant");
		wphLayerFollow.addEventListener("click", function (e) { 

			console.log("click wphFollow");
			idCTAValue = 'Product';
			try{		
				//[2023-02-16] FBB C2C en sección /hipoteca - JIRA WE-109
				//idCTAValue = jQuery("button[id*='C2C_']")[0].id;
				idCTAValue = (jQuery("button[id*='C2C_']").length>0)? jQuery("button[id*='C2C_']")[0].id: 'Hipoteca';
				idCTAValue = idCTAValue.replace('_traer_main', '').replace('_traer', '');
				if (idCTAValue == 'C2C_fondos_guia_main' || idCTAValue == 'C2C_otros_fondos_guia_main') { idCTAValue = 'C2C_otros_fondos'; }
			}catch(exception){
				showMgs('Opps!! algo ha ido mal.','', exception);			
			}

			isPresence = true;
			isModalOpenedByFollow = "_flotante";		
			evoBancaProductForm = idCTAValue; 
			eventActionCtaHipotecaJoven = idCTAValue;
			console.log(eventActionCtaHipotecaJoven);
			createJsCustomModalFormsC2CBroker_NODAYHOUR(idCTAValue,11313);

			dataLayer.push({
				event: "CTA",
				eventCategory: convertIdC2CToString(idCTAValue),
				eventAction: idCTAValue ,
				eventLabel: "Abre Banner C2C" + isModalOpenedByFollow
			});
			
			toggleModal();

		}, false);

		//START- SHOW OR NOT SHOW LAYER C2C BY URL AND localStorage.is_opened_chat_evoassistant
		var allowedHostnameLayerC2C = ['www.evobanco.com'];
		var allowedPathnameUrlsLayerC2C = [
			'/hdhvvsugds6743sgsihdskah9/inversion/',
			'/inversion/',
			'/fondos-de-inversion/',
			'/productos-inteligentes/inversion-rentable/plan-inversion-inteligente/',					  
			'/productos-inteligentes/inversion-rentable/fondo-inteligente/',
			'/productos-inteligentes/prevision-y-seguros/caja-fuerte/',
			'/servicios-digitales/smartphone-banking/hucha-inteligente/',
			'/desarrollo/',
			'/hipoteca/',
			'/cuentas/deposito/',
			'/cuentas/deposito-12-meses/'
		];
  

		if (!isMobile() && allowedHostnameLayerC2C.indexOf(document.location.hostname) !== -1) {
			for (var i=0; i<allowedPathnameUrlsLayerC2C.length; i++) {
				if (document.location.pathname.indexOf(allowedPathnameUrlsLayerC2C[i]) !== -1) {
					
					if(isPrivateBrowsingSupportedStorage() && localStorage.is_opened_chat_evoassistant !== 'true'){
						console.log("Show c2C layer");
						document.getElementById("c2c_layer_chat_evoassistant").style.display = 'block';
						document.getElementById("pointer_layer_chat_evoassistant").style.display = 'block';
					}else{
						//console.log("Hide C2C layer");		
					}
				}
			}
		}
		//END - SHOW OR NOT SHOW LAYER BY URL AND localStorage.is_opened_chat_evoassistant

    }, 500);
}

function sendToDataLayerAnalytics(product, isSentOk){
	console.log(product);
	if(typeof dataLayer!='undefined' && evoBancaProductForm!=''){
		// [PCC 2021-07-19] Cambio pedido, indicar en eventLabel si hubo error en respuensta de Genesys
		let errorApiGenesys = (typeof isSentOk !== 'undefined' && isSentOk == false) ? ' - Error Gsys' : '';

		if(evoBancaProductForm == 'Coinc'){
			dataLayer.push({
				'event': 'CTC_sent',
                'CTC_form' : idButtonClicked,
			});
		}else if (evoBancaProductForm === 'Hipoteca Joven') {
			dataLayer.push({
				event: "CTA",
				eventCategory: "evobanco.com",
				eventAction: eventActionCtaHipotecaJoven,
				eventLabel: "Formulario enviado C2C" + errorApiGenesys
			});
		}else if (evoBancaProductForm === 'Valores') {
			dataLayer.push({
				event: "CTA",
				eventCategory: "Broker Inteligente",
				eventAction: eventActionCtaHipotecaJoven,
				eventLabel: "Formulario enviado C2C" + errorApiGenesys
			});
		}else if (evoBancaProductForm === 'DXC' || evoBancaProductForm === 'Optimissa' || evoBancaProductForm === 'Alten') {
			dataLayer.push({
				event: "CTA",
				eventCategory: "Simulación Hipoteca",
				eventAction: "Acceso a contratación hipoteca - "+eventActionCtaHipotecaJoven,
				eventLabel: "Formulario enviado C2C" + errorApiGenesys
			});
		}else if (evoBancaProductForm === 'Hipoteca_variable' || evoBancaProductForm === 'Hipoteca_mixta' || evoBancaProductForm === 'Hipoteca_fija') {
			dataLayer.push({
				event: "CTA",
				eventCategory: "Simulación Hipoteca",
				eventAction: "Acceso a contratación sección "+eventActionCtaHipotecaJoven,
				eventLabel: "Formulario enviado C2C" + errorApiGenesys
			});
		//[2023-03-01] FBB C2C página depósitos a 4 y 6 meses
		}else if (evoBancaProductForm === 'C2C_deposito_12') {			
			dataLayer.push({
				event: "CTA",
				eventCategory: "Deposito",
				eventAction: "C2C_Ayuda_12meses",
				eventLabel:  "Formulario enviado C2C" + errorApiGenesys
			});
		
		}else if (evoBancaProductForm === 'C2C_deposito_6') {
			//[FBB 2022-02-10] Eventos nuevos para seción Hipoteca
			dataLayer.push({
				event: "CTA",
				eventCategory: "Deposito",
				eventAction: "C2C_Ayuda_6meses",
				eventLabel:  "Formulario enviado C2C" + errorApiGenesys
			});
		
		}else if (evoBancaProductForm === 'C2C_deposito_4') {
			//[FBB 2022-02-10] Eventos nuevos para seción Hipoteca
			dataLayer.push({
				event: "CTA",
				eventCategory: "Deposito",
				eventAction:  "C2C_Ayuda_4meses",
				eventLabel:  "Formulario enviado C2C" + errorApiGenesys
			});
		
		}else if (evoBancaProductForm === 'C2C_deposito') {
			//[FBB 2022-02-10] Eventos nuevos para seción Hipoteca
			dataLayer.push({
				event: "CTA",
				eventCategory: "Deposito",
				eventAction: "C2C_Ayuda",
				eventLabel:  "Formulario enviado C2C" + errorApiGenesys
			});
		}else if (evoBancaProductForm === 'Hipoteca') {
			//[FBB 2022-02-10] Eventos nuevos para seción Hipoteca
			dataLayer.push({
			   event: "CTA",
			   eventCategory: "Simulación Hipoteca",
			   eventAction: "Acceso a contratación sección Hipoteca",
			   eventLabel: "Formulario enviado C2C_" + eventActionCtaHipotecaJoven + errorApiGenesys
			});
		}else if (evoBancaProductForm === 'Flotante_Hipoteca') {
			//[FBB 2022-02-10] Eventos nuevos para seción Hipoteca
			dataLayer.push({
			   event: "CTA",
			   eventCategory: "Simulación Hipoteca",
			   eventAction: "Acceso a contratación sección Hipoteca",
			   eventLabel: "Formulario enviado C2C_flotante" + errorApiGenesys
			});
		}else if (evoBancaProductForm === 'C2C_segunda_cuenta') {
			//[FBB 2023-06-01] Eventos nuevos para C2C_segunda_cuenta
			dataLayer.push({
			   event: "CTA",
			   eventCategory: "Multicuenta",
			   eventAction: "C2C_segunda_cuenta",
			   eventLabel: "Formulario enviado C2C" + errorApiGenesys
			});
		}else if(eventActionCtaHipotecaJoven!=''){	
				console.log(eventActionCtaHipotecaJoven);			
				dataLayer.push({
					event: "CTA",
					eventCategory: convertIdC2CToString(eventActionCtaHipotecaJoven),
					eventAction: eventActionCtaHipotecaJoven,
					eventLabel: "Formulario enviado C2C" + errorApiGenesys + isModalOpenedByFollow
				});
				//Reset to string empty if follow button was clicked and form sent
				isModalOpenedByFollow ='';
				if(eventActionCtaHipotecaJoven == 'C2C_ayuda' && typeof EA_button!='undefined'){
					EA_button('cmb_rtg_inversion_2');
				}
		}else{
				dataLayer.push({
	            'event': 'form_sent',
	            'form' : evoBancaProductForm
				});
		}		
		
	}
}


function sendToDataLayerAnalyticsCTCopened(idBtn) {

	eventActionCtaHipotecaJoven = 'CTA evo_HI_Joven_HJ';	// Fallback iniciativa Webphone
	if (idBtn === 'CTA_Hipoteca_Joven_1') {
		eventActionCtaHipotecaJoven = 'CTA evo_HI_Joven_HJ1';
	}
	else if (idBtn === 'CTA_Hipoteca_Joven_2') {
		eventActionCtaHipotecaJoven = 'CTA evo_HI_Joven_HJ2';
	}

	if (typeof dataLayer != 'undefined') {
		dataLayer.push({
			event: "CTA",
			eventCategory: "evobanco.com",
			eventAction: eventActionCtaHipotecaJoven,
			eventLabel: "Abre C2C"
		});
	}
}

function triggerDataLayerWithProduct(product){
	if(typeof dataLayer!='undefined'){
			dataLayer.push({
	            'event': 'form_sent',
	            'form' : product
			});
	}		
}


/****** Start Functions createJsCustomForm  ********/
function loadWphXMLDoc(phone, name,product) {
	
	if(!sendingForm){

		sendingForm = true;

	    var xmlhttp = new XMLHttpRequest();

	    xmlhttp.onreadystatechange = function() {
	        if (xmlhttp.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4
	           if (xmlhttp.status == 200) {
	               	response = JSON.parse(xmlhttp.responseText);
	               	//console.log(response);
	               	if(response.status=='ok'){
		               //document.getElementById('customWphform').style.display = 'none';						 
						setTimeout(function(){ 
							document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';               
						}, 3000);
						sendingForm = false;
						sendToDataLayerAnalytics(product);


	           		}
	           }
	           else if (xmlhttp.status == 400) {
	              	showErrorMgs('Opps!! algo ha ido mal.');	            					
	              	sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	           else {
	                showErrorMgs('Opps!! algo ha ido mal.');	               	
	                sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	        }
	    };

	    xmlhttp.open("GET", "https://webservice.webphone.net/evo/savelead/"+ phone+"/"+name+"/"+product, true);
	    xmlhttp.send();
	}
}

function loadWphXMLDocOutSchedule(phone, name,product, dia, hora) {
	
	if(!sendingForm){

		sendingForm = true;

	    var xmlhttp = new XMLHttpRequest();

	    xmlhttp.onreadystatechange = function() {
	        if (xmlhttp.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4
	           if (xmlhttp.status == 200) {
	               	response = JSON.parse(xmlhttp.responseText);
	               	//console.log(response);
	               	if(response.status=='ok'){
		               //document.getElementById('customWphform').style.display = 'none';						 
						setTimeout(function(){ 
							document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';               
						}, 3000);
						sendingForm = false;
						sendToDataLayerAnalytics(product);
	           		}
	           }
	           else if (xmlhttp.status == 400) {
	              	showErrorMgs('Opps!! algo ha ido mal.');	            					
	              	sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	           else {
	                showErrorMgs('Opps!! algo ha ido mal.');	               	
	                sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	        }
	    };

	    xmlhttp.open("GET", "https://webservice.webphone.net/evo/savelead/"+ phone+"/"+name+"/"+product+"/"+dia +" de " + hora, true);
	    xmlhttp.send();
	}
}

function loadWphXMLDocOutScheduleC2C(phone, name,product, fecha, hora, type) {
	
	if(!sendingForm){

		sendingForm = true;

	    var xmlhttp = new XMLHttpRequest();

	    xmlhttp.onreadystatechange = function() {
	        if (xmlhttp.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4
	           if (xmlhttp.status == 200) {
	               	response = JSON.parse(xmlhttp.responseText);
	               	//console.log(response);
	               	if(response.status=='ok'){
		               //document.getElementById('customWphform').style.display = 'none';	
	               	   //[2023-08-03] FBB añade comprobación si existe id wphmsg 
		               if(document.getElementById('wphmsg')){					 
							setTimeout(function(){ 
								document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';               
							}, 3000);
						}
						sendingForm = false;
						sendToDataLayerAnalytics(product, true);

	           		}
	           }
	           else if (xmlhttp.status == 400) {
	              	showErrorMgs('Opps!! algo ha ido mal.');	            					
	              	sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	           else {
	                showErrorMgs('Opps!! algo ha ido mal.');	               	
	                sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	        }
	    };

	    xmlhttp.open("GET", "https://webservice.webphone.net/evo/saveCall/"+ phone+"/"+name+"/"+product+"/"+fecha +" " + hora+"/"+type, true);
	    xmlhttp.send();
	}
}

function loadWphXMLDocMail(phone, name, email, product) {
	
	if(!sendingForm){

		sendingForm = true;

	    var xmlhttp = new XMLHttpRequest();

	    xmlhttp.onreadystatechange = function() {
	        if (xmlhttp.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4
	           if (xmlhttp.status == 200) {
	               	response = JSON.parse(xmlhttp.responseText);
	               	//console.log(response);
	               	if(response.status=='ok'){
		               //document.getElementById('customWphform').style.display = 'none';						 
						setTimeout(function(){ 
							document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';               
						}, 3000);
						sendingForm = false;
						sendToDataLayerAnalytics(product);

	           		}
	           }
	           else if (xmlhttp.status == 400) {
	              	showErrorMgs('Opps!! algo ha ido mal.');	            					
	              	sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	           else {
	                showErrorMgs('Opps!! algo ha ido mal.');	               	
	                sendingForm = false;
				    sendToDataLayerAnalytics(product, false);
	           }
	        }
	    };

	    xmlhttp.open("GET", "https://webservice.webphone.net/evo/saveleadmail/"+ phone+"/"+name+"/"+email+"/"+product, true);
	    xmlhttp.send();
	}
}

function showErrorMgs(txt){	
	document.getElementById('wphmsg').innerHTML=txt;
	document.getElementById('wphmsg').style.color = "red";		
	setTimeout(function(){ 		
		document.getElementById('cajaWphPhone').style.display = 'block';
		document.getElementById('cajaWphName').style.display = 'block';
		document.getElementById('myWphButtontoFormclick').style.display = 'inline-block';
		document.getElementById('cajaWphName').style.display = 'block';
		document.getElementById('formLegalWph').style.display = 'block';
		document.getElementById('labelWphLegal').style.display = 'block';	
		document.getElementById('wphmsg').innerHTML='Introduce de nuevo tus datos';
		document.getElementById('wphmsg').style.color = "black";
	}, 5000);
}


function showMgs(txt, field, type){

	document.getElementById('wphmsg').innerHTML=txt;
	/*if(!isMobile()) $('#errors').css('background-color', '#AFD9E7');		
	else{ $('#errors').css('color', '#F1F1F1'); $('#errors').css('position', 'relative');}*/
	if(field=='cajaWphName' || field=='cajaWphPhone' || field=='cajaWphEmail' || field=='datepicker_day' || field=='horaCitaContainer' || field=='cajaWphDNI' || field=='cajaWphConsulta'|| field=='cajaWphPlazas' ){
		document.getElementById('wphmsg').style.color = "red";
		document.getElementById(field+'-error').style.display = 'block';
		document.getElementById(field).style.border = "3px solid #FF001F";
		document.getElementById(field).style.backgroundColor  = "#EEEEEE";
		setTimeout(function(){ 
			document.getElementById(field+'-error').style.display = 'none';
			document.getElementById('wphmsg').innerHTML=(type != 'newsletter' && type != 'betaValues' && type != 'thinkids') ? 'D&eacute;janos tus datos y te llamamos.' : '';
			document.getElementById(field).style.border = "3px solid #000000";
			document.getElementById(field).style.backgroundColor  = "#FFFFFF";
			document.getElementById('wphmsg').style.color = "black";
		}, 7000);
	}else{
		if(field=='checklegalWph'){
			document.getElementById(field).style.border = "3px solid #FF001F";
			document.getElementById('wphmsg').style.color = "red";		
			setTimeout(function(){ 			
				document.getElementById('wphmsg').innerHTML=(type != 'newsletter' && type != 'betaValues' && type != 'thinkids') ? 'D&eacute;janos tus datos y te llamamos.' : '';
				document.getElementById('wphmsg').style.color = "black";
				document.getElementById(field).style.border = "3px solid #000";		
			}, 7000);
		}else{
			document.getElementById('wphmsg').style.color = "red";		
			setTimeout(function(){ 			
				document.getElementById('wphmsg').innerHTML=(type != 'newsletter' && type != 'betaValues' && type != 'thinkids') ? 'D&eacute;janos tus datos y te llamamos.' : '';
				document.getElementById('wphmsg').style.color = "black";
			}, 7000);
		}
	}
}

function saveLead(product) {
    try{ 
    	if(islegalWphChecked){		   
	 		var phoneNumberValue = document.getElementById('cajaWphPhone');	
	 		var nameValue = document.getElementById('cajaWphName');	
	 		if(!isOnSchedulecallcenter){
	 			var horaCitaValue = document.getElementById('horaCita');
	 			var datepicker_dayValue = document.getElementById('datepicker_day');
	 			if(datepicker_dayValue.value==''){
	 				showMgs('Indica el d&iacute;a que prefires que te llamemos.', 'datepicker_day');
	 				return;
	 			}
	 			if(horaCitaValue.value==''){
	 				showMgs('Indica la hora que prefires que te llamemos.', 'horaCitaContainer');
	 				return;
	 			}	 			
	 		}

			if(/^[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+$/.test(nameValue.value)){	
				//if(/^([a-záéíóú]{1}|[A-ZÁÉÍÓÚ]{1}[a-zñáéíóú\s]*)+$/.test(nameValue.value)){	
			//if(/[6789][0-9]{8}/.test(phoneNumberValue.value)){	
				if(/[6789][0-9]{8}/.test(phoneNumberValue.value)){
					document.getElementById('cajaWphPhone').style.display = 'none';
					document.getElementById('cajaWphName').style.display = 'none';
					document.getElementById('formLegalWph').style.display = 'none';
					document.getElementById('labelWphLegal').style.display = 'none';										
					document.getElementById('myWphButtontoFormclick').style.display = 'none';
					document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';  
					if(!isOnSchedulecallcenter){
						document.getElementById('outscheduleInputs').style.display = 'none';
						loadWphXMLDocOutSchedule(phoneNumberValue.value, nameValue.value, product, datepicker_dayValue.value, horaCitaValue.value);	
					}else{
						loadWphXMLDoc(phoneNumberValue.value, nameValue.value, product);	
					} 
				}else{
					//showMgs('Debes introducir tu nombre');	
					showMgs('Debes introducir un tel&eacute;fono v&aacute;lido', 'cajaWphPhone');			
				}
				
			}else{			
				//showMgs('Debes introducir un tel&eacute;fono v&aacute;lido');			
				showMgs('Debes introducir tu nombre', 'cajaWphName');
			}		
		}else{
			showMgs('Debes aceptar la pol&iacute;tica de privacidad', 'checklegalWph');
		}
    }catch(exception){
    	console.log(exception);  
        showMgs('Opps!! algo ha ido mal.','');
    } 
}

function validateEmail(email) {
    var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}

function saveLeadMail(product) {
    try{ 
    	if(islegalWphChecked){		   
	 		var phoneNumberValue = document.getElementById('cajaWphPhone');	
	 		var nameValue = document.getElementById('cajaWphName');	
	 		var emailValue = document.getElementById('cajaWphEmail');


			//if(/^[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+$/.test(nameValue.value)){				
			if(/^[a-zA-Z_áéíóúäëïöüâêîôûÂÊÎÔÛÁÉÍÓÚÄËÏÖÜñÑ\ \']+$/.test(nameValue.value)){
				//if(/^([a-záéíóú]{1}|[A-ZÁÉÍÓÚ]{1}[a-zñáéíóú\s]*)+$/.test(nameValue.value)){
			//if(/[6789][0-9]{8}/.test(phoneNumberValue.value)){	
				if(/[6789][0-9]{8}/.test(phoneNumberValue.value)){
					/*document.getElementById('cajaWphPhone').style.display = 'none';
					document.getElementById('cajaWphName').style.display = 'none';
					document.getElementById('formLegalWph').style.display = 'none';
					document.getElementById('labelWphLegal').style.display = 'none';
					document.getElementById('myWphButtontoFormclick').style.display = 'none';
					document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';  */
					if(validateEmail(emailValue.value)){
						document.getElementById('cajaWphPhone').style.display = 'none';
						document.getElementById('cajaWphName').style.display = 'none';
						document.getElementById('cajaWphEmail').style.display = 'none';
						document.getElementById('formLegalWph').style.display = 'none';
						document.getElementById('labelWphLegal').style.display = 'none';
						if (product == 'newsletter') {
							document.getElementById('myWphButtonNewsletter_subcribe').style.display = 'none';
							webserviceNewsletter(emailValue.value, phoneNumberValue.value, nameValue.value, product);
						}
						else {
							document.getElementById('myWphButtontoFormclick').style.display = 'none';
							document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';
							loadWphXMLDocMail(phoneNumberValue.value, nameValue.value,emailValue.value, product);
						}
					}else{
						//showMgs('Debes introducir tu nombre');	
						showMgs('Debes introducir un email v&aacute;lido', 'cajaWphEmail', product);
					}
					
				}else{
					//showMgs('Debes introducir tu nombre');	
					showMgs('Debes introducir un tel&eacute;fono v&aacute;lido', 'cajaWphPhone', product);
				}
				
			}else{			
				//showMgs('Debes introducir un tel&eacute;fono v&aacute;lido');			
				showMgs('Debes introducir tu nombre', 'cajaWphName', product);
			}		
		}else{
			showMgs('Debes aceptar la pol&iacute;tica de privacidad', 'checklegalWph', product);
		}
    }catch(exception){
        showMgs('Opps!! algo ha ido mal.','', product);
    } 
}

function validateWphDocument(value){

	var validChars = 'TRWAGMYFPDXBNJZSQVHLCKET';
	var nifRexp = /^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/i;
	var nieRexp = /^[XYZ]{1}[0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/i;
	var str = value.toString().toUpperCase();

	if (!nifRexp.test(str) && !nieRexp.test(str)) return false;

	var nie = str
		.replace(/^[X]/, '0')
		.replace(/^[Y]/, '1')
		.replace(/^[Z]/, '2');

	var letter = str.substr(-1);
	var charIndex = parseInt(nie.substr(0, 8)) % 23;

	if (validChars.charAt(charIndex) === letter) return true;

	return false;
}

function saveLeadMailBetaValues(product) {
	try{
		if(islegalWphChecked){
			//var phoneNumberValue = document.getElementById('cajaWphPhone');
			var nameValue = document.getElementById('cajaWphName');
			var dniValue = document.getElementById('cajaWphDNI');
			//var emailValue = document.getElementById('cajaWphEmail');

			//if(/^[a-zA-Z_áéíóúäëïöüâêîôûÂÊÎÔÛÁÉÍÓÚÄËÏÖÜñÑ\ \']+$/.test(nameValue.value)){
			if(/^[a-zA-Z_áéíóúäëïöüâêîôûÂÊÎÔÛÁÉÍÓÚÄËÏÖÜñÑ\ \']{1,53}(?: [a-zA-Z_áéíóúäëïöüâêîôûÂÊÎÔÛÁÉÍÓÚÄËÏÖÜñÑ \ \']{1,54})+$/.test(nameValue.value)){

				if(validateWphDocument(dniValue.value)){
					//document.getElementById('cajaWphPhone').style.display = 'none';
					document.getElementById('cajaWphName').style.display = 'none';
					document.getElementById('cajaWphDNI').style.display = 'none';
					//document.getElementById('cajaWphEmail').style.display = 'none';
					document.getElementById('formLegalWph').style.display = 'none';
					document.getElementById('labelWphLegal').style.display = 'none';
					if (product == 'betaValues') {
						document.getElementById('myWphButtonBetaValues_subcribe').style.display = 'none';
						webserviceBetaValues(nameValue.value, dniValue.value, product);
					}
				}else{
					showMgs('Debes introducir un DNI v&aacute;lido', 'cajaWphDNI', product);
				}

			}else{
				showMgs('Debes introducir tu nombre completo v&aacute;lido', 'cajaWphName', product);
			}
		}else{
			showMgs('Debes aceptar la pol&iacute;tica de privacidad', 'checklegalWph', product);
		}
	}catch(exception){
		showMgs('Opps!! algo ha ido mal.','', product);
	}
}

function saveLeadC2C(product) {
    try{ 
    	if(islegalWphChecked){		   
	 		var phoneNumberValue = document.getElementById('cajaWphPhone');	
	 		var nameValue = document.getElementById('cajaWphName');		 		
 			var horaCitaValue = document.getElementById('horaCita');
 			var datepicker_dayValue = document.getElementById('datepicker_day');
 			if(datepicker_dayValue.value==''){
 				showMgs('Indica el d&iacute;a que prefires que te llamemos.', 'datepicker_day');
 				return;
 			}

 			if(horaCitaValue.options[horaCitaValue.selectedIndex].text=='¿A qué hora?'){
 				showMgs('Indica la hora que prefires que te llamemos.', 'horaCitaContainer');
 				return;
 			}

			if(/^[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+$/.test(nameValue.value)){		
				if(/[6789][0-9]{8}/.test(phoneNumberValue.value)){
					document.getElementById('cajaWphPhone').style.display = 'none';
					document.getElementById('cajaWphName').style.display = 'none';
					document.getElementById('formLegalWph').style.display = 'none';
					document.getElementById('labelWphLegal').style.display = 'none';										
					document.getElementById('myWphButtontoFormclickProg').style.display = 'none';
					if (document.getElementById('myWphButtontoFormclick')) {
						document.getElementById('myWphButtontoFormclick').style.display = 'none';
					}
					document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';  
					//if(!isOnSchedulecallcenter){
					document.getElementById('outscheduleInputs').style.display = 'none';
					loadWphXMLDocOutScheduleC2C(phoneNumberValue.value, nameValue.value, product, datepicker_dayValue.value, horaCitaValue.options[horaCitaValue.selectedIndex].text, 'outschedule');	
					//}else{
					//	loadWphXMLDoc(phoneNumberValue.value, nameValue.value, product);	
					//} 
				}else{
					//showMgs('Debes introducir tu nombre');	
					showMgs('Debes introducir un tel&eacute;fono v&aacute;lido', 'cajaWphPhone');			
				}
				
			}else{			
				//showMgs('Debes introducir un tel&eacute;fono v&aacute;lido');			
				showMgs('Debes introducir tu nombre', 'cajaWphName');
			}		
		}else{
			showMgs('Debes aceptar la pol&iacute;tica de privacidad', 'checklegalWph');
		}
    }catch(exception){
    	console.log(exception);  
        showMgs('Opps!! algo ha ido mal.','');
    } 
}


function saveLeadC2CNow(product) {
    try{ 
    	if(islegalWphChecked){		   
	 		var phoneNumberValue = document.getElementById('cajaWphPhone');	
	 		var nameValue = document.getElementById('cajaWphName');	

			if(/^[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+$/.test(nameValue.value)){	
	
				if(/[6789][0-9]{8}/.test(phoneNumberValue.value)){
					document.getElementById('cajaWphPhone').style.display = 'none';
					document.getElementById('cajaWphName').style.display = 'none';
					document.getElementById('formLegalWph').style.display = 'none';
					document.getElementById('labelWphLegal').style.display = 'none';										
					document.getElementById('myWphButtontoFormclick').style.display = 'none';
					if (document.getElementById('myWphButtontoFormclickProg')) {
						document.getElementById('myWphButtontoFormclickProg').style.display = 'none';
					}
					document.getElementById('wphmsg').innerHTML='<strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong>';  
					//if(!isOnSchedulecallcenter){
					if (document.getElementById('outscheduleInputs')) {
						document.getElementById('outscheduleInputs').style.display = 'none';
					}
					loadWphXMLDocOutScheduleC2C(phoneNumberValue.value, nameValue.value, product, new Date().getDate()+"-"+ (new Date().getMonth()+1) +"-"+ new Date().getFullYear(), getCurrentTimeWph(), 'now');	
					//}else{
					//	loadWphXMLDoc(phoneNumberValue.value, nameValue.value, product);	
					//} 
				}else{
					//showMgs('Debes introducir tu nombre');	
					showMgs('Debes introducir un tel&eacute;fono v&aacute;lido', 'cajaWphPhone');			
				}
				
			}else{			
				//showMgs('Debes introducir un tel&eacute;fono v&aacute;lido');			
				showMgs('Debes introducir tu nombre', 'cajaWphName');
			}		
		}else{
			showMgs('Debes aceptar la pol&iacute;tica de privacidad', 'checklegalWph');
		}
    }catch(exception){
    	console.log(exception);  
        showMgs('Opps!! algo ha ido mal.','');
    } 
}

function setBackColorWphLegal(field, color){
	document.getElementById(field).style.backgroundColor  = "#"+color;
}

function clickOnWphlegal(){ 	 
	if(!islegalWphChecked){
		setBackColorWphLegal('checklegalWph', 'f0157a');
		islegalWphChecked=true;		
	}else{
		setBackColorWphLegal('checklegalWph', 'ffffff');
		islegalWphChecked=false;	
	}
	//return islegalWphChecked;
}

function fadeInWph(type) {
	 if(type=='none'){	
		document.getElementById('condiciones').style.display = type;
		document.getElementById('myWphButtontoFormclick').style.display = 'none';
	 }else{
	 	el = document.getElementById('condiciones');
	 	document.getElementById('myWphButtontoFormclick').style.display = 'inline-block';
		el.style.opacity = 0;
		var tick = function() {
			el.style.opacity = +el.style.opacity + 0.01;
			if (+el.style.opacity < 1) {
			  (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16)
			}
		};
		tick();
	 }	
}

function showLayerLegal(type){
	if(type=='block'){	
		document.getElementById('condiciones').style.display = type;
		if (document.getElementById('myWphButtontoFormclick')) {
            document.getElementById('myWphButtontoFormclick').style.display = 'none';
        }
	}else{
		document.getElementById('condiciones').style.display = type;
		if (document.getElementById('myWphButtontoFormclick')) {
			document.getElementById('myWphButtontoFormclick').style.display = 'inline-block';
        }

	}
}

function showLayerLegalC2C(type){
	if(type=='block'){	
		document.getElementById('condiciones').style.display = type;
		if (document.getElementById('myWphButtontoFormclick')) {
            document.getElementById('myWphButtontoFormclick').style.display = 'none';
        }
        if (document.getElementById('myWphButtontoFormclickProg')) {
            document.getElementById('myWphButtontoFormclickProg').style.display = 'none';
        }
	}else{
		document.getElementById('condiciones').style.display = type;
		if (document.getElementById('myWphButtontoFormclick')) {
			document.getElementById('myWphButtontoFormclick').style.display = 'block';
        }
        if (document.getElementById('myWphButtontoFormclickProg')) {
			document.getElementById('myWphButtontoFormclickProg').style.display = 'block';
        }

	}
}

function setWphName(){
	if(typeof getParamScript('name')!='undefined'){
		return getParamScript('name');
	}else{
		return "";
	}
}


function setWphPhone(){
	if(typeof getParamScript('phone')!='undefined'){
		return getParamScript('phone');
	}else{
		return "";
	}
}

function checkC2CIsOnSchedule(){
	date 	= new Date();
	year 	= date.getFullYear();	

	//Returns the month (from 0-11)
	month 	= date.getMonth();

	//Returns the day of week (from 1-7)
	day 	= date.getDay();

	//Returns the hour (from 0-23)
	hour    = date.getHours();

	//Returns the minutes (from 0-59)
	minutes = date.getMinutes();
	return ((day ==1 || day==2 || day==3 || day==4 || day==5) && (hour<22 && hour>7));		
}


function isOnSchedulecallcenterFun(){
	date 	= new Date();
	year 	= date.getFullYear();	

	//Returns the month (from 0-11)
	month 	= date.getMonth();

	//Returns the day of week (from 1-7)
	day 	= date.getDay();

	//Returns the hour (from 0-23)
	hour    = date.getHours();

	//Returns the minutes (from 0-59)
	minutes = date.getMinutes();

	if((day ==1 || day==2 || day==3 || day==4 || day==5) && (hour>21 || hour<8)){
	//if(true){
		isOnSchedulecallcenter = false; 
	}	
	

	if(!isOnSchedulecallcenter || isPresence){	


		template ='<p style="margin-bottom:8px;margin-top: 30px;"><strong class="wphmsg" id="wphmsg">Nuestro horario es de L-V 8:00 - 22:00h.<br>D&eacute;janos tus datos y te llamamos en la fecha indicada.</strong></p>';
		template +='<div class="form_row form_row_2" id="outscheduleInputs" style="padding-bottom: 10px;">';
		template +='	<div class="form_text_field form_success">';
		//template +='		<label for="datepicker_day" class="form_label">Día*</label>';
		template +='	<input id="datepicker_day" name="" class="datepicker" type="text" placeholder="&#xBF;Qu&eacute; d&iacute;a?" aria-required="true" aria-invalid="false">';
		template +='	<label id="datepicker_day-error" class="form_error" for="datepicker_day" style="display: none;"></label></div>';
		template +='	<div class="form_select form_success">';
		//template +='		<label for="horaCita" class="form_label">Hora*</label>';
		template +='		<span class="select custom-form_hour responsive_select" >';
		template +='			<span class="select webkit webkit64 not_msie custom-form_horaCita responsive_select"><span class="select_content"><span class="select_button">';
		template +='			<span class="select_button_icon"></span></span>';
		template +='			<span class="select_label" id="horaCitaContainer"><span id="WphSelectHourText">&#xBF;A qu&eacute; hora?</span></span></span><select onchange="setvalOnWphSelectHourText(this);"  id="horaCita" name="horaCita" required="" aria-required="true" aria-invalid="false">';

		template +='			<option value="">&#xBF;A qu&eacute; hora?</option>';
		template +='			<option value="08:00 - 08:30">08:00</option>';
		template +='            <option value="08:30 - 09:00">08:30</option>';
		template +='            <option value="09:00 - 09:30">09:00</option>';
		template +='            <option value="09:30 - 10:00">09:30</option>';
		template +='			<option value="10:00 - 10:30">10:00</option><option value="10:30 - 11:00">10:30</option>';
		template +='			<option value="11:00 - 11:30">11:00</option><option value="11:30 - 12:00">11:30</option>';
		template +='			<option value="12:00 - 12:30">12:00</option><option value="12:30 - 13:00">12:30</option>';
		template +='			<option value="13:00 - 13:30">13:00</option><option value="13:30 - 14:00">13:30</option>';
		template +='			<option value="14:00 - 14:30">14:00</option><option value="14:30 - 15:00">14:30</option>';
		template +='			<option value="15:00 - 15:30">15:00</option><option value="15:30 - 16:00">15:30</option>';
		template +='			<option value="16:00 - 16:30">16:00</option><option value="16:30 - 17:00">16:30</option>';
		template +='			<option value="17:00 - 17:30">17:00</option><option value="17:30 - 18:00">17:30</option>';
		template +='			<option value="18:00 - 18:30">18:00</option><option value="18:30 - 19:00">18:30</option>';
		template +='			<option value="19:00 - 19:30">19:00</option><option value="19:30 - 20:00">19:30</option>';
		template +='			<option value="20:00 - 20:30">20:00</option><option value="20:30 - 21:00">20:30</option>';
		template +='			<option value="20:30 - 21:00">21:00</option><option value="21:00 - 21:30">21:30</option></select></span>';		
		//template +='			<option value="19:00 - 19:30">19:00</option></select></span>';
		template +='		</span>';
		template +='	<label id="horaCitaContainer-error" class="form_error" for="horaCita" style="display: none;"></label></div>';
		template +='</div>';
		return template;
	}else{
		return '<p style="margin-bottom:8px;margin-top: 30px;"><strong class="wphmsg" id="wphmsg">D&eacute;janos tu nombre y tel&eacute;fono y te llamamos.</strong></p>';
	}
}

function isOnSchedulecallcenterFunCoinc(){
	date 	= new Date();
	year 	= date.getFullYear();	

	//Returns the month (from 0-11)
	month 	= date.getMonth();

	//Returns the day of week (from 1-7)
	day 	= date.getDay();

	//Returns the hour (from 0-23)
	hour    = date.getHours();

	//Returns the minutes (from 0-59)
	minutes = date.getMinutes();

	if((day ==1 || day==2 || day==3 || day==4 || day==5) && (hour>21 || hour<8)){
	//if(true){
		isOnSchedulecallcenter = false; 
	}	
	

	if(!isOnSchedulecallcenter || isPresence){	


		template ='<p style="margin-bottom:8px;margin-top: 30px;"><strong style="font-size: 16px;font-weight:bold;" class="wphmsg" id="wphmsg">Nuestro horario es de L-V 8:00 - 22:00h.<br>D&eacute;janos tus datos y te llamamos en la fecha indicada.</strong></p>';
		template +='<div class="form_row form_row_2" id="outscheduleInputs" style="padding-bottom: 10px;">';
		template +='	<div class="form_text_field form_success">';
		//template +='		<label for="datepicker_day" class="form_label">Día*</label>';
		template +='	<input id="datepicker_day" name="" class="datepicker" type="text" placeholder="&#xBF;Qu&eacute; d&iacute;a?" aria-required="true" aria-invalid="false">';
		template +='	<label id="datepicker_day-error" class="form_error" for="datepicker_day" style="display: none;"></label></div>';
		template +='	<div class="form_select form_success">';
		//template +='		<label for="horaCita" class="form_label">Hora*</label>';
		template +='		<span class="select custom-form_hour responsive_select" >';
		template +='			<span class="select webkit webkit64 not_msie custom-form_horaCita responsive_select"><span class="select_content"><span class="select_button">';
		template +='			<span class="select_button_icon"></span></span>';
		template +='			<span class="select_label" id="horaCitaContainer"><span style="font-weight: bold;" id="WphSelectHourText">&#xBF;A qu&eacute; hora?</span></span></span><select onchange="setvalOnWphSelectHourText(this);"  id="horaCita" name="horaCita" required="" aria-required="true" aria-invalid="false">';

		template +='			<option value="">&#xBF;A qu&eacute; hora?</option>';
		template +='			<option value="08:00 - 08:30">08:00</option>';
		template +='            <option value="08:30 - 09:00">08:30</option>';
		template +='            <option value="09:00 - 09:30">09:00</option>';
		template +='            <option value="09:30 - 10:00">09:30</option>';
		template +='			<option value="10:00 - 10:30">10:00</option><option value="10:30 - 11:00">10:30</option>';
		template +='			<option value="11:00 - 11:30">11:00</option><option value="11:30 - 12:00">11:30</option>';
		template +='			<option value="12:00 - 12:30">12:00</option><option value="12:30 - 13:00">12:30</option>';
		template +='			<option value="13:00 - 13:30">13:00</option><option value="13:30 - 14:00">13:30</option>';
		template +='			<option value="14:00 - 14:30">14:00</option><option value="14:30 - 15:00">14:30</option>';
		template +='			<option value="15:00 - 15:30">15:00</option><option value="15:30 - 16:00">15:30</option>';
		template +='			<option value="16:00 - 16:30">16:00</option><option value="16:30 - 17:00">16:30</option>';
		template +='			<option value="17:00 - 17:30">17:00</option><option value="17:30 - 18:00">17:30</option>';
		template +='			<option value="18:00 - 18:30">18:00</option><option value="18:30 - 19:00">18:30</option>';
		template +='			<option value="19:00 - 19:30">19:00</option><option value="19:30 - 20:00">19:30</option>';
		template +='			<option value="20:00 - 20:30">20:00</option><option value="20:30 - 21:00">20:30</option>';
		template +='			<option value="20:30 - 21:00">21:00</option><option value="21:00 - 21:30">21:30</option></select></span>';		
		//template +='			<option value="19:00 - 19:30">19:00</option></select></span>';
		template +='		</span>';
		template +='	<label id="horaCitaContainer-error" class="form_error" for="horaCita" style="display: none;"></label></div>';
		template +='</div>';
		return template;
	}else{
		return '<p style="margin-bottom:8px;margin-top: 30px;"><strong class="wphmsg" id="wphmsg">D&eacute;janos tu nombre y tel&eacute;fono y te llamamos.</strong></p>';
	}
}

function setvalOnWphSelectHourText(element) {
		//console.log(element.options[element.selectedIndex].value);
		document.getElementById('WphSelectHourText').innerHTML = element.options[element.selectedIndex].text;
};

function setvalOnWphSelectDayText(element) {
		//console.log(element.options[element.selectedIndex].value);
		document.getElementById('WphSelectDayText').innerHTML = element.options[element.selectedIndex].text;
};


function addZero(i) {
    if (i < 10) {
        i = "0" + i;
    }
    return i;
}

function getCurrentTimeWph() {
    var d = new Date();    
    var h = addZero(d.getHours());
    var m = addZero(d.getMinutes());
    var s = addZero(d.getSeconds());
    return h + ":" + m;
}

function availableDaysWph(a) {
    var today = new Date();	
	var dd = today.getDate();
	var mm = today.getMonth()+1; //January is 0!

	var yyyy = today.getFullYear();
	if(dd<10){
	    dd=''+dd;
	} 
	if(mm<10){
	    mm=''+mm;
	} 
	var dmy2 = dd+'/'+mm+'/'+yyyy ;
	

	dmy2 = a.getDate() + "/" + (a.getMonth() + 1) + "/" + a.getFullYear();
	//console.log(dmy2);
    if ($.inArray(dmy2, workingDateArrayNewFormat) != -1) {
        return [true, "", "Disponible"]
    } else {
        return [false, "", "No disponible"]
    }
}

function createWphCalendar() {
    $("#datepicker_day").datepicker({
        minDate: 0,
        dateFormat: "yy-mm-dd",
        beforeShowDay: available
    })
}

/**
 * this will return an array containing all the
 * dates between start date and an end date
 */
var getDateArray = function(start, end) {
    var arr = new Array();
    var dt = new Date(start);
    while (dt <= end) {
        arr.push((new Date(dt)).toString().substring(0,15)); //save only the Day MMM DD YYYY part
        dt.setDate(dt.getDate() + 1);
    }
    return arr;
}

/**
 * this will prepare a date array
 */
var prepareDateArray = function(dtArr) {
    var arr = new Array();
    for (var i = 0; i < dtArr.length; i++) {
        arr.push((new Date(dtArr[i])).toString().substring(0,15)); //save only the Day MMM DD YYYY part
    }
    return arr;
}

/**
 * this will return an array consisting of the
 * working dates
 */
var getWorkingDateArray = function(dates, hoildayDates, workingWeekendDates) {
    
    // remove holidays
    var arr = dates.filter(function(dt){
        return holidaysArray.indexOf(dt) < 0;
    });

    // remove weekend dates that are not working dates
    var result = arr.filter(function(dt){
        if (dt.indexOf("Sat") > -1 || dt.indexOf("Sun") > -1) {
            if (workingWeekendDates.indexOf(dt) > -1) {
                return dt;
            }
        }
        else {
            return dt;
        }
    });
    
    return result;

}

var getWorkingDateArrayNewFormat = function(dates){
	var newArray = [];
		dates.forEach(function(day) {	  
	  	newArray.push(formatDate(day));
	});

	return newArray;
}


function formatDate(date) {
    var d = new Date(date),
    month = '' + (d.getMonth() + 1),
    day = '' + d.getDate(),
    year = d.getFullYear();

    if (month.length < 2) month = '' + month;
    if (day.length < 2) day = '' + day;

    return [day, month, year].join('/');
}

function addDays() {
  	var today = new Date();
	//var tomorrow = new Date();
	//tomorrow= new Date(tomorrow.setDate(today.getDate()+90));

	var tomorrow = new Date();
	tomorrow=  new Date(tomorrow.setDate(tomorrow.getDate() + 90));
	var dd = tomorrow.getDate();
	var mm = tomorrow.getMonth()+1; //January is 0!

	var yyyy = tomorrow.getFullYear();
	if(dd<10){
	    dd=''+dd;
	} 
	if(mm<10){
	    mm=''+mm;
	} 
	//tomorrow = yyyy+'-'+mm+'-'+ dd;
    return new Date(yyyy, mm, dd);
}

// start and end dates
var startDate = new Date(new Date().getFullYear(), (new Date().getMonth()) , new Date().getDate());
var endDate = addDays();

/**
 * holidays and working weekends
 *
 * if not applicable then set it as an empty array
 * example: if no offical holidays then set
 * officalHolidays = []
 * similarly, if no working weekends then set
 * workingWeekends = []
 */
var officalHolidays = [

	"2020-01-01",
	"2020-01-06", 
	"2020-03-30", 
	"2020-05-01",
	"2020-08-15", 
	"2020-10-12",
	"2020-11-1",
	"2020-12-6",
	"2020-12-8",
	"2020-12-25",

	"2021-01-01",
	"2021-01-06", 
	"2021-03-30", 
	"2021-05-01",
	"2021-08-15", 
	"2021-10-12",
	"2021-11-1",
	"2021-12-6",
	"2021-12-8",
	"2021-12-25",
]; 


var workingWeekends = [];

// compute date array between start and end dates
var dateArray = getDateArray(startDate, endDate);

// prepare the holidays array
var holidaysArray = prepareDateArray(officalHolidays);

// prepare the working weekends array
var workingWeekendsArray = prepareDateArray(workingWeekends);

// get the working days array
var workingDateArray = getWorkingDateArray(dateArray, holidaysArray, workingWeekendsArray);

var workingDateArrayNewFormat = getWorkingDateArrayNewFormat(workingDateArray);

function initDatePicker(disableToday){
	var disableToday = (typeof disableToday != 'undefined' && disableToday) ? '+1' : 0;
	try{
		//console.log('IDP');
		$( "#datepicker_day" ).datepicker({
		    showAnim: "slideDown",
		    //dateFormat: 'dd-mm-yy',//check change
		    minDate: disableToday,
	        dateFormat: "yy-mm-dd",
	        beforeShowDay: availableDaysWph,
		    //beforeShowDay: availableDaysWph// workingDateArrayNewFormat
		    //beforeShow : function(){ console.log('open'); $("#datepicker_day").addClass('onShow'); },
		    //onClose: function(){ console.log('close'); $("#datepicker_day").removeClass('onShow'); }
		});
	}catch(exception){
    	//console.log(exception); 
    	//console.log("Error init datepicker", exception);
    	setTimeout(function(){ 
					initDatePicker(); 
		}, 2000); 
        //showMgs('Opps!! algo ha ido mal.','');
    } 
}

function createJsCustomForm(product) {
	//Find module with button "LA QUIERO AHORA"
	if(document.getElementsByClassName('m_infobox').length>0){		
		var m_infobox =  document.getElementsByClassName('m_infobox')[0];
		if(m_infobox.getElementsByClassName('m_infobox_content').length>0){
			var m_infobox_content =  document.getElementsByClassName('m_infobox_content')[0];
			if(m_infobox_content.getElementsByClassName('m_infobox_text').length>0){
				var m_infobox_text =  document.getElementsByClassName('m_infobox_text')[0];
				m_infobox_text.setAttribute('id','myWphContentForm');
				
				var template='<div class="form_text_field form_success" id="customWphform">';
				//template+='<p class="wphmsg" id="wphmsg" style="margin-bottom:10px;">D&eacute;janos tu tel&eacute;fono y te llamamos</p>';
				//m_databox_heading
				template+='<p style="margin-bottom:8px;margin-top: 30px;"><strong class="wphmsg" id="wphmsg">D&eacute;janos tu nombre y tel&eacute;fono y te llamamos.</strong></p>';

				//template += isOnSchedulecallcenterFun();

				//template+='<label lang="en" class="form_label visuallyhidden" for="cajaWphPhone">Introduce tu tel&eacute;fono</label>';
				
				//template += isOnSchedulecallcenterFun();

				template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';				
				template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
				//template+='<label lang="en" class="form_label visuallyhidden" for="cajaWphPhone">Introduce tu tel&eacute;fono</label>';
				template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
				template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';
					
				template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:5px;"><div class="form_row form_row_auto" >';
				template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
				//template+='<label for="hi" class="form_label form_label_inline" style="padding-left: 4px;color:#000; float: right;width:90%;cursor:pointer;"><p id="labelWphLegal"><strong><a href="https://www.evobanco.com/aviso-legal/" title="He le&iacute;do y acepto la pol&iacute;tica de privacidad" target="_blank">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label></div>';
				template+='<label for="hi" class="form_label form_label_inline" style="padding-left: 4px;color:#000; float: right;width:90%;cursor:pointer;"><p id="labelWphLegal" onclicK="showLayerLegal(\'block\');"><strong>He le&iacute;do y acepto la pol&iacute;tica de privacidad</strong></p></label></div>';
				template+='</div></form>';

				/*if(!isOnSchedulecallcenter) condicionesHeight='265px';
				else condicionesHeight='225px';*/


				template+='</div>';
				template+='<div id="condiciones" onclicK="showLayerLegal(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
				//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';				
				template+= configTrafficEvoSiteDefault.defaultlegal;

				if(document.getElementById("myWphContentForm").querySelectorAll("p").length>0 && 
					typeof document.getElementById("myWphContentForm").querySelectorAll("p")[3]!='undefined'){
					
					myWphContentFormlength = document.getElementById("myWphContentForm").querySelectorAll("p").length;
					
					document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-2].innerHTML = template;
					/*document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-3].style.display = 'none';
					document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-4].style.display = 'none'; */
					document.getElementById("checklegalWph").style.marginTop = '5px';
					document.getElementById("formLegalWph").style.paddingLeft = '0px';
					//Existe botón "LA QUIERO AHORA"
					if(m_infobox_text.getElementsByClassName('m_btn').length>0){	
						var m_btn = m_infobox_text.getElementsByClassName('m_btn')[0];
						m_btn.setAttribute('id','myWphButtontoFormclick');
						document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLead("'+product+'");');
						document.getElementById('myWphButtontoFormclick').style.display = 'inline-block';
						//document.getElementById("myWphButtontoclick").onclick = submitChatButton();
					}
					
					
				}else{

					if(document.getElementById("myWphContentForm").querySelectorAll("p").length>0 && 
						typeof document.getElementById("myWphContentForm").querySelectorAll("p")[2]!='undefined'){
						
						myWphContentFormlength = document.getElementById("myWphContentForm").querySelectorAll("p").length;
						
						document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-3].innerHTML = template;
						/*document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-3].style.display = 'none';
						document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-4].style.display = 'none'; */
						document.getElementById("checklegalWph").style.marginTop = '5px';
						document.getElementById("formLegalWph").style.paddingLeft = '0px';
						//Existe botón "LA QUIERO AHORA"
						if(m_infobox_text.getElementsByClassName('m_btn').length>0){	
							var m_btn = m_infobox_text.getElementsByClassName('m_btn')[0];
							m_btn.setAttribute('id','myWphButtontoFormclick');
							document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLead("'+product+'");');
							document.getElementById('myWphButtontoFormclick').style.display = 'inline-block';
							//document.getElementById("myWphButtontoclick").onclick = submitChatButton();
						}
						
						
					}
				}

				/*if(!isOnSchedulecallcenter){
					initDatePicker();
				}*/
			}
		}		
	}
}
/****** Fin Functions createJsCustomForm  ********/


/****** Fin Functions createJsCustomModalForms  ********/

var form_wph_modal = null;
var form_wph_modal_closeButton = null;
var form_wph_modal_product = '';

function createJsCustomModalForms(product){

	

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")

    var  template='<span class="form-wph-modal-close-button" title="Cerrar">&times;</span>';
    template+='<div class="form_text_field form_success" id="customWphform">';
	template+='';

	//console.log(isOnSchedulecallcenterFun());
	//console.log(isOnSchedulecallcenter);
	template += isOnSchedulecallcenterFun();

	template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';				
	template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
	template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
	template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';					
	template+='<label for="hi" class="form_label form_label_inline" title="Ver pol&iacute;ticas de privacidad" style="cursor:pointer;padding-bottom: 10px;padding-top: 12px; color:#000; float: right;width:88%;"><p id="labelWphLegal" onclicK="showLayerLegal(\'block\');">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label>';
	template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:20px;padding-left: 0px;"><div class="form_row form_row_auto" >';
	template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
	template+='</div>';
	template+='</div></form>';


	
	if(product=='Contratar Hipoteca web' || product=='Fondo Inteligente' || product=='Fondos de inversion'){
		template+='<p><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display: inline-block;">LL&Aacute;MAME</a></p></div>';
	}else{
		template+='<p><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display: inline-block;">LA QUIERO AHORA</a></p></div>';
	}

	template+='<div id="condiciones" onclicK="showLayerLegal(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
	//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';				
	template+= configTrafficEvoSiteDefault.defaultlegal;
	template+='</div>';	
   

    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");
	
	if(!isOnSchedulecallcenter){
		innerDiv.setAttribute("class", "form-wph-modal-content outschedule");			
	}
	else{
		innerDiv.setAttribute("class", "form-wph-modal-content");			
	}		

	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLead("'+product+'");');

	//form_wph_modal_container = document.querySelector(".form-wph-modal-container");	
	form_wph_modal = document.querySelector(".form-wph-modal");	
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button");

	form_wph_modal_closeButton.addEventListener("click", toggleModal);
	window.addEventListener("click", windowOnClick);

	if(!isOnSchedulecallcenter){
		initDatePicker();
	}

	//console.log("createJsCustomModalForms");


}

function createModalForms(str, type, displayForm){

	

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")

	
	
	var  template='<div class="form_text_field form_success" style="text-align:center;" id="customWphform" >';
	

    	
	template += '<span>'+str+'</span>';
	template +='</div>';
	template +='<span style="top: 15px;" class="form-wph-modal-close-button" title="Cerrar">&times;</span>';



    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");


	
	if(!isOnSchedulecallcenter){
		innerDiv.setAttribute("class", "form-wph-modal-content outschedule");			
	}
	else{
		innerDiv.setAttribute("class", "form-wph-modal-content");	
			
	}		

	if(type =='custom'){
		innerDiv.style.width = "auto";	
		if(isMobile()){
			innerDiv.style.width = "250px";
		}
	}


	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	if(typeof displayForm != 'undefined' && displayForm == false){
		document.getElementById('form-wph-modal').style.display="none";
	}	

	//document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLead("'+product+'");');

	//form_wph_modal_container = document.querySelector(".form-wph-modal-container");	
	form_wph_modal = document.querySelector(".form-wph-modal");	
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button ");

	form_wph_modal_closeButton.addEventListener("click", toggleModal);
	window.addEventListener("click", windowOnClick);

	

	//console.log("createJsCustomModalForms");


}


function createModalFormsText(str, type, displayForm){

	

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")

	
	
	var  template='<div class="form_text_field form_success" style="text-align:center;" id="customWphform" >';
	

    	
	template += '<span>'+str+'</span>';
	template +='</div>';
	template +='<span style="top: 15px;" class="form-wph-modal-close-button" title="Cerrar">&times;</span>';



    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");


	
	if(!isOnSchedulecallcenter){
		innerDiv.setAttribute("class", "form-wph-modal-content outschedule");			
	}
	else{
		innerDiv.setAttribute("class", "form-wph-modal-content");	
			
	}		

	if(type =='inactivity'){
		/*innerDiv.style.width = "auto";	
		if(isMobile()){
			innerDiv.style.width = "250px";
		}*/
	}


	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	if(typeof displayForm != 'undefined' && displayForm == false){
		document.getElementById('form-wph-modal').style.display="none";
	}	

	//document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLead("'+product+'");');

	//form_wph_modal_container = document.querySelector(".form-wph-modal-container");	
	form_wph_modal = document.querySelector(".form-wph-modal");	
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button");
	form_wph_modal_closeButton.classList.add('inactivity');

	form_wph_modal_closeButton.addEventListener("click", closeModalInactivitySimulador);
	window.addEventListener("click", windowOnClick);

	

	//console.log("createJsCustomModalForms");


}


function createModalFormsCustomCallback(str, type, displayForm, btnClosefunction){

	

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")
	var  template='<div class="form_text_field form_success" style="text-align:center;" id="customWphform" >';
   	
	template += '<span>'+str+'</span>';
	template +='</div>';
	template +='<span style="top: 15px;" class="form-wph-modal-close-button" title="Cerrar">&times;</span>';

    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");

	innerDiv.setAttribute("class", "form-wph-modal-content");			


	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	if(typeof displayForm != 'undefined' && displayForm == false){
		document.getElementById('form-wph-modal').style.display="none";
	}	

	//document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLead("'+product+'");');

	//form_wph_modal_container = document.querySelector(".form-wph-modal-container");	
	form_wph_modal = document.querySelector(".form-wph-modal");	
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button");
	form_wph_modal_closeButton.classList.add('inactivity');

	if(typeof btnClosefunction!='undefined' && btnClosefunction){
		//TODO
		form_wph_modal_closeButton.addEventListener("click", closeModalLoading);
	}else{
		form_wph_modal_closeButton.addEventListener("click", closeModalScoringKO);				
	}

	window.addEventListener("click", windowOnClick);

	if (!isMobile() && !isTablet()) {
		setTimeout(function(){
			sendEventToParent('scrollToTopResultCustomModal');
		}, 1200);
	}

}

function createJsCustomModalFormsC2CBroker_NODAYHOUR(product_name, id_Product){


	var  template='<span class="form-wph-modal-close-button" title="Cerrar">&times;</span>';
	template+='<div class="form_text_field form_success" id="customWphform">';
	template+='';
	 
	//template += isOnSchedulecallcenterFun();
	
	//[FBB 2022-09-14] Añadimos comprobación de horario con nueva función checkC2CIsOnSchedule() solo para cambiar textos
	textSchedule = '';
	if(!checkC2CIsOnSchedule()){
		textSchedule = 'Nuestro horario es de L-V 8:00 - 22:00h.<br>'; 
	}

	template += '<p style="margin-bottom:8px;margin-top: 30px;"><strong className="wphmsg" id="wphmsg">' + textSchedule + 'D&eacute;janos tu nombre y tel&eacute;fono y te llamamos.</strong></p>';

	template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';
	template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
	template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
	template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';
	template+='<label for="hi" class="form_label form_label_inline" title="Ver pol&iacute;ticas de privacidad" style="cursor:pointer;padding-bottom: 10px;padding-top: 12px; color:#000; float: right;width:88%;"><p id="labelWphLegal" onclicK="showLayerLegal(\'block\');">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label>';
	template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:20px;padding-left: 0px;"><div class="form_row form_row_auto" >';
	template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
	template+='</div>';
	template+='</div></form>';


	buttonStyle ='block';
	

	//if(isOnSchedulecallcenter){
	//[FBB 2022-09-14] Añadimos comprobación de horario con nueva función checkC2CIsOnSchedule() solo para cambiar textos
	if(checkC2CIsOnSchedule()){
		template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display:'+buttonStyle+';">LLAMADME</a><p>';
		//template+='<p style="margin-top:10px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display:'+buttonStyle+';">LLAMAR EN OTRO MOMENTO</a></p>';
	}else{
		//template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display: '+buttonStyle+';">SOLICITAR LLAMADA</a></p>';
		template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display:'+buttonStyle+';">SOLICITAR LLAMADA</a><p>';
	}

	template+='</div>';

	template+='<div id="condiciones" onclicK="showLayerLegalC2C(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
	//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';
	//template+='<p>De conformidad con lo establecido en el Reglamento 679/2016 General de Protección de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</p><p>(i) Los datos de carácter personal, incluida la dirección de correo electrónico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), serán incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, así como de los que puedan generarse por causa de la correspondiente relación que en su caso conciertes con nosotros.</p><p>Mediante el envío de cualquiera de los formularios que figuren en el PORTAL, prestarás tu inequívoco consentimiento al régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico que se describa en el aviso sobre dicho régimen habilitado en el formulario correspondiente.</p><p><span>&nbsp;</span>(ii) Utilizaremos la información personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, así como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefonía, electrónica, seguros, moda o de consumo, entretenimiento, servicios de consultoría y asesoramiento.</p><p>Además, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electrónico u otro medio de comunicación electrónica equivalente, informaciones publicitarias o promocionales, de carácter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios que comercialice.</p><p>En los avisos sobre régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico serás adecuadamente informado respecto del carácter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</p><p>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicación de Banca Móvil debes conocer que realizamos otros tratamientos, como el uso del micrófono, el acceso a tu galería multimedia, los contactos de tu agenda, la geolocalización para indicarte tus cajeros más cercanos o el comparador de productos, y te pediremos un consentimiento específico para ello.</p><p>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en función de la relación que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservarán durante 1 año, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitación de solicitudes y evitar la duplicación de formalidades.</p><p>(v) EVO BANCO S.A.U. tratará de forma confidencial los datos de carácter personal que nos proporciones, ajustándose a lo establecido en el Reglamento 679/2016 de Protección de Datos y en las normas que lo desarrollen o complementen, y con aplicación de las medidas de índole técnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteración, pérdida, tratamiento o acceso no autorizados.</p><p>Verificar la identidad, verificar la vinculación entre un cliente y su cuenta bancaria o tarjeta de crédito/débito, proporcionarnos información que nos permita tomar decisiones relacionadas con análisis de solvencia de un cliente en materia de prevención y detección de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperación de deudas, realizar análisis estadísticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</p>';
	//template+='</div>';

	template+= configTrafficEvoSiteDefault.ctclegal;
	template+='</div>';




	//Append Modal on Body
	var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");

	innerDiv.setAttribute("class", "form-wph-modal-content outschedule");

	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);


	//if(isOnSchedulecallcenter){
	if(true){
		document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLeadC2CNow("'+id_Product+'");');
	}
	//document.getElementById("myWphButtontoFormclickProg").setAttribute('href','javascript:void(0);saveLeadC2C("'+id_Product+'");');


	form_wph_modal = document.querySelector(".form-wph-modal");
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button");

	form_wph_modal_closeButton.addEventListener("click", toggleModal);
	window.addEventListener("click", windowOnClick);

	//initDatePicker();



}



function createJsCustomModalFormsC2CBroker(product_name, id_Product){


		/*
        /*
        jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/datepicker.css' type='text/css' rel='stylesheet' media='all'/>");
        jQuery("head").append('<script src="//llamamegratis.es/evo/js/datepicker.js"></script>');
        */
	/*
	jQuery("head").append('<script src="https://code.jquery.com/jquery-3.6.0.js"></script>');
	jQuery("head").append('<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>');
	*/


    var  template='<span class="form-wph-modal-close-button" title="Cerrar">&times;</span>';
    template+='<div class="form_text_field form_success" id="customWphform">';
	template+='';

	template += isOnSchedulecallcenterFun();


	template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';
	template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
	template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
	template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';
	template+='<label for="hi" class="form_label form_label_inline" title="Ver pol&iacute;ticas de privacidad" style="cursor:pointer;padding-bottom: 10px;padding-top: 12px; color:#000; float: right;width:88%;"><p id="labelWphLegal" onclicK="showLayerLegal(\'block\');">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label>';
	template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:20px;padding-left: 0px;"><div class="form_row form_row_auto" >';
	template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
	template+='</div>';
	template+='</div></form>';


	buttonStyle ='block';

	if(isOnSchedulecallcenter){
	//if(true){
		 template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display:'+buttonStyle+';">LLAMADME</a><p>';
		 template+='<p style="margin-top:10px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display:'+buttonStyle+';">LLAMAR EN OTRO MOMENTO</a></p>';
	}else{
		 template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display: '+buttonStyle+';">SOLICITAR LLAMADA</a></p>';
	}

	template+='</div>';

	template+='<div id="condiciones" onclicK="showLayerLegalC2C(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
	//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';
	//template+='<p>De conformidad con lo establecido en el Reglamento 679/2016 General de Protección de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</p><p>(i) Los datos de carácter personal, incluida la dirección de correo electrónico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), serán incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, así como de los que puedan generarse por causa de la correspondiente relación que en su caso conciertes con nosotros.</p><p>Mediante el envío de cualquiera de los formularios que figuren en el PORTAL, prestarás tu inequívoco consentimiento al régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico que se describa en el aviso sobre dicho régimen habilitado en el formulario correspondiente.</p><p><span>&nbsp;</span>(ii) Utilizaremos la información personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, así como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefonía, electrónica, seguros, moda o de consumo, entretenimiento, servicios de consultoría y asesoramiento.</p><p>Además, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electrónico u otro medio de comunicación electrónica equivalente, informaciones publicitarias o promocionales, de carácter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios que comercialice.</p><p>En los avisos sobre régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico serás adecuadamente informado respecto del carácter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</p><p>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicación de Banca Móvil debes conocer que realizamos otros tratamientos, como el uso del micrófono, el acceso a tu galería multimedia, los contactos de tu agenda, la geolocalización para indicarte tus cajeros más cercanos o el comparador de productos, y te pediremos un consentimiento específico para ello.</p><p>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en función de la relación que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservarán durante 1 año, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitación de solicitudes y evitar la duplicación de formalidades.</p><p>(v) EVO BANCO S.A.U. tratará de forma confidencial los datos de carácter personal que nos proporciones, ajustándose a lo establecido en el Reglamento 679/2016 de Protección de Datos y en las normas que lo desarrollen o complementen, y con aplicación de las medidas de índole técnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteración, pérdida, tratamiento o acceso no autorizados.</p><p>Verificar la identidad, verificar la vinculación entre un cliente y su cuenta bancaria o tarjeta de crédito/débito, proporcionarnos información que nos permita tomar decisiones relacionadas con análisis de solvencia de un cliente en materia de prevención y detección de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperación de deudas, realizar análisis estadísticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</p>';
	//template+='</div>';

	template+= configTrafficEvoSiteDefault.ctclegal;
	template+='</div>';




    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");

	innerDiv.setAttribute("class", "form-wph-modal-content outschedule");

	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);


	if(isOnSchedulecallcenter){
	//if(true){
		document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLeadC2CNow("'+id_Product+'");');
	}
	document.getElementById("myWphButtontoFormclickProg").setAttribute('href','javascript:void(0);saveLeadC2C("'+id_Product+'");');


	form_wph_modal = document.querySelector(".form-wph-modal");
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button");

	form_wph_modal_closeButton.addEventListener("click", toggleModal);
	window.addEventListener("click", windowOnClick);

	initDatePicker();



}

function createJsCustomModalFormsC2C(product_name, id_Product){

	

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")

    var  template='<span class="form-wph-modal-close-button" title="Cerrar">&times;</span>';
    template+='<div class="form_text_field form_success" id="customWphform">';
	template+='';

	template += isOnSchedulecallcenterFun();


	template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';				
	template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
	template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
	template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';					
	template+='<label for="hi" class="form_label form_label_inline" title="Ver pol&iacute;ticas de privacidad" style="cursor:pointer;padding-bottom: 10px;padding-top: 12px; color:#000; float: right;width:88%;"><p id="labelWphLegal" onclicK="showLayerLegal(\'block\');">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label>';
	template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:20px;padding-left: 0px;"><div class="form_row form_row_auto" >';
	template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
	template+='</div>';
	template+='</div></form>';


	buttonStyle ='block';

	if(isOnSchedulecallcenter){
	//if(true){
		 template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display:'+buttonStyle+';">LLAMADME</a><p>';
		 template+='<p style="margin-top:10px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display:'+buttonStyle+';">LLAMAR EN OTRO MOMENTO</a></p>';
	}else{
		 template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display: '+buttonStyle+';">SOLICITAR LLAMADA</a></p>';
	}

	template+='</div>';

	template+='<div id="condiciones" onclicK="showLayerLegalC2C(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
	//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';				
	//template+='<p>De conformidad con lo establecido en el Reglamento 679/2016 General de Protección de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</p><p>(i) Los datos de carácter personal, incluida la dirección de correo electrónico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), serán incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, así como de los que puedan generarse por causa de la correspondiente relación que en su caso conciertes con nosotros.</p><p>Mediante el envío de cualquiera de los formularios que figuren en el PORTAL, prestarás tu inequívoco consentimiento al régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico que se describa en el aviso sobre dicho régimen habilitado en el formulario correspondiente.</p><p><span>&nbsp;</span>(ii) Utilizaremos la información personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, así como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefonía, electrónica, seguros, moda o de consumo, entretenimiento, servicios de consultoría y asesoramiento.</p><p>Además, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electrónico u otro medio de comunicación electrónica equivalente, informaciones publicitarias o promocionales, de carácter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios que comercialice.</p><p>En los avisos sobre régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico serás adecuadamente informado respecto del carácter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</p><p>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicación de Banca Móvil debes conocer que realizamos otros tratamientos, como el uso del micrófono, el acceso a tu galería multimedia, los contactos de tu agenda, la geolocalización para indicarte tus cajeros más cercanos o el comparador de productos, y te pediremos un consentimiento específico para ello.</p><p>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en función de la relación que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservarán durante 1 año, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitación de solicitudes y evitar la duplicación de formalidades.</p><p>(v) EVO BANCO S.A.U. tratará de forma confidencial los datos de carácter personal que nos proporciones, ajustándose a lo establecido en el Reglamento 679/2016 de Protección de Datos y en las normas que lo desarrollen o complementen, y con aplicación de las medidas de índole técnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteración, pérdida, tratamiento o acceso no autorizados.</p><p>Verificar la identidad, verificar la vinculación entre un cliente y su cuenta bancaria o tarjeta de crédito/débito, proporcionarnos información que nos permita tomar decisiones relacionadas con análisis de solvencia de un cliente en materia de prevención y detección de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperación de deudas, realizar análisis estadísticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</p>';
	//template+='</div>';

	template+= configTrafficEvoSiteDefault.ctclegal;
	template+='</div>';	

	
   

    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");
		
	innerDiv.setAttribute("class", "form-wph-modal-content outschedule");				

	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	
	if(isOnSchedulecallcenter){
	//if(true){
		document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLeadC2CNow("'+id_Product+'");');
	}
	document.getElementById("myWphButtontoFormclickProg").setAttribute('href','javascript:void(0);saveLeadC2C("'+id_Product+'");');

	
	form_wph_modal = document.querySelector(".form-wph-modal");	
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button");

	form_wph_modal_closeButton.addEventListener("click", toggleModal);
	window.addEventListener("click", windowOnClick);

	initDatePicker();



}

function createModalLoading(str, type, displayForm){

	
	if(document.querySelector("#scoring-modal-css") == null){
		jQuery("head").append("<link id='scoring-modal-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")
	}
	var  template='<div class="form_text_field form_success" style="text-align:center;" id="customWphform" >';
	
	template += '<span>'+str+'</span>';
	template +='</div>';

    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");

	
	innerDiv.setAttribute("class", "form-wph-modal-content loading");	
			
	innerDiv.setAttribute("id", "form-wph-modal-loading");
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	form_wph_modal = document.querySelector(".form-wph-modal");
	//form_wph_modal.addEventListener("click", closeModalLoading);	

}


function createJsCustomModalFormsC2CCoinc(product_name, id_Product){

	

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")

    var  template='<span class="form-wph-modal-close-button-main" title="Cerrar">&times;</span>';
    template+='<div class="form_text_field form_success" id="customWphform">';
	template+='';

	template += isOnSchedulecallcenterFunCoinc();


	template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';				
	template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
	template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
	template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';					
	template+='<label for="hi" class="form_label form_label_inline" title="Ver pol&iacute;ticas de privacidad" style="cursor:pointer;padding-bottom: 0px;padding-top: 24px; color:#000; float: right;width:88%;"><p id="labelWphLegal" style="font-weight: bold;font-size: 14px;"onclicK="showLayerLegal(\'block\');">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label>';
	template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:20px;padding-left: 0px;"><div class="form_row form_row_auto" >';
	template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
	template+='</div>';
	template+='</div></form>';


	buttonStyle ='block';

	if(isOnSchedulecallcenter){
	//if(true){
		 template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display:'+buttonStyle+';">LLAMADME</a><p>';
		 template+='<p style="margin-top:10px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display:'+buttonStyle+';">LLAMAR EN OTRO MOMENTO</a></p>';
	}else{
		 template+='<p style="margin-top:5px;"><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclickProg" href="#" style="display: '+buttonStyle+';">SOLICITAR LLAMADA</a></p>';
	}

	template+='</div>';

	template+='<div id="condiciones" onclicK="showLayerLegalC2C(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
	//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';				
	//template+='<p>De conformidad con lo establecido en el Reglamento 679/2016 General de Protección de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</p><p>(i) Los datos de carácter personal, incluida la dirección de correo electrónico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), serán incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, así como de los que puedan generarse por causa de la correspondiente relación que en su caso conciertes con nosotros.</p><p>Mediante el envío de cualquiera de los formularios que figuren en el PORTAL, prestarás tu inequívoco consentimiento al régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico que se describa en el aviso sobre dicho régimen habilitado en el formulario correspondiente.</p><p><span>&nbsp;</span>(ii) Utilizaremos la información personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, así como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefonía, electrónica, seguros, moda o de consumo, entretenimiento, servicios de consultoría y asesoramiento.</p><p>Además, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electrónico u otro medio de comunicación electrónica equivalente, informaciones publicitarias o promocionales, de carácter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios que comercialice.</p><p>En los avisos sobre régimen del tratamiento de los datos de carácter personal y de la dirección de correo electrónico serás adecuadamente informado respecto del carácter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</p><p>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicación de Banca Móvil debes conocer que realizamos otros tratamientos, como el uso del micrófono, el acceso a tu galería multimedia, los contactos de tu agenda, la geolocalización para indicarte tus cajeros más cercanos o el comparador de productos, y te pediremos un consentimiento específico para ello.</p><p>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en función de la relación que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservarán durante 1 año, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitación de solicitudes y evitar la duplicación de formalidades.</p><p>(v) EVO BANCO S.A.U. tratará de forma confidencial los datos de carácter personal que nos proporciones, ajustándose a lo establecido en el Reglamento 679/2016 de Protección de Datos y en las normas que lo desarrollen o complementen, y con aplicación de las medidas de índole técnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteración, pérdida, tratamiento o acceso no autorizados.</p><p>Verificar la identidad, verificar la vinculación entre un cliente y su cuenta bancaria o tarjeta de crédito/débito, proporcionarnos información que nos permita tomar decisiones relacionadas con análisis de solvencia de un cliente en materia de prevención y detección de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperación de deudas, realizar análisis estadísticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</p>';
	//template+='</div>';

	template+= configTrafficEvoSiteDefault.ctclegal;
	template+='</div>';	
  

    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	formWphModal.setAttribute("id", "form-wph-modal");
	var innerDiv = document.createElement("div");
		
	innerDiv.setAttribute("class", "form-wph-modal-content outschedule");				

	innerDiv.setAttribute("id", "form-wph-modal-content");
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	
	if(isOnSchedulecallcenter){
	//if(true){
		document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLeadC2CNow("'+id_Product+'");');
	}
	document.getElementById("myWphButtontoFormclickProg").setAttribute('href','javascript:void(0);saveLeadC2C("'+id_Product+'");');

	
	form_wph_modal = document.querySelector(".form-wph-modal");	
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button-main");

	form_wph_modal_closeButton.addEventListener("click", toggleModal);
	window.addEventListener("click", windowOnClick);

}

function createJsCustomModalFormsWithEmail(product){

	

	jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/form-wph-modal.css' type='text/css' rel='stylesheet' media='all'/>")

	/*var template='<div class="form-wph-modal">';
        template+='<div class="form-wph-modal-content">';*/
	var  template='<span class="form-wph-modal-close-button" title="Cerrar">&times;</span>';
	template+='<div class="form_text_field form_success" id="customWphform">';
	template+='<p style="margin-bottom:8px;margin-top: 30px;"><strong class="wphmsg" id="wphmsg">D&eacute;janos tus datos y nosotros te llamamos.</strong></p>';
	template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';				
	template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
	template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
	template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';
	
	//Email Box
	template+='<input style="margin-top:10px;" type="text" pattern="\s*" maxlength="55" aria-invalid="false" aria-required="true" placeholder="Tu email" class="cajaWphEmail" name="cajaWphEmail" id="cajaWphEmail" required="" value="">';
	template+='<label id="cajaWphEmail-error" class="form_error" style="display:none;" for="cajaWphEmail">Este campo es obligatorio.</label>';					
	
	template+='<label for="hi" class="form_label form_label_inline" title="Ver pol&iacute;ticas de privacidad" style="cursor:pointer;padding-bottom: 10px;padding-top: 12px; color:#000; float: right;width:88%;"><p id="labelWphLegal" onclicK="showLayerLegal(\'block\');">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label>';
	template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:20px;padding-left: 0px;"><div class="form_row form_row_auto" >';
	template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
	template+='</div>';
	template+='</div></form>';
	if(product=='Contratar Hipoteca web' || product=='Fondo Inteligente' || product=='Fondos de inversion'){
		template+='<p><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display: inline-block;">LL&Aacute;MAME</a></p></div>';
	}else{
		template+='<p><a class="m_btn m_btn_std" target="" id="myWphButtontoFormclick" href="#" style="display: inline-block;">LA QUIERO AHORA</a></p></div>';
	}

	template+='<div id="condiciones" onclicK="showLayerLegal(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
	//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';				
	template+= configTrafficEvoSiteDefault.defaultlegal;
	template+='</div>';	


    
    /*
    template+=' </div>';
    template+='</div>';
    */

    //Append Modal on Body
    var formWphModal = document.createElement("div");
	formWphModal.setAttribute("class", "form-wph-modal");
	var innerDiv = document.createElement("div");
	innerDiv.setAttribute("class", "form-wph-modal-content");	
	innerDiv.innerHTML = template;	
	formWphModal.appendChild(innerDiv);
	document.body.appendChild(formWphModal);

	document.getElementById("myWphButtontoFormclick").setAttribute('href','javascript:void(0);saveLeadMail("'+product+'");');

	//form_wph_modal_container = document.querySelector(".form-wph-modal-container");	
	form_wph_modal = document.querySelector(".form-wph-modal");	
	form_wph_modal_closeButton = document.querySelector(".form-wph-modal-close-button");

	form_wph_modal_closeButton.addEventListener("click", toggleModal);
	window.addEventListener("click", windowOnClick);

	//console.log("createJsCustomModalForms");


}


function toggleModalLoading() {
	//form_wph_modal_container.classList.toggle("show-form-wph-modal-container");
	if(document.querySelector('.form-wph-modal')) document.querySelector('.form-wph-modal').classList.toggle("show-form-wph-modal-loading");
    //form_wph_modal.classList.toggle("show-form-wph-modal");
}


function trackEvent(CtcTypeForm) {

	if(CtcTypeForm!=''){
		dataLayer.push({
			'event': 'CTA',
			'eventAction': 'Acceso a contratación sección Hipoteca',
			'eventCategory': 'Simulación Hipoteca',
			'eventLabel': 'Abre C2C_'+ CtcTypeForm
		});

		eventActionCtaHipotecaJoven = CtcTypeForm;
	}
	
}

//[2023-02-16] FBB trackBtnEvent para Analítica /hipoteca - JIRA WE-109
function trackBtnEvent(event, eventAction, eventCategory, eventLabel) {

		dataLayer.push({
			'event': event,
			'eventAction': eventAction,
			'eventCategory': eventCategory,
			'eventLabel': eventLabel
		});	
}

function toggleModal() {
	//form_wph_modal_container.classList.toggle("show-form-wph-modal-container");
	if(document.querySelector('.form-wph-modal')) document.querySelector('.form-wph-modal').classList.toggle("show-form-wph-modal");
    //form_wph_modal.classList.toggle("show-form-wph-modal");
	
}

function toggleModalMain(origin) {
	
	//console.log(origin);
	
	
	
	if(typeof dataLayer!='undefined' && evoBancaProductForm!=''){
		if(origin!=null){
			//dataLayer.push({'event': 'CTC_opened','CTC_form' : origin});
			idButtonClicked = origin;
		}else if(origin==null){
			dataLayer.push({'event': 'CTC_opened','CTC_form' : 'CTC_mail'});
			idButtonClicked = 'CTC_mail';
		}
	}

    form_wph_modal.classList.toggle("show-form-wph-modal");
    initDatePicker();
}

function windowOnClick(event) {
    if (event.target === form_wph_modal) {
        toggleModal();
		/*console.log(" click >> form-wph-modal-close-button");
		const evomodals = document.querySelectorAll('#form-wph-modal');
		evomodals.forEach(box => {
			evomodals.remove();
		});*/
    }
}

	
function isMobileSafari() {
	var isSafari = !!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);
    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;    
    //return isSafari && iOS && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    return iOS && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

function isMobileAndroid(){
	var ua = navigator.userAgent.toLowerCase();
	var isAndroid = ua.indexOf("android") > -1;
	return isAndroid && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

//[2023-02-16] FBB Añadimos 'eventLabel': 'CTA_main' - JIRA WE-109
function openSimuladorhipotecaUrl(id=null){

	if( id =='btn-simulate' || id == null){
		if(typeof dataLayer!='undefined'){
			dataLayer.push({
				'event': 'CTA',
				'eventAction': 'Comenzar simulación',
				'eventCategory': 'Simulación Hipoteca',			
				'eventLabel': 'CTA_main'
			});
		}
	}else{
		trackBtnEvent('CTA', 'Comenzar simulación', ' Simulación Hipoteca', id);
	}

	console.log("open simulador");

	setTimeout(function(){ 
		window.open('https://svc.evobanco.com/simuladorhipoteca/#/inicio','_self');
	},1000);
	
}

/****** Fin Functions createJsCustomModalForms  ********/

function getInfoSessionNavigationEVO(field){
    if(typeof sessionStorage =='object'){
        try {
            if(typeof sessionStorage[field] !=='undefined'){              
                  return sessionStorage[field];
              }else{
                return false;
              }

            
        }catch(exception){
            console.info("sessionStorage get item (ERROR) ");
            return false;
        }
    }else{
        console.info("sessionStorage get sessionStorage (ERROR) ");
        return false;
    }
}

function setReferrerUtmsEVO(){
	try {		 
  
		var querystring = document.location.href.split("?");
  
		if (querystring.length > 1) {
		  var pairs = querystring[1].split("&");
			for (i in pairs) {
				var keyval = pairs[i].split("=");
				if(typeof sessionStorage =='object'){
					if (sessionStorage.getItem(keyval[0]) === null) {
						sessionStorage.setItem(keyval[0], decodeURIComponent(keyval[1]));						
					}
				}
			}
		}  
  
	  }catch(exception){
		  console.info("setReferrerUtms (ERROR) " + exception);
		  return false;
	  } 

  }
  



//!function(){
(function() {

  	updateButtonsTestAb();
  	updateRegisterLink();
	setReferrerUtmsEVO();

  	/* FORZAMOS CAMBIOS MENÚ MOBILE */
  	if(typeof jQuery !== 'undefined' && jQuery(window ).width()<370) {
  		jQuery(".m_header_main_wrapper").css('padding','2px');	
  	}
	/* FORZAMOS CAMBIOS MENÚ MOBILE */
	
	/* OCULTAMOS CHAT EN MENÚ SUPERIOR EN MOBILE */
	if(typeof jQuery !== 'undefined' && isMobile() == true) {
		jQuery(".asistant").hide(); //console.log("OCULTAMOS CHAT EN MENÚ SUPERIOR EN MOBILE")
	}

	if(getInfoSessionNavigationEVO('utm_oferta')!=false){
		
		if(jQuery('#simulatorText').length>0){
			jQuery('#simulatorText').css('display', 'none');
		}
	}

	/* IMPORTANTE */
	/*
	jQuery(".asistant").hide();
	jQuery("#chat").hide();
	jQuery("#chatM").hide();
	*/

	/* OCULTAMOS CHAT EN MENÚ SUPERIOR EN MOBILE */

	//SHOWING CHATBOT ON SOME URLS 

	/*var allowedHostnameChatBot = ['www.evobanco.com'];
	var allowedPathnameUrlsChatBot= ['/cuenta-inteligente/', '/tarjeta-inteligente/', '/cuenta-joven/','/productos-inteligentes/inversion-rentable/plan-inversion-inteligente/', '/hipoteca/',
									'/productos-inteligentes/inversion-rentable/fondo-inteligente/', '/prestamos-personales/', '/productos-inteligentes/prevision-y-seguros/evo-protect/', '/planes-de-pensiones/'
									];

	if (allowedHostnameChatBot.indexOf(document.location.hostname) !== -1) {
		var isOnUrlChatBot= false;
		for (var i=0; i<allowedPathnameUrlsChatBot.length; i++) {
		  if (allowedPathnameUrlsChatBot[i] == document.location.pathname) {
			if(!isOnUrlChatBot){
				isOnUrlChatBot=true;				
				jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/chatbot.css' type='text/css' rel='stylesheet' media='all'/>");					
				jQuery('body').append('<div id="chat" onclick="submitChatButton();"><div><p class="title">¡Me sé todas las respuestas sobre EVO! Soy EVOBot</p><img class="iconChat" src="https://www.evobanco.com/.galleries/home/chat/icon.png" alt=""><div class="btnChat"><p>chatea conmigo</p></div></div></div><div id="chatM" onclick="submitChatButton();"><img src="https://www.evobanco.com/.galleries/home/chat/mobile.png" alt=""></div>');
				break;					
			}			
			break;	
		  }  
		}
	}
	*/
	//SHOWING CHATBOT ON SOME URLS 

	/****** ****** ******** ****** ******** CONFIG By URLS ******** ****** ******** ****** ******** ****** ********/
	
	//Landing novedades https://www.evobanco.com/servicios-digitales/smartphone-banking/novedades/novedades-pruebas-nueva/
	var allowedHostnameLandingslideNovedadesPruebas = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingslideNovedadesPruebas= ['/servicios-digitales/smartphone-banking/novedades/novedades-pruebas-nueva/'];

	if (allowedHostnameLandingslideNovedadesPruebas.indexOf(document.location.hostname) !== -1) {
		var isSlideLoadedNovedadesPruebas= false;
		for (var i=0; i<allowedPathnameUrlsLandingslideNovedadesPruebas.length; i++) {
		  if (allowedPathnameUrlsLandingslideNovedadesPruebas[i] == document.location.pathname) {		  	
				//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('span:contains("antes que nadie solo por ser BETA")')[0];
				if(!isSlideLoadedNovedadesPruebas){
					//jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/mobile.css' type='text/css' rel='stylesheet' media='all'/>")
					isSlideLoadedNovedadesPruebas= true;
					jQuery('main#main.main_content div.module_row.content_row')[1].id='insertSlideWphNovedades';
					jQuery('#insertSlideWphNovedades').append('<iframe  src="https://llamamegratis.es/evo/slider/slider-novedades_v2.html" frameborder="0" scrolling="no" id="slideNovedades" height="500px"></iframe>');
					//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('main#main.main_content p')[5];
					//jQuery('#slideNovedades').css('min-width','100%');
					var cssCustomPruebas = document.createElement("style");
					cssCustomPruebas.type = "text/css";
					cssCustomPruebas.innerHTML = "#slideNovedades { width: 1px; min-width: 100%; *width: 100%; }";
					document.body.appendChild(cssCustomPruebas);
					
				}
				//jQuery('p:contains("INSERTAR MODULO CON MOVIL")').html('');
				
				//jQuery('div .m_infobox').css('background-color','transparent');	


		  		break;
		  }
		}
	}

	/*var allowedHostnameLandingslideNovedades = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingslideNovedades= ['/servicios-digitales/smartphone-banking/novedades/'];

	if (allowedHostnameLandingslideNovedades.indexOf(document.location.hostname) !== -1) {
		var isSlideLoadedNovedades= false;
		for (var i=0; i<allowedPathnameUrlsLandingslideNovedades.length; i++) {
		  if (allowedPathnameUrlsLandingslideNovedades[i] == document.location.pathname) {		  	
				//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('span:contains("antes que nadie solo por ser BETA")')[0];
				if(!isSlideLoadedNovedades){
					//jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/mobile.css' type='text/css' rel='stylesheet' media='all'/>")
					isSlideLoadedNovedades= true;
					jQuery('main#main.main_content p')[4].id='insertSlideWphNovedades';
					jQuery('#insertSlideWphNovedades').append('<iframe  src="https://llamamegratis.es/evo/slider/slider-novedades_v2.html" frameborder="0" scrolling="no" id="slideNovedades" height="500px"></iframe>');
					//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('main#main.main_content p')[5];
					//jQuery('#slideNovedades').css('min-width','100%');
					var cssCustom = document.createElement("style");
					cssCustom.type = "text/css";
					cssCustom.innerHTML = "#slideNovedades { width: 1px; min-width: 100%; *width: 100%; } #insertSlideWphNovedades{min-width: 100%;}";
					document.body.appendChild(cssCustom);
					
				}
				//jQuery('p:contains("INSERTAR MODULO CON MOVIL")').html('');
				
				//jQuery('div .m_infobox').css('background-color','transparent');	


		  		break;
		  }
		}
	}*/

	var allowedHostnameLandingslideFondosinversion = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingFondosinversion= ['/servicios-digitales/smartphone-banking/novedades/operativa-fondos-inversion/'];

	if (allowedHostnameLandingslideFondosinversion.indexOf(document.location.hostname) !== -1) {
		var isSlideLoadedFondosinversion= false;
		for (var i=0; i<allowedPathnameUrlsLandingFondosinversion.length; i++) {
		  if (allowedPathnameUrlsLandingFondosinversion[i] == document.location.pathname) {		  	
				//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('span:contains("antes que nadie solo por ser BETA")')[0];
				if(!isSlideLoadedFondosinversion){
					//jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/mobile.css' type='text/css' rel='stylesheet' media='all'/>")
					isSlideLoadedFondosinversion= true;
					jQuery('main#main.main_content p')[1].id='insert-slide-operativa-fondos-inversion';
					jQuery('#insert-slide-operativa-fondos-inversion').append('<iframe  src="https://llamamegratis.es/evo/slider/slider-novedades-operativa-fondos.html" frameborder="0" scrolling="no" id="insertOperativa"  width="100%" height="950px"></iframe>');
					//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('main#main.main_content p')[5];
					//jQuery('#slideNovedades').css('min-width','100%');
					var cssCustom = document.createElement("style");
					cssCustom.type = "text/css";
					cssCustom.innerHTML = "#insertOperativa { width: 1px; min-width: 100%; *width: 100%; } #insert-slide-operativa-fondos-inversion{min-width: 100%;}";
					document.body.appendChild(cssCustom);
					
				}
				//jQuery('p:contains("INSERTAR MODULO CON MOVIL")').html('');
				
				//jQuery('div .m_infobox').css('background-color','transparent');	


		  		break;
		  }
		}
	}

var allowedHostnameLandingslideFondosinversion = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingFondosinversion= ['/productos-inteligentes/inversion-rentable/operativa-fondos-de-inversion/'];

	if (allowedHostnameLandingslideFondosinversion.indexOf(document.location.hostname) !== -1) {
		var isSlideLoadedFondosinversion= false;
		for (var i=0; i<allowedPathnameUrlsLandingFondosinversion.length; i++) {
		  if (allowedPathnameUrlsLandingFondosinversion[i] == document.location.pathname) {		  	
				//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('span:contains("antes que nadie solo por ser BETA")')[0];
				if(!isSlideLoadedFondosinversion){
					//jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/mobile.css' type='text/css' rel='stylesheet' media='all'/>")
					isSlideLoadedFondosinversion= true;
					jQuery('main#main.main_content div.module_row.content_row')[1].id='insert-slide-operativa-fondos-inversion';
					jQuery('#insert-slide-operativa-fondos-inversion').append('<iframe  src="https://llamamegratis.es/evo/slider/slider-novedades-operativa-fondos.html" frameborder="0" scrolling="no" id="insertOperativa"  width="100%" height="950px"></iframe>');
					//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('main#main.main_content p')[5];
					//jQuery('#slideNovedades').css('min-width','100%');
					var cssCustom = document.createElement("style");
					cssCustom.type = "text/css";
					cssCustom.innerHTML = "#insertOperativa { width: 1px; min-width: 100%; *width: 100%; } #insert-slide-operativa-fondos-inversion{min-width: 100%;}";
					document.body.appendChild(cssCustom);
					
				}
				//jQuery('p:contains("INSERTAR MODULO CON MOVIL")').html('');
				
				//jQuery('div .m_infobox').css('background-color','transparent');	


		  		break;
		  }
		}
	}

	var allowedHostnameLandingslideRecomendacionesEvo = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingRecomendacionesEvo= ['/recomendaciones-evo/'];

	if (allowedHostnameLandingslideRecomendacionesEvo.indexOf(document.location.hostname) !== -1) {
		var isSlideLoadedRecomendacionesEvo= false;
		for (var i=0; i<allowedPathnameUrlsLandingRecomendacionesEvo.length; i++) {
		  if (allowedPathnameUrlsLandingRecomendacionesEvo[i] == document.location.pathname) {
				if(!isSlideLoadedRecomendacionesEvo){
					isSlideLoadedRecomendacionesEvo= true;
					jQuery('main#main.main_content p')[10].id='insert-slide-recomendaciones-evo';
					jQuery('#insert-slide-recomendaciones-evo').append('<iframe  src="https://llamamegratis.es/evo/slider/slider-recomendaciones-evo.html" frameborder="0" scrolling="no" id="insertOperativa"  width="100%" height="700px"></iframe>');

					var cssCustom = document.createElement("style");
					cssCustom.type = "text/css";
					cssCustom.innerHTML = "#insertOperativa { width: 1px; min-width: 100%; *width: 100%; } #insert-slide-recomendaciones-evo{min-width: 100%;}";
					document.body.appendChild(cssCustom);
					
				}
		  		break;
		  }
		}
	}
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/


	//Landing correos-cash https://www.evobanco.com/servicios-digitales/smartphone-banking/novedades/correos-cash/
	/*var allowedHostnameLandingslideMov = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingslideMov= ['/servicios-digitales/smartphone-banking/novedades/correos-cash/'];

	if (allowedHostnameLandingslideMov.indexOf(document.location.hostname) !== -1) {
		var isSlideLoaded= false;
		for (var i=0; i<allowedPathnameUrlsLandingslideMov.length; i++) {
		  if (allowedPathnameUrlsLandingslideMov[i] == document.location.pathname) {		  	
				//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('span:contains("antes que nadie solo por ser BETA")')[0];
				if(!isSlideLoaded){
					//jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/mobile.css' type='text/css' rel='stylesheet' media='all'/>")
					isSlideLoaded= true;
					jQuery('main#main.main_content p')[0].id='insertSlideWph';
					jQuery('#insertSlideWph').prepend('<iframe  src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="950px"></iframe>');
					//jQuery('<iframe src="https://llamamegratis.es/evo/slider/slide-mobile-V2.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="1000px"></iframe>').appendTo('main#main.main_content p')[5];

				}
				//jQuery('p:contains("INSERTAR MODULO CON MOVIL")').html('');
				//jQuery('div .m_infobox').css('border','0px');	
				//jQuery('div .m_infobox').css('background-color','transparent');	


		  		break;
		  }
		}
	}*/

	//Landing EVO Wallet https://www.evobanco.com/servicios-digitales/smartphone-banking/evo-wallet/
	var allowedHostnameLandingslideMov = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingslideMov= ['/servicios-digitales/smartphone-banking/evo-wallet/'];

	if (allowedHostnameLandingslideMov.indexOf(document.location.hostname) !== -1) {
		var isSlideLoaded= false;
		for (var i=0; i<allowedPathnameUrlsLandingslideMov.length; i++) {
		  if (allowedPathnameUrlsLandingslideMov[i] == document.location.pathname) {		  	
				if(!isSlideLoaded){
					isSlideLoaded= true;
					var elementToChange = jQuery( ":contains('Tu wallet cobra vida propia pudiendo usar tu tarjeta'):last");
					if(elementToChange){
						elementToChange.after('<div id="insertSlideWphWallet"></div>');
						jQuery('#insertSlideWphWallet').prepend('<iframe  src="https://llamamegratis.es/evo/slider/evo-wallet.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="720px"></iframe>');
					}

					var cssCustom = document.createElement("style");
					cssCustom.type = "text/css";
					cssCustom.innerHTML = "#insertSlideWphWallet { min-width: 100%; }";
					document.body.appendChild(cssCustom);

				}
				


		  		break;
		  }
		}
	}

	//Landing  https://www.evobanco.com/productos-inteligentes/inversion-rentable/fondo-inteligente/bienvenido/
	var allowedHostnameLandingslideMov = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingslideMov= ['/productos-inteligentes/inversion-rentable/fondo-inteligente/bienvenido/'];

	if (allowedHostnameLandingslideMov.indexOf(document.location.hostname) !== -1) {
		var isSlideLoaded= false;
		for (var i=0; i<allowedPathnameUrlsLandingslideMov.length; i++) {
		  if (allowedPathnameUrlsLandingslideMov[i] == document.location.pathname) {		  	
				if(!isSlideLoaded){
					isSlideLoaded= true;
					var elementToChange = jQuery( ":contains('Empezar no puede ser'):last");
					if(elementToChange){
						elementToChange.after('<div id="insertSlideWphFondoInteligente"></div>');
						jQuery('#insertSlideWphFondoInteligente').prepend('<iframe  src="https://llamamegratis.es/evo/slider/carrusel-fondo-inteligente.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="720px"></iframe>');
					}

					var cssCustom = document.createElement("style");
					cssCustom.type = "text/css";
					cssCustom.innerHTML = "#insertSlideWphFondoInteligente { min-width: 100%; }";
					document.body.appendChild(cssCustom);
				}
		  		break;
		  }
		}
	}

		//Landing  https://www.evobanco.com/productos-inteligentes/inversion-rentable/fondo-inteligente/bienvenido/
	var allowedHostnameLandingslideMov = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingslideMov= ['/tarjeta-inteligente/personalizacion/'];

	if (allowedHostnameLandingslideMov.indexOf(document.location.hostname) !== -1) {
		var isSlideLoaded= false;
		for (var i=0; i<allowedPathnameUrlsLandingslideMov.length; i++) {
		  if (allowedPathnameUrlsLandingslideMov[i] == document.location.pathname) {		  	
				if(!isSlideLoaded){
					isSlideLoaded= true;
					var elementToChange = jQuery( ":contains('Todo esto desde tu Banca'):last");
					if(elementToChange){
						elementToChange.after('<div id="insertSlideWphPersonalizacion"></div>');
						jQuery('#insertSlideWphPersonalizacion').prepend('<iframe  src="https://llamamegratis.es/evo/slider/personalizacion-tarjeta.html" frameborder="0" scrolling="no" id="slideMov" width="100%" height="720px"></iframe>');
					}

					var cssCustom = document.createElement("style");
					cssCustom.type = "text/css";
					cssCustom.innerHTML = "#insertSlideWphPersonalizacion { min-width: 100%; }";
					document.body.appendChild(cssCustom);
				}
		  		break;
		  }
		}
	}

	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/


	//OPEN WEBPHONE ALL DEVICES 
	var allowedHostnameJscuentaJoven = ['www.evobanco.com'];

	// Cuenta-joven call by Widget 2725
  	var allowedPathnameUrlsJscuentaJoven = ['/cuenta-joven/'];

  	if (allowedHostnameJscuentaJoven.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJscuentaJoven.length; i++) {
	  	  if (allowedPathnameUrlsJscuentaJoven[i] == document.location.pathname) {
	  	    
	  	    	if(generatePercentRandom(configTrafficEvoSite.cuentajoven.porcentaje_url1)){
	  	    		//70%
					jQuery('.m_btn.m_btn_inv').attr('href',configTrafficEvoSite.cuentajoven.url1);
				}else{
					//30%
					jQuery('.m_btn.m_btn_inv').attr("href",configTrafficEvoSite.cuentajoven.url2);	
					jQuery('.m_btn.m_btn_inv').attr("target","_blank");		
					var linkurlEvoCuentaJovenOnline = jQuery('.m_btn.m_btn_std')[1];
					if(linkurlEvoCuentaJovenOnline.text.indexOf("CUENTA JOVEN")>0){
						linkurlEvoCuentaJovenOnline.href = configTrafficEvoSite.cuentajoven.url2;						
					}				
				}

	  	    /*if(true){
	  	    	jQuery(document).on("click",".m_btn.m_btn_inv",function(event){				
					event.preventDefault();	
					jQuery('.m_btn.m_btn_inv').attr("href","#");
					openWphCall(2725,null);	
				});
	  	    }*/

	  	    //UPDATE Botones ABRIR UNA CUENTA JOVEN con UTMS https://www.evobanco.com/cuenta-joven/?utms 
			updateLinksCuentaJovenOnlineUtms();	  	    

	  	    break;
	  	  }
	  	}
	}

	//Taxdown
	var allowedHostnameJsTaxdown = ['www.evobanco.com'];

	// Cuenta-joven call by Widget 2725
  	var allowedPathnameUrlsJsTaxdown = [
  			'/servicios-digitales/promociones-evo-banco/taxdown/',
  			'/servicios-digitales/promociones-evo-banco/taxdown-evolover/'
  	];

  	if (allowedHostnameJsTaxdown.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsTaxdown.length; i++) {
	  	  if (allowedPathnameUrlsJsTaxdown[i] == document.location.pathname) {
	  	    
	  	    	
			
			try{
				if(window.location.search!=''){
					jQuery(".m_btn.m_btn_inv").each( function( index, element ){						
						if(jQuery(".m_btn.m_btn_inv")[index].href.indexOf("taxdown")>= 0){
							jQuery(".m_btn.m_btn_inv")[index].href = jQuery(".m_btn.m_btn_inv")[index].href + window.location.search.replace(/%/gi,'');
						}						
					});
						
				}
			}catch(exception){
		    	console.log(exception);  		        
		    } 

	  	    break;
	  	  }
	  	}
	}

	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/


	// Aval Call by Widget 2726
  	/*allowedPathnameUrlsJscuentaJoven = ['/aval/'];

  	if (allowedHostnameJscuentaJoven.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJscuentaJoven.length; i++) {
	  	  if (allowedPathnameUrlsJscuentaJoven[i] == document.location.pathname) {
	  	    //if(!isMobile()){
	  	    if(true){
	  	    	jQuery(document).on("click",".m_btn.m_btn_inv",function(event){					
					event.preventDefault();	
					jQuery('.m_btn.m_btn_inv').attr("href","#");
					openWphCall(2726,null);						
				});
	  	    }
	  	    break;
	  	  }
	  	}
	}*/


  /*var allowedHostnameCmsCustomStyles = ['www.evobanco.com'];
  var allowedPathnameUrlsCmsCustomStyles = ['/pruebas/laura/', '/', '/clientes/'];

  	if (allowedHostnameCmsCustomStyles.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsCmsCustomStyles.length; i++) {
	  	  if (allowedPathnameUrlsCmsCustomStyles[i] == document.location.pathname) {
	  	    //cmsCustomStyles();	  	    
	  	    if(isMobile() == true) {
	  	    	jQuery("#m_header").css('border-color','#fff');	
	  	    }
	  	    //if(jQuery(window ).width()<380) jQuery(".m_header_main_wrapper").css('padding','2px');

	  	    jsCustomEvents();
	  	    break;
	  	  }
	  	}
	}*/





	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/


	/*var allowedHostnameCmsEvoBootCustomStyles = ['www.evobanco.com'];
  	var allowedPathnameUrlsCmsEvoBootCustomStyles = ['/evobot/'];

  	if (allowedHostnameCmsEvoBootCustomStyles.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsCmsEvoBootCustomStyles.length; i++) {
	  	  if (allowedPathnameUrlsCmsEvoBootCustomStyles[i] == document.location.pathname) {
	  	    //cmsCustomStyles();
	  	    jsCustomEvoBootEvents();
	  	    break;
	  	  }
	  	}
	}

	if (allowedHostnameCmsEvoBootCustomStyles.indexOf(document.location.hostname) !== -1) {
  		//jsCustomEvoBootEvents();
  	}*/

	//jsCustomEvoBootEvents();


	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	//[FBB 2022-02-10] Ocultamos EVO ASSINTANT en alguna surl para mostrar un CTA de C2C flotante
	//CREATE CUSTOM HTML CHAT EVO ASSINTANT
	var allowedHostnameCmsEvoBootCustomStyles = ['www.evobanco.com'];
  	var allowedPathnameUrlsCmsEvoBootCustomStyles = [
		  '/hdhvvsugds6743sgsihdskah9/inversion/',
		  '/inversion/',
		  '/productos-inteligentes/',
		  '/fondos-de-inversion/',		  
		  '/servicios-digitales/',
		  '/ayuda/',
		  '/cuentas/'
	];
	

  	if (allowedHostnameCmsEvoBootCustomStyles.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsCmsEvoBootCustomStyles.length; i++) {
			if (document.location.pathname.indexOf(allowedPathnameUrlsCmsEvoBootCustomStyles[i]) !== -1) {
	  	 	//if (allowedPathnameUrlsCmsEvoBootCustomStyles[i].indexOf(document.location.pathname) !== -1) {
		 	//if (allowedPathnameUrlsCmsEvoBootCustomStyles[i] == document.location.pathname) {			
			createC2CFollowWidget(false);
	  	    break;
	  	  }
	  	}
	}	

	//[2023-02-03] FBB Test UAT
	//[2023-02-16] FBB  Activamos follow en /hipoteca JIRA WE-109
	//[2023-03-03] FBB  Quitamos follow en /hipoteca JIRA WE-109
	//[2023-07-04] PCC  Quitamos follow en /desarrollo JIRA WE-109
	var allowedHostnameCmsEvoBootCustomStyles = ['www.evobanco.com'];
  	var allowedPathnameUrlsCmsEvoBootCustomStyles = [		  
		  // '/desarrollo/'
	];
	

  	if (allowedHostnameCmsEvoBootCustomStyles.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsCmsEvoBootCustomStyles.length; i++) {
			if (document.location.pathname.indexOf(allowedPathnameUrlsCmsEvoBootCustomStyles[i]) !== -1) {			
				createC2CFollowWidgetHipoteca();
	  	    break;
	  	  }
	  	}
	}

	//CREATE CUSTOM HTML FORM IN SPECIFIC URLS
	var allowedHostnameJsForm = ['www.evobanco.com'];  	

  	var allowedPathnameUrlsJsForm = [	  	
	  		{'url':'/fondos-de-inversion/contratar/', 'producto': 'Fondos de Inversion'},
	  		{'url':'/planes-de-pensiones/contratar/', 'producto': 'Planes de Pensiones'},	  		
	  		{'url':'/prestamos-personales/contratar/', 'producto': 'Prestamos Personales'},	  		
	  		{'url':'/aval/contratar/', 'producto': 'Aval Bancario'},	  		
	  		{'url':'/hipoteca/contratar/', 'producto': 'Hipoteca'},	
	  		{'url':'/valores/contratar/', 'producto': 'Valores'},	  		
	  	
  	];

  	if (allowedHostnameJsForm.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsForm.length; i++) {
	  	  if (allowedPathnameUrlsJsForm[i].url == document.location.pathname) {	  	    	  	   	    
	  	    createJsCustomForm(allowedPathnameUrlsJsForm[i].producto);
	  	    evoBancaProductForm =    allowedPathnameUrlsJsForm[i].producto;
	  	    break;
	  	  }
	  	}
	}


	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	//CREATE CUSTOM MODAL FORM IN SPECIFIC URLS
	var allowedHostnameJsModalForm = ['www.evobanco.com'];

  	var allowedPathnameUrlsJsModalForm = [
	  	
	  		{'url':'/planes-de-pensiones/', 'producto': 'Planes de Pensiones'},
	  		{'url':'/seguros/', 'producto': 'Planes de Pensiones'},
	  		//{'url':'/prestamos-personales/', 'producto':'Prestamos Personales'},
	  		//{'url':'/hipoteca/', 'producto':'Hipoteca'},
	  		/*{'url':'/aval/', 'producto':'Aval Bancario'}*/
	  		/*{'url':'/fondos-de-inversion/', 'producto':'Fondos de inversion'}*/
	  	
  	];

  	if (allowedHostnameJsModalForm.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsModalForm.length; i++) {
	  	  if (allowedPathnameUrlsJsModalForm[i].url == document.location.pathname) {	  	    
	  	    createJsCustomModalForms(allowedPathnameUrlsJsModalForm[i].producto);
	  	    
			jQuery(document).on("click",".m_btn.m_btn_inv:contains('PLAN DE PENSIONES')",function(event){					
				//this.setAttribute('href','javascript:void(0);toggleModal();');
				event.preventDefault();	
				jQuery(this).attr("href","javascript:void(0);toggleModal();");
				//toggleModal();						
			});

			jQuery(document).on("click",".m_btn.m_btn_std:contains('TE LLAMAMOS')",function(event){					
				event.preventDefault();	
				jQuery(this).attr("href","#");
				toggleModal();						
			})

			jQuery(".m_btn.m_btn_inv:contains('CALCULA TU PRECIO')").attr("href","https://evoprotect.evobanco.com/#/evo-protect/tarificador");	
			

			jQuery(document).on("click",".m_btn.m_btn_inv:contains('ABRIR UN PLAN DE PENSIONES')",function(event){					
				event.preventDefault();	
				jQuery(this).attr("href","#");
				toggleModal();						
			});

			evoBancaProductForm =    allowedPathnameUrlsJsModalForm[i].producto;  

	  	    break;
	  	  }
	  	}
	}

	var allowedHostnameJsModalForm = ['www.evobanco.com'];

  	var allowedPathnameUrlsJsModalForm = [	  	
	  		
	  		//{'url':'/prestamos-personales/', 'producto':'Prestamos Personales'},
	  		//{'url':'/hipoteca/', 'producto':'Hipoteca'},
	  		/*{'url':'/aval/', 'producto':'Aval Bancario'}*/
	  		/*{'url':'/fondos-de-inversion/', 'producto':'Fondos de inversion'}*/
	  	
  	];

  	if (allowedHostnameJsModalForm.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsModalForm.length; i++) {
	  	  if (allowedPathnameUrlsJsModalForm[i].url == document.location.pathname) {	  	    
	  	    createJsCustomModalForms(allowedPathnameUrlsJsModalForm[i].producto);
	  	    jQuery(document).on("click",".m_btn.m_btn_inv",function(event){					
				event.preventDefault();	
				jQuery('.m_btn.m_btn_inv').attr("href","#");
				toggleModal();						
			});
		

			jQuery(document).on("click",".m_btn.m_btn_std",function(event){					
	  	    	if(this.href.indexOf('tel:')>=0){
					event.preventDefault();	
					this.setAttribute('href','javascript:void(0);toggleModal();');
					toggleModal();
				}						
			});

			evoBancaProductForm =    allowedPathnameUrlsJsModalForm[i].producto;  

	  	    break;
	  	  }
	  	}
	}
	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//CREATE CUSTOM MODAL FORM IN SPECIFIC URLS (Remove onclick function Pop_up_FI)
	var allowedHostnameJsModalFormProductosInteligentes = ['www.evobanco.com'];

  	var allowedPathnameUrlsJsModalFormProductosInteligentes = [	  	
	  		/*{'url':'/productos-inteligentes/inversion-rentable/fondo-inteligente/', 'producto':'Fondo Inteligente'}*/
  	];

  	if (allowedHostnameJsModalFormProductosInteligentes.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsModalFormProductosInteligentes.length; i++) {
	  	  if (allowedPathnameUrlsJsModalFormProductosInteligentes[i].url == document.location.pathname) {	  	    
	  	    createJsCustomModalForms(allowedPathnameUrlsJsModalFormProductosInteligentes[i].producto);
	  	    //Remove onclick function Pop_up_FI
	  	    if(jQuery('.m_btn.m_btn_inv').attr("onclick")=="openPopup('Pop_up_FI')"){

	  	    	jQuery('.m_btn.m_btn_inv').prop("onclick", null);
		  	    jQuery(document).on("click",".m_btn.m_btn_inv",function(event){					
					event.preventDefault();	
					jQuery('.m_btn.m_btn_inv').attr("href","#");
					toggleModal();						
				});
		  	    evoBancaProductForm =    allowedPathnameUrlsJsModalFormProductosInteligentes[i].producto;  
		  	    break;
		  	}
	  	  }
	  	}
	}

	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//REDIRECT evo-protect URLS
	var allowedHostnameJsModalFormEvoProtect = ['www.evobanco.com'];

  	var allowedPathnameUrlsJsModalFormEvoProtect = [	  	
	  		{'url':'/productos-inteligentes/prevision-y-seguros/evo-protect/', 'producto':'evo-protect'},
	  		{'url':'/productos-inteligentes/prevision-y-seguros/evo-protect/participa/', 'producto':'evo-protect'}
  	];

  	if (allowedHostnameJsModalFormEvoProtect.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsModalFormEvoProtect.length; i++) {
	  	  if (allowedPathnameUrlsJsModalFormEvoProtect[i].url == document.location.pathname) {	
				jQuery("a.m_btn.m_btn_inv").each(function(){
					if(this.href.indexOf("evobanco.com")>= 0){
						//this.href="https://evoprotect.evobanco.com/#/evo-protect/tarificador";
						this.href="https://evoprotect.evobanco.com/#/evo-protect/tarificador"+document.location.search;
					}
				});

				evoBancaProductForm =    allowedPathnameUrlsJsModalFormEvoProtect[i].producto;  

				if(jQuery( "a:contains('DOS PRIMERAS HORAS GRATIS')")!='undefined' && jQuery( "a:contains('DOS PRIMERAS HORAS GRATIS')").text()!=''){
					jQuery( "a:contains('DOS PRIMERAS HORAS GRATIS')").attr("href", "https://evoprotect.evobanco.com/#/evo-protect/tarificador"+document.location.search) ;
				}

		  	    break;		  	
	  	  }
	  	}
	}


		
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/


	//OPEN APP IN SPECIFIC URLS ON MOBILE DEVICES
	var allowedHostnameJsApp = ['www.evobanco.com'];

  	var allowedPathnameUrlsJsApp = ['/servicios-digitales/promociones-evo-banco/evo-travel-cash/',
  	'/productos-inteligentes/prevision-y-seguros/plan-inversion-inteligente/'];

  	if (allowedHostnameJsApp.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsApp.length; i++) {
	  	  if (allowedPathnameUrlsJsApp[i] == document.location.pathname) {
	  	    if(isMobile() == true){
	  	    	jQuery("a.m_btn.m_btn_std").each(function(){
					if(this.href.indexOf(urlBancaElectronicaEvo)>= 0){
						if(!!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)){							
							this.href='https://itunes.apple.com/app/id542752481';	
						}else{							
							this.href='https://play.google.com/store/apps/details?id=es.evobanco.bancamovil';	
						}
						
					}
				});

				jQuery("a.m_btn.m_btn_inv").each(function(){
					if(this.href.indexOf(urlBancaElectronicaEvo)>= 0){
						if(!!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)){							
							this.href='https://itunes.apple.com/app/id542752481';	
						}else{							
							this.href='https://play.google.com/store/apps/details?id=es.evobanco.bancamovil';	
						}
						
					}
				});

	  	    }
	  	    break;
	  	  }
	  	}
	}
	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//CREATE CUSTOM MODAL FORM IN "simulador-hipoteca"
	var allowedHostnameSimulador = ['www.evobanco.com'];
  	var allowedPathnameUrlsSimulador = [	  	
	  		{'url':'/web/simulador-hipoteca/', 'producto': 'Contratar Hipoteca web'},	  			  	
  	];

  	if (allowedHostnameSimulador.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsSimulador.length; i++) {
	  	  if (allowedPathnameUrlsSimulador[i].url == document.location.pathname) {	  	    
	  	    createJsCustomModalForms(allowedPathnameUrlsSimulador[i].producto);
	  	    jQuery(document).on("click",".m_btn.m_btn_big.m_btn_aqua",function(event){					
	  	    	if(this.href.indexOf('donde-estamos')>=0){
					event.preventDefault();	
					this.setAttribute('href','javascript:void(0);toggleModal();');
					toggleModal();
				}						
			});
			evoBancaProductForm =    allowedPathnameUrlsSimulador[i].producto;  
	  	    break;
	  	  }
	  	}
	}

	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//CREATE CUSTOM MODAL FORM IN "Prestamos Personales"
	var allowedHostnamePrestamospersonales = ['www.evobanco.com'];
  	var allowedPathnameUrlsPrestamospersonales = [	  	
	  		{'url':'/prestamos-personales/', 'producto': 'Prestamos Personales'},	
	  					  	
  	];

  	if (allowedHostnamePrestamospersonales.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsPrestamospersonales.length; i++) {
	  	  if (allowedPathnameUrlsPrestamospersonales[i].url == document.location.pathname) {	  	    
	  	    createJsCustomModalFormsWithEmail(allowedPathnameUrlsPrestamospersonales[i].producto);
	  	    //jQuery(document).on("click",".m_btn.m_btn_inv",function(event){					
			//	event.preventDefault();	
			jQuery('.m_btn.m_btn_inv').attr('href','javascript:void(0);toggleModal();');
				//toggleModal();						
			//});	  	  
			evoBancaProductForm = allowedPathnameUrlsPrestamospersonales[i].producto;  
	  	    break;
	  	  }
	  	}
	}

	//CREATE CUSTOM MODAL FORM IN "Financiacion"
	var allowedHostnameFinanciacion = ['www.evobanco.com'];
  	var allowedPathnameUrlsFinanciacion = [	  		  		
	  		{'url':'/financiacion/', 'producto': 'Prestamos Personales'},
	  		{'url':'/financiacion/', 'producto': 'Aval'},	  			  	
  	];

  	if (allowedHostnameFinanciacion.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsFinanciacion.length; i++) {
	  	  if (allowedPathnameUrlsFinanciacion[i].url == document.location.pathname) { 	    
	  	    
			jQuery(document).on("click",".m_btn.m_btn_inv:eq(0)",function(event){		
				createJsCustomModalFormsWithEmail(allowedPathnameUrlsFinanciacion[0].producto);			
				evoBancaProductForm = allowedPathnameUrlsFinanciacion[0].producto; 
				event.preventDefault();	
				jQuery('.m_btn.m_btn_inv').attr('href','#');
				toggleModal();						
			});

			jQuery(document).on("click",".m_btn.m_btn_inv:eq(1)",function(event){		
				createJsCustomModalFormsWithEmail(allowedPathnameUrlsFinanciacion[1].producto);			
				evoBancaProductForm = allowedPathnameUrlsFinanciacion[1].producto; 
				event.preventDefault();	
				jQuery('.m_btn.m_btn_inv').attr('href','#');
				toggleModal();						
			});

			
	  	    break;
	  	  }
	  	}
	}

	/*var allowedHostnameEvoProtectEmail = ['evoprotect.evobanco.com'];
  	var allowedPathnameUrlsEvoProtectEmail  = [	  	
	  		{'url':'/', 'producto': 'Evo Protect Deportes'}
  	];

  	if (allowedHostnameEvoProtectEmail.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsEvoProtectEmail.length; i++) {
	  	  if (allowedPathnameUrlsEvoProtectEmail[i].url == document.location.pathname) {	  	    
	  	    createJsCustomModalFormsWithEmail(allowedPathnameUrlsEvoProtectEmail[i].producto);
	  	    //jQuery(document).on("click",".m_btn.m_btn_inv",function(event){					
			//	event.preventDefault();	
			jQuery('.btn-common.full-size.btn-common_fix_bold').attr('href','javascript:void(0);toggleModal();');
				//toggleModal();						
			//});	  	  
			evoBancaProductForm = allowedPathnameUrlsEvoProtectEmail[i].producto;   
	  	    break;
	  	  }
	  	}
	}*/
	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//APPLE PAY URL 1 
	var allowedHostnameApplePay = ['www.evobanco.com'];
  	var allowedPathnameUrlsApplePay = [	  	
	  		{'url':'/servicios-digitales/smartphone-banking/apple-pay/', 'producto': 'Apple Pay'},	
	  		{'url':'/smartphone-banking/', 'producto': 'Apple Pay'}  			  	
  	];

  	if (allowedHostnameApplePay.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsApplePay.length; i++) {
	  	  if (allowedPathnameUrlsApplePay[i].url == document.location.pathname) {	
	  	  	var userAgentTocheck = window.navigator.userAgent;
			//if (isMobile() && (userAgentTocheck.match(/iPad/i) || userAgentTocheck.match(/iPhone/i))) {
			if(isMobileSafari() == true){

			  
			   /*setTimeout(function(){ 
					window.location="shoebox://www.rm-static.com";
				}, 1000);*/
			   
			}else{

				createModalForms("¡Solo para tu dispositivo iOS!"); 
				jQuery('.m_btn.m_btn_arrow.m_btn_big').attr("href","#");
				jQuery(document).on("click",".m_btn.m_btn_arrow.m_btn_big",function(event){					
					event.preventDefault();						
					toggleModal();						
				});

			} 

			evoBancaProductForm =    allowedPathnameUrlsApplePay[i].producto; 
			/*if(isMobileAndroid()){

			   //console.log("Is mobile Android");
			   setTimeout(function(){ 
					jQuery("body").append('<a id="openWalletIosAndroid" style="display:none;" href="shoebox://www.rm-static.com" target="_blank">Ir a Wallet</a>');
	   				document.getElementById("openWalletIosAndroid").click();
				}, 1000);
			   
			} */ 	    	  	      
	  	    break;
	  	  }
	  	}
	}
	
	//SGAE - v2.contratacuenta.evobanco.com
	var allowedHostnameSGAE = ['v2.contratacuenta.evobanco.es'];
  	var allowedPathnameUrlsSGAE = [	  	
	  		{'url':'/?codRecommendation=SGAE&utm_source=enl_newsletter_SGAE&utm_medium=app&utm_campaign=SGAE'} ,
	  		{'url':'/?codRecommendation=SGAE&utm_source=enl_newsletter_SGAE&utm_medium=email&utm_campaign=SGAE'}  			  	
  	];

  	if (allowedHostnameSGAE.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsSGAE.length; i++) {
	  	  if (allowedPathnameUrlsSGAE[i].url == document.location.pathname + document.location.search) {	
	  	  

				createModalForms("<br><br><h4 class='h4-modal'>POR SER MIEMBRO DE YO CREO CULTURA<br>El CLUB DE FIDELIZACIÓN DE CLIENTES DE SGAE<br>DISFRUTA 6 MESES SIN REQUISITOS<br>EN TU CUENTA INTELIGENTE</h4><br>", "custom"); 
				//createModalForms("<br><br><h4 class='h4-modal'>POR SER MIEMBRO DE TOP BENEFITS,<br>DISFRUTA 6 MESES SIN REQUISITOS<br>EN TU CUENTA INTELIGENTE</h4><br>", "custom"); 
				toggleModal();	

			 	      
	  	    break;
	  	  }
	  	}
	}

	//TOP BENEFITS - v2.contratacuenta.evobanco.com
	var allowedHostnameTopBenefits = ['v2.contratacuenta.evobanco.es'];
  	var allowedPathnameUrlsTopBenefits = [	  	
	  		{'url':'/?codRecommendation=TopBenefits&utm_source=enl_top_benefits&utm_medium=banner&utm_campaign=TopBenefits'} 	
  	];

  	if (allowedHostnameTopBenefits.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsTopBenefits.length; i++) {
	  	  if (allowedPathnameUrlsTopBenefits[i].url == document.location.pathname + document.location.search) {	
	  	  

				//createModalForms("<br><br><h4 class='h4-modal'>POR SER MIEMBRO DE Yo CREO CULTURA<br>El CLUB DE FIDELIZACIÓN DE CLIENTES DE SGAE<br>DISFRUTA 6 MESES SIN REQUISITOS<br>EN TU CUENTA INTELIGENTE</h4><br>", "custom"); 
				createModalForms("<br><br><h4 class='h4-modal'>POR SER MIEMBRO DE TOP BENEFITS,<br>DISFRUTA 6 MESES SIN REQUISITOS<br>EN TU CUENTA INTELIGENTE</h4><br>", "custom"); 
				toggleModal();	

			 	      
	  	    break;
	  	  }
	  	}
	}

	//SPLIT 50% - v2.contratacuenta.evobanco.com
	/*var allowedHostnameSlit = ['v2.cuentainteligente.evobanco.com'];
  	var allowedPathnameUrlsSplit = [	  	
	  		{'url':'/'} 	
  	];

  	if (allowedHostnameSlit.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsSplit.length; i++) {
	  	  if (allowedPathnameUrlsSplit[i].url == document.location.pathname) {	
	  	  		
	  	  		var modalContent = 	"<br><br><h6 style='text-transform: inherit;font-size:16px;'>Bienvenido de nuevo al proceso de contratación<br>de la <span style='color: #f4137b;'>Cuenta Inteligente EVO<span></h6>";	  	  		
	  	  		modalContent += 	"<h6 style='text-transform: inherit;font-size:16px;'><span><img src='https://llamamegratis.es/evo/img/ico_evo_movil.png' style='position: relative;top:6px;height:35px;margin-right: 20px;'></span>";
	  	  		modalContent += 	"<span style='display: inline-block;'>Introduce tu número de teléfono móvil y<br>vuelve donde lo dejaste la última vez</span></h6><br>";

				createModalForms(modalContent, "", false); 

				toggleModal();	

				console.log('load modal');
			 	      
	  	    break;
	  	  }
	  	}
	}*/

	//COVID19
	

	
	/*var allowedHostnameCOVID19 = ['www.evobanco.com'];
  	var allowedPathnameUrlsCOVID19 = [	  	
	  		{'url':'/cajeros-y-oficinas/'}  			  	
  	];

  	if (allowedHostnameCOVID19.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsCOVID19.length; i++) {
	  	  if (allowedPathnameUrlsCOVID19[i].url == document.location.pathname) {		  	  
	  	  		

				contentCoVID = "<br><br><h5 class=''>En EVO, la salud de nuestros clientes y empleados es lo más importante.</br></br>Os comunicamos que hemos implantado el teletrabajo en toda la plantilla, incluidos los compañeros del Call Center y por ello, cerramos la oficina de Serrano desde el 17/03 hasta nuevo aviso. Seguimos disponibles en la WEB y en la APP.</h5><br>";
				contentCoVID +="<p style='color:#000;'>Actualiza tu Banca Móvil</p>";
	  	  		contentCoVID +='<div class="btnCol"><a style="margin-right: 10px;" class="social_icon ico_android" href=" http://bit.ly/2vg2Sm1" rel="nofollow" target="_blank"></a><a style="margin-left: 10px;" class="social_icon ico_apple" href="https://apple.co/3cVhnws" rel="nofollow" target="_blank"></a></div>';
			

				createModalForms(contentCoVID, "custom"); 
				toggleModal();				
	  	    break;
	  	  }
	  	}
	}*/
	

	//MODAL ALERTA FILOMENA

	/*
	var allowedHostnameAlertModalHome = ['www.evobanco.com'];
  	var allowedPathnameUrlsAlertModalHome = [	  	
	  		{'url':'/clientes/'},  	
	  		{'url':'/'	}		  	
  	];

  	if (allowedHostnameAlertModalHome.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsAlertModalHome.length; i++) {
	  	  if (allowedPathnameUrlsAlertModalHome[i].url == document.location.pathname) {		  	  
	  	  		

				contentAlertModalHome = "<br><br><p style='color:#000;'>Te informamos que, dado el estado de las carreteras, por motivos de seguridad, hasta que Filomena lo permita, <b>la oficina de Serrano de Madrid continuará cerrada</b>.</p></br></br>";
				contentAlertModalHome +="<p style='color:#000;'>Os mantendremos informados y recuerda que seguimos abiertos las 24 horas en nuestros canales online (la App y la web).</p><br><br>";
				contentAlertModalHome +="<p style='color:#000;'>Actualiza tu Banca Móvil</p>";
	  	  		contentAlertModalHome +='<div class="btnCol"><a style="margin-right: 10px;" class="social_icon ico_apple" href="https://apps.apple.com/app/id542752481" rel="nofollow" target="_blank"></a><a style="margin-left: 10px;" class="social_icon ico_android" href="https://play.google.com/store/apps/details?id=es.evobanco.bancamovil" rel="nofollow" target="_blank"></a></div>';
			

				createModalForms(contentAlertModalHome, "custom"); 
				toggleModal();				
	  	    break;
	  	  }
	  	}
	}
	*/

	//ANAIMACIÓN IMG FOOTER HOME - [2022-03-22 FBB]
	/*
		var allowedHostnameAlertModalHome = ['www.evobanco.com'];
		var allowedPathnameUrlsAlertModalHome = [ 
				{'url':'/'	},
				{'url':'/clientes/' }		  	
		];

		if (allowedHostnameAlertModalHome.indexOf(document.location.hostname) !== -1) {
			for (var i=0; i<allowedPathnameUrlsAlertModalHome.length; i++) {
			if (allowedPathnameUrlsAlertModalHome[i].url == document.location.pathname) {			

				try{ 
					var intAnimetedMap = false;			
					var observer = new IntersectionObserver(function(entries) { 
						//console.log(entries);
						if(entries[0]['isIntersecting'] === true) {
							if(entries[0]['intersectionRatio'] === 1)
								if(!intAnimetedMap){
									intAnimetedMap = true;
									console.log('Target map-marker is fully visible in screen');
									setTimeout(function() {
										$('.map-marker-3').find('img').fadeOut(1000, function() {
											$('.map-marker-3').find('img').attr("src",'https://www.evobanco.com/.galleries/home/logo-evo-gris.svg');
										}).fadeIn(1000);									
									},1500);				
									setTimeout(function() {
										$('.map-marker-3').find('img').fadeOut(1000, function() {
											$('.map-marker-3').css( "width", "auto");
											$('.map-marker-3').find('img').attr("src",'https://www.evobanco.com/.galleries/home/direccion-oficina-evo.svg');
										}).fadeIn(1000);									
									}, 3000);								
								}
							
							//else if(entries[0]['intersectionRatio'] > 0.5)
							//	console.log('More than 50% of target is visible in screen');
							//else
							//	console.log('Less than 50% of target is visible in screen');
							
						}
						//else {
							//console.log('Target is not visible in screen');
						//}
						}, { threshold: [0, 0.5, 1] });
					
					observer.observe(document.querySelector(".atm-map-markers"));	
				}catch(exception){		          
					console.log(exception);			  
				}

				
				
				break;
			}
			}
		}
	*/
	
	



	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//APPLE PAY URL 2
	var allowedHostnameApplePay2 = ['www.evobanco.com'];
  	var allowedPathnameUrlsApplePay2 = [	  	
	  		{'url':'/servicios-digitales/smartphone-banking/evo-con-apple-pay/', 'producto': 'Apple Pay 2'},	  			  	
  	];

  	if (allowedHostnameApplePay2.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsApplePay2.length; i++) {
	  	  if (allowedPathnameUrlsApplePay2[i].url == document.location.pathname) {	
	  	  	var userAgentTocheck = window.navigator.userAgent;
			//if (isMobile() && (userAgentTocheck.match(/iPad/i) || userAgentTocheck.match(/iPhone/i))) {
			if(isMobileSafari() == true ){

			   //console.log("Is mobile and Safari");			   
			   //window.location="<Shoebox://>";
			   setTimeout(function(){ 
					window.location="shoebox://www.rm-static.com";
				}, 1000);
			   
			}else{

				createModalForms("¡Solo para tu dispositivo iOS!"); 
				jQuery('.m_btn.m_btn_arrow.m_btn_big').attr("href","#");
				jQuery(document).on("click",".m_btn.m_btn_arrow.m_btn_big",function(event){					
					event.preventDefault();						
					toggleModal();						
				});

			} 
			evoBancaProductForm =    allowedPathnameUrlsApplePay2[i].producto; 	  	      
	  	    break;
	  	  }
	  	}
	}
	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//PRESENCE
	var allowedHostnameJsPresence = ['www.evobanco.com'];
	allowedPathnameUrlsJsPresence = [	  	
	  		{'url':'/aval/', 'producto':'Aval', 'idProduct':'11306'},
	  		/*{'url':'/prestamos-personales/', 'producto':'Prestamos Personales', 'idProduct':'11304'},*/
	  		//{'url':'/productos-inteligentes/inversion-rentable/fondo-inteligente/', 'producto':'Fondo Inteligente', 'idProduct':'11302'},
	  		//{'url':'/fondos-de-inversion/', 'producto':'Fondo de Inversion', 'idProduct':'11303'},
	  		//{'url':'/hipoteca/', 'producto':'Hipoteca', 'idProduct':'11305'},
	  		{'url':'/desarrollo-evobanco-uat/', 'producto':'Hipoteca', 'idProduct':'11305'},
	  		//{'url':'/productos-inteligentes/inversion-rentable/plan-inversion-inteligente/contratar/', 'producto':'Fondo de Inversion', 'idProduct':'11303'},
	  		
  	];     	 	    	
	  	    	 	    	
	setTimeout(function(){ 
    		if (allowedHostnameJsPresence[0] === document.location.hostname) {
		  	for (var i=0; i<allowedPathnameUrlsJsPresence.length; i++) {

		  			//console.log("HIPOTECA");
			  	  if (allowedPathnameUrlsJsPresence[i].url == document.location.pathname) {
		  	    		
		  	    			//console.log("HIPOTECA");

			  	    		idProductoC2C = (typeof allowedPathnameUrlsJsPresence[i].idProduct !='undefined')? allowedPathnameUrlsJsPresence[i].idProduct:'';	 
			  	    		
			  	    		isPresence = true;

							createJsCustomModalFormsC2C(allowedPathnameUrlsJsPresence[i].producto,allowedPathnameUrlsJsPresence[i].idProduct );	 

							jQuery('.m_btn.m_btn_inv').attr("href","#");
							jQuery('.m_btn.m_btn_inv').attr("onclick", "toggleModal();");

							//NEW HIPOTECA 2019-06-16 HEADER 
							jQuery('.tl-btn.tl-btn-pink.tl-btn-full').attr("href","#");
							jQuery('.tl-btn.tl-btn-pink.tl-btn-full').attr("onclick", "toggleModal();");
							//NEW HIPOTECA 2019-06-16 FOOTER
							jQuery('.tl-btn.tl-btn-pink').attr("href","#");
							jQuery('.tl-btn.tl-btn-pink').attr("onclick", "toggleModal();");

							evoBancaProductForm = allowedPathnameUrlsJsPresence[i].producto;
					  	    /*jQuery(document).on("click",".m_btn.m_btn_inv",function(event){					
								event.preventDefault();	
								jQuery('.m_btn.m_btn_inv').attr("href","#");
								toggleModal();						
							});*/
	 						break;
	 							  	    
			    }
			   
		  	}
		}          
	}, 500);

	/*var allowedHostnameJsPresenceHipotecaDev = ['www.evobanco.com'];
	allowedPathnameUrlsJsPresenceHipotecaDev = [ 	
	  		// 11311 >>  C2C FORMULARIO HIPOTECA SIMULADOR 
	  		{'url':'/desarrollo/', 'producto':'Hipoteca', 'idProduct':'11311'},	  		
  	];     	 	    	
	  	    	 	    	
	setTimeout(function(){ 
    		if (allowedHostnameJsPresenceHipotecaDev[0] === document.location.hostname) {
		  	for (var i=0; i<allowedPathnameUrlsJsPresenceHipotecaDev.length; i++) {
			  	  if (allowedPathnameUrlsJsPresenceHipotecaDev[i].url == document.location.pathname) {
	  	    			jQuery('.tl-btn.tl-btn-pink.tl-btn-full').each( function( index, element ){
	  	    				
	  	    				console.log(jQuery( this ).attr('id') );

  	    					if(jQuery( this ).attr('id') !='btn-simulate'){

						        if(isMobile() && jQuery( this ).text().indexOf('TALA YA') > -1) {

						            jQuery( this ).text('¡SIMULA YA!');
						            //jQuery( this ).attr("href","//simuladorhipoteca.evobanco.com");
						            jQuery( this ).attr("href","https://svc.evobanco.com/simuladorhipoteca/#/simulador/propietarios");
						            jQuery( this ).attr("target","_blank");
						        }else{
						          idProductoC2C = (typeof allowedPathnameUrlsJsPresenceHipotecaDev[i].idProduct !='undefined')? allowedPathnameUrlsJsPresenceHipotecaDev[i].idProduct:'';	 
						  	    		
						  	    		isPresence = true;
										createJsCustomModalFormsC2C(allowedPathnameUrlsJsPresenceHipotecaDev[i].producto,allowedPathnameUrlsJsPresenceHipotecaDev[i].idProduct );	 


										//NEW HIPOTECA 2019-06-16 HEADER 
										jQuery( this ).attr("href","#");
										jQuery( this ).attr("onclick", "toggleModal();");

										//NEW HIPOTECA 2019-06-16 FOOTER
										//jQuery('.tl-btn.tl-btn-pink').attr("href","#");
										//jQuery('.tl-btn.tl-btn-pink').attr("onclick", "toggleModal();");

										evoBancaProductForm = allowedPathnameUrlsJsPresenceHipotecaDev[i].producto;
						        }
						    }						        
					    });  
				  	    	
			 		jQuery('#btn-simulate').attr("onclick", ""); 
			 		//jQuery('#btn-simulate').attr("href","//simuladorhipoteca.evobanco.com");
			 		jQuery('#btn-simulate').attr("href","https://svc.evobanco.com/simuladorhipoteca/#/simulador/propietarios");
					jQuery('#btn-simulate').attr("target","_blank");

	 				break;		  	    
			    }
			   
		  	}
		}          
	}, 500);*/


	/* PABLO CERQUEIRO >>>  Descomenta la línea 2753 //{'url':'/hipoteca/', 'producto':'Hipoteca', 'idProduct':'11311'}*/
	var allowedHostnameJsPresenceHipotecaPro = ['www.evobanco.com'];
	allowedPathnameUrlsJsPresenceHipotecaPro = [ 
		//Antiguo id de servicio en Presence de Hipoteca {'url':'/hipoteca/', 'producto':'Hipoteca', 'idProduct':'11305'}
	  	{'url':'/hipoteca/', 'producto':'Hipoteca', 'idProduct':'11311'},
		{'url':'/desarrollo/', 'producto':'Hipoteca', 'idProduct':'11311'},
	  	{'url':'/hipoteca-joven/', 'producto':'Hipoteca Joven', 'idProduct':'11311'},
		{'url':'/hipoteca-inteligente/', 'producto':'Hipoteca', 'idProduct':'11311'},
		{'url':'/hipoteca-inteligente-final/', 'producto':'Hipoteca', 'idProduct':'11311'},
  	];
	  	    	 	    	
	setTimeout(function(){ 
    		if (allowedHostnameJsPresenceHipotecaPro[0] === document.location.hostname) {
		  	for (var i=0; i<allowedPathnameUrlsJsPresenceHipotecaPro.length; i++) {
			  	  if (allowedPathnameUrlsJsPresenceHipotecaPro[i].url == document.location.pathname) {

  	    			jQuery('.tl-btn.tl-btn-pink.tl-btn-full').each( function( index, element ){
  	    				
  	    				//console.log(jQuery( this ).attr('id') );

						if(jQuery( this ).attr('id') !='btn-simulate'){

							/*if(jQuery( this ).text().indexOf('TALA YA') > -1){
								jQuery( this ).text('¡SIMULA YA!');
								//jQuery( this ).attr("href","https://simuladorhipoteca.evobanco.com:1443");
								jQuery( this ).attr("href","#");
								jQuery( this ).attr("onclick", "openSimuladorhipotecaUrl()");
								jQuery( this ).attr("target","_blank")
							}*/
							if(isMobile() && jQuery( this ).text().indexOf('LA YA') > -1 && jQuery( this ).attr('id') !='CTA_Hipoteca_Fijo10') {
								
								jQuery( this ).text('¡SIMULA YA!');								
								jQuery( this ).attr("href","#");
								//[2023-02-16] FBB  Cambios CTA Mobile JIRA WE-109
								jQuery( this ).attr("onclick", "openSimuladorhipotecaUrl('"+jQuery( this ).attr('id')+"'))");
								//jQuery( this ).attr("onclick", "trackBtnEvent('CTA', 'Comenzar simulación', ' Simulación Hipoteca', '"+jQuery( this ).attr('id')+"')");
								
							}else{
								//console.log(jQuery( this ).text());
								//console.log("Desktop update");
								
								if(jQuery( this ).attr('id') !='HI_Portal_Hipotecario'){
									//[2023-02-16] FBB  Cambios CTA Desktop JIRA WE-109
									jQuery( this ).text('Comienza tu simulación');
									jQuery( this ).attr("href","#");
									jQuery( this ).attr("onclick", "window.scrollTo(0, 0);trackBtnEvent('CTA', 'Comenzar simulación', ' Simulación Hipoteca', '"+jQuery( this ).attr('id')+"')");
								  
									//[FBB] pruebas en /desarrollo quitamos texto botón y scroll to top
									/*if(isPathUAT()){
										jQuery( this ).text('Comienza tu simulación');
										jQuery( this ).attr("href","#");
										jQuery( this ).attr("onclick", "window.scrollTo(0, 0);trackBtnEvent('CTA', 'Comenzar simulación', ' Simulación Hipoteca', '"+jQuery( this ).attr('id')+"')");
								   
								   }else{
										idProductoC2C = (typeof allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct !='undefined')? allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct:'';	 
										isPresence = true;
										createJsCustomModalFormsC2C(allowedPathnameUrlsJsPresenceHipotecaPro[i].producto,allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct );	 											
										jQuery( this ).attr("href","#");
										jQuery( this ).attr("onclick", "toggleModal();trackEvent("+jQuery( this ).attr('id')+");");
										console.log(jQuery( this ).attr('id'));
										evoBancaProductForm = allowedPathnameUrlsJsPresenceHipotecaPro[i].producto;
										//[FBB 2022-02-10] Eventos nuevos para seción Hipoteca
										//evoBancaTypeForm = jQuery( this ).attr('id');
										//eventActionCtaHipotecaJoven = jQuery( this ).attr('id');
									}
									*/
								}
							}

						
						}

					   				        
				    });  

				    jQuery('.tl-btn.tl-btn-pink').each( function( index, element ){	
					    
							if(isMobile() && jQuery( this ).text().indexOf('LA YA') > -1 && jQuery( this ).attr('id') !='CTA_Hipoteca_Fijo10') {					            
					            jQuery( this ).text('¡SIMULA YA!');
								//[2023-02-16] FBB  Cambios CTA Mobile JIRA WE-109
					            jQuery( this ).attr("onclick", "openSimuladorhipotecaUrl('"+jQuery( this ).attr('id')+"')"); 								
					            jQuery( this ).attr("href","#");
								
					        }else{
							   
								if(jQuery( this ).attr('id') !='HI_Portal_Hipotecario'){
									//[2023-02-16] FBB  Cambios CTA Desktop JIRA WE-109
									jQuery( this ).text('Comienza tu simulación');
									jQuery( this ).attr("href","#");
									jQuery( this ).attr("onclick", "window.scrollTo(0, 0);trackBtnEvent('CTA', 'Comenzar simulación', ' Simulación Hipoteca', '"+jQuery( this ).attr('id')+"')");
								  

									//[FBB] pruebas en /desarrollo quitamos texto botón y scroll to top
									/*if(isPathUAT()){
										jQuery( this ).text('Comienza tu simulación');
										jQuery( this ).attr("href","#");
										jQuery( this ).attr("onclick", "window.scrollTo(0, 0);trackBtnEvent('CTA', 'Comenzar simulación', ' Simulación Hipoteca', '"+jQuery( this ).attr('id')+"')");
								   }else{
										idProductoC2C = (typeof allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct !='undefined')? allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct:'';	 
										isPresence = true;
										createJsCustomModalFormsC2C(allowedPathnameUrlsJsPresenceHipotecaPro[i].producto,allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct );	 											
										jQuery( this ).attr("href","#");
										jQuery( this ).attr("onclick", "toggleModal();trackEvent('"+jQuery( this ).attr('id')+"');");
										evoBancaProductForm = allowedPathnameUrlsJsPresenceHipotecaPro[i].producto;
									}*/
								}
					        }
					        
					       
					    			        
				    });

				    // HIPOTECA-JOVEN
					// [2021-07-08] PCC Activar el 12 de julio
					jQuery('.m_btn.m_btn_inv').each( function( index, element ){
						if (jQuery( this ).text().toUpperCase().indexOf('LA QUIERO') > -1) {
							const idBtn = (typeof jQuery( this ).attr('id') !== 'undefined') ? jQuery( this ).attr('id') : '';
							idProductoC2C = (typeof allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct !='undefined')? allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct:'';
							isPresence = true;
							createJsCustomModalFormsC2C(allowedPathnameUrlsJsPresenceHipotecaPro[i].producto,allowedPathnameUrlsJsPresenceHipotecaPro[i].idProduct );
							jQuery( this ).attr("href","#");
							jQuery( this ).attr("onclick", "toggleModal(); sendToDataLayerAnalyticsCTCopened('" + idBtn + "');");
							evoBancaProductForm = allowedPathnameUrlsJsPresenceHipotecaPro[i].producto;
						}
					});
				  	    	
			 		//jQuery('#btn-simulate').attr("onclick", ""); 
			 		jQuery('#btn-simulate').attr("onclick", "openSimuladorhipotecaUrl()");
			 		//jQuery('#btn-simulate').attr("href","https://svc.evobanco.com/simuladorhipoteca/#/inicio");
			 		jQuery('#btn-simulate').attr("href","#");
					//jQuery('#btn-simulate').attr("target","_blank");
	
	 				break;		  	    
			    }
			   
		  	}
		}          
	}, 500);
	/* PABLO CERQUEIRO */

	var allowedHostnameJsPresenceCoinc = ['contratacuenta.evobanco.es'];
	allowedPathnameUrlsJsPresenceCoinc = [	  	
		{'url':'/pruebasCoinc/', 'producto':'Coinc', 'idProduct':'11309'},
	  	{'url':'/por-ser-cliente-de-coinc/', 'producto':'Coinc', 'idProduct':'11309'}
	  		
  	];     	 	    	
	  	    	 	    	
	setTimeout(function(){ 
		if (allowedHostnameJsPresenceCoinc[0] === document.location.hostname ) {

				jQuery('head').append('<script type="text/javascript" src="//llamamegratis.es/evo/js/main.js"></script>');
				jQuery("head").append("<link href='//llamamegratis.es/evo/css/modal.css' type='text/css' rel='stylesheet' media='all'/>");

		  		for (var i=0; i<allowedPathnameUrlsJsPresenceCoinc.length; i++) {
			  	  if (allowedPathnameUrlsJsPresenceCoinc[i].url == document.location.pathname) {
		  	    		
		  	    		idProductoC2C = (typeof allowedPathnameUrlsJsPresenceCoinc[i].idProduct !='undefined')? allowedPathnameUrlsJsPresenceCoinc[i].idProduct:'';	 
		  	    		
		  	    		isPresence = true;

						createJsCustomModalFormsC2CCoinc(allowedPathnameUrlsJsPresenceCoinc[i].producto,allowedPathnameUrlsJsPresenceCoinc[i].idProduct );	 

						jQuery("a[id*='CTC_']").attr("href","#");
						//jQuery("a[id*='CTC_']").attr("onclick", "toggleModalMain(this.id);");
						evoBancaProductForm = allowedPathnameUrlsJsPresenceCoinc[i].producto;			  	    
					
 						break;				  	    
				}						   
		  	}

		  	if( window.location.search.indexOf('utm_source=enl_mail_te_llamamos&utm_medium=email&utm_campaign=COINC')>=0 ||
				window.location.search.indexOf('utm_source=enlace_mail_te_llamamos&utm_medium=email&utm_campaign=COINC')>=0 ||	
				window.location.search.indexOf('utm_source=enl_mail_te_llamamos-EVO&utm_medium=email&utm_campaign=COINC')>=0){													
					setTimeout(toggleModalMain(null),5000);		
			}


		} 


	}, 500);

	//[2021-10-11] Añaidmos addEventListener para disparar Modal C2C para un selector con Id==C2C_???
	!function() {

		var allowedHostnameEvobanco = ['www.evobanco.com'];
		var allowedPathnameUrlsInversionBroker = 
		[
			'/inversion/', 
			'/hipoteca/colectivos-evo/dxc/',
			'/hipoteca/colectivos-evo/alten', 
			'/hipoteca/colectivos-evo/optimissa',
			'/hipoteca/hipoteca-variable/',
			'/hipoteca/hipoteca-mixta/',
			'/hipoteca/hipoteca-fija/',
			'/productos-inteligentes/prevision-y-seguros/caja-fuerte/',
			'/servicios-digitales/smartphone-banking/hucha-inteligente/',
			'/productos-inteligentes/inversion-rentable/plan-inversion-inteligente/',
			'/productos-inteligentes/inversion-rentable/fondo-inteligente/',
			'/fondos-de-inversion/',
			'/fondos-de-inversion/categorias/fondos-mas-vendidos/',
			'/fondos-de-inversion/categorias/',
			'/fondos-de-inversion/como-empezar-a-invertir/',
			'/cuentas/segunda-cuenta-inteligente/',
			'/cuentas/depositos-evo/',
			'/cuentas/depositos/',
			'/cuentas/deposito/',
			'/cuentas/deposito-12-meses/',
			'/cuentas/deposito-6-meses/',
			'/depositos/',
			// [FBB 2023-10-16] Cambio pedido, nuevas urls para c2c depositos
			'/deposito-evo/',
			'/depositos-evo/',
			'/deposito-12-meses/',
			'/deposito-6-meses/',
			'/deposito-4-meses/',
			'/deposito-evo-4-meses/'
		];

		if (allowedHostnameEvobanco.indexOf(document.location.hostname) !== -1) {
			for (var i = 0; i < allowedPathnameUrlsInversionBroker.length; i++) {
				if (document.location.pathname.indexOf(allowedPathnameUrlsInversionBroker[i] )>-1) {
					jQuery("head").append('<script src="//llamamegratis.es/evo/js/ui.js"></script>');					
					appendCssModalC2C();
					//[2022-12-12] FBB execute if exist param in url to C2C from eamil
					createCallByPhoneInUrlParam("userpdata");
				}
			}
		}

		if(document.location.hostname + document.location.pathname == 'llamamegratis.es/evo/landing/evoahorro/inversion/especialistas-de-inversion/' 
		|| (document.location.hostname + document.location.pathname).indexOf("evoahorro.com/")>=0
		|| document.location.hostname + document.location.pathname == 'v2.cuentainteligenteuat.evobanco.com/'
		|| document.location.hostname + document.location.pathname == 'v2.cuentainteligente.evobanco.com/'){
			jQuery("head").append('<script src="//llamamegratis.es/evo/js/ui.js"></script>');					
			appendCssModalC2C();
		}		
		

		document.addEventListener('click', function (event) {
		//console.log(event.target);		
		// If the clicked element doesn't have the right selector, bail
		if (event.target.id && event.target.id.indexOf("C2C_")>=0){
			
			//console.log(event.target.id);		  
			switch (event.target.id) {
				case 'C2C_HI_Error_Identificación': 
				//openModalpedirCita('');
				//transformModalToC2CHipoteca();           
				break;
				case 'C2C_HI_Error_CInteligente':            
				break;
				case 'C2C_broker_traer': 
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Valores',11313);
					evoBancaProductForm = 'Valores'; 
					eventActionCtaHipotecaJoven = 'C2C_Traer_Acciones'; 
					dataLayer.push({
						event: "CTA",
						eventCategory: "Broker Inteligente",
						eventAction: "C2C_Traer_Acciones",
						eventLabel: "Abre C2C"
					});   
					toggleModal();     
				break;
				case 'C2C_broker': 
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Valores',11313);
					evoBancaProductForm = 'Valores'; 
					eventActionCtaHipotecaJoven = 'C2C_Ayuda';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Broker Inteligente",
						eventAction: "C2C_Ayuda",
						eventLabel: "Abre C2C"
					});
					toggleModal();           
				break;
				case 'C2C_hipoteca':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Hipoteca',11311);
					evoBancaProductForm = 'Hipoteca'; 
					eventActionCtaHipotecaJoven = 'C2C_Hipoteca';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Hipoteca",
						eventAction: "C2C_Hipoteca",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_DXC':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('DXC',11311);
					evoBancaProductForm = 'DXC'; 
					eventActionCtaHipotecaJoven = 'DXC';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Simulación Hipoteca",
						eventAction: "Acceso a contratación hipoteca - DXC",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_optimissa':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Optimissa',11311);
					evoBancaProductForm = 'Optimissa'; 
					eventActionCtaHipotecaJoven = 'Optimissa';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Simulación Hipoteca",
						eventAction: "Acceso a contratación hipoteca - Optimissa",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_alten':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Alten',11311);
					evoBancaProductForm = 'Alten'; 
					eventActionCtaHipotecaJoven = 'Alten';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Simulación Hipoteca",
						eventAction: "Acceso a contratación hipoteca - Alten",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_Hipoteca-variable':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Hipoteca_variable',11311);
					evoBancaProductForm = 'Hipoteca_variable'; 
					eventActionCtaHipotecaJoven = 'Hipoteca_variable';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Simulación Hipoteca",
						eventAction: "Acceso a contratación Hipoteca_variable",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_Hipoteca-mixta':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Hipoteca_mixta',11311);
					evoBancaProductForm = 'Hipoteca_mixta'; 
					eventActionCtaHipotecaJoven = 'Hipoteca_mixta';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Simulación Hipoteca",
						eventAction: "Acceso a contratación Hipoteca_mixta",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_Hipoteca-fija':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('Hipoteca_fija',11311);
					evoBancaProductForm = 'Hipoteca_fija'; 
					eventActionCtaHipotecaJoven = 'Hipoteca_fija';  
					dataLayer.push({
						event: "CTA",
						eventCategory: "Simulación Hipoteca",
						eventAction: "Acceso a contratación Hipoteca_fija",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_ayuda_multicuenta_Web':
					//[2023-06-01] FBB Cambios C2C Multicuenta id 11315 eventos GTM
					event.preventDefault();
					idCTAValue = event.target.id.split('C2C_')[1];
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR(idCTAValue,11315);
					evoBancaProductForm = 'C2C_segunda_cuenta'; 						
					eventActionCtaHipotecaJoven = event.target.id;  
					console.log(eventActionCtaHipotecaJoven);
					dataLayer.push({
						event: "CTA",
						eventCategory: convertIdC2CToString(event.target.id),
						//eventAction: "C2C_" + idCTAValue ,
						eventAction: "C2C_segunda_cuenta",
						eventLabel: "Abre C2C"
					});
					toggleModal();            
				break;
				case 'C2C_deposito':case 'C2C_Depositos':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('C2C_Ayuda',11313);
					evoBancaProductForm = 'C2C_deposito';
					eventActionCtaHipotecaJoven = convertIdC2CToString(event.target.id);  
					dataLayer.push({
						event: "CTA",
						eventCategory: convertIdC2CToString(event.target.id),
						eventAction: "C2C_Ayuda",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_deposito_4':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('C2C_Ayuda_4meses',11313);
					evoBancaProductForm = 'C2C_deposito_4';
					eventActionCtaHipotecaJoven = convertIdC2CToString(event.target.id);  
					dataLayer.push({
						event: "CTA",
						eventCategory: convertIdC2CToString(event.target.id),
						eventAction: "C2C_Ayuda_4meses",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_deposito_6':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('C2C_Ayuda_6meses',11313);
					evoBancaProductForm = 'C2C_deposito_6'; 
					eventActionCtaHipotecaJoven = convertIdC2CToString(event.target.id);  
					dataLayer.push({
						event: "CTA",
						eventCategory: convertIdC2CToString(event.target.id),
						eventAction: "C2C_Ayuda_6meses",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				//[2023-03-01] FBB C2C página depósitos a 4 y 6 meses
				case 'C2C_deposito_12':
					isPresence = true;
					createJsCustomModalFormsC2CBroker_NODAYHOUR('C2C_Ayuda_12meses',11313);
					evoBancaProductForm = 'C2C_deposito_12'; 
					eventActionCtaHipotecaJoven = convertIdC2CToString(event.target.id);  
					dataLayer.push({
						event: "CTA",
						eventCategory: convertIdC2CToString(event.target.id),
						eventAction: "C2C_Ayuda_12meses",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				case 'C2C_display':
					//[2023-06-01] FBB Si añade id Genesys 11312
					isPresence = true;
					//createJsCustomModalFormsC2CBroker_NODAYHOUR('C2C_display', (document.location.hostname + document.location.pathname == 'v2.cuentainteligenteuat.evobanco.com/')? 11312 : 11313);
					createJsCustomModalFormsC2CBroker_NODAYHOUR('C2C_display', 11312);
					evoBancaProductForm = 'C2C_display'; 
					eventActionCtaHipotecaJoven = 'C2C_display';  
					dataLayer.push({
						event: "CTA",
						eventCategory: convertIdC2CToString(event.target.id),
						eventAction: "C2C_display",
						eventLabel: "Abre C2C"
					});
					toggleModal();              
				break;
				default:  
					if(event.target.id.split('C2C_').length>1){
						event.preventDefault();
						idCTAValue = event.target.id.split('C2C_')[1];
						isPresence = true;
						createJsCustomModalFormsC2CBroker_NODAYHOUR(idCTAValue,11313);
						evoBancaProductForm = idCTAValue; 						
						eventActionCtaHipotecaJoven = event.target.id;  
						console.log(eventActionCtaHipotecaJoven);
						dataLayer.push({
							event: "CTA",
							eventCategory: convertIdC2CToString(event.target.id),
							eventAction: "C2C_" + idCTAValue ,
							eventLabel: "Abre C2C"
						});
						toggleModal(); 
					}					 
				break; 
			}        
		}

		if (event.target.class && event.target.class.indexOf("form-wph-modal-close-button")>=0){
			//toggleModal();
			console.log(" click >> form-wph-modal-close-button");
			const evomodals = document.querySelectorAll('#form-wph-modal');
			evomodals.forEach(box => {
				evomodals.remove();
			});
		}

		//[2023-08-02] FBB detect click c2c despositos
		//[2023-08-03] FBB Añade c2c function loadWphXMLDocOutScheduleC2C recupera values por id de botón y phoneSanitized
		//TODO: Comprobar si existen nodos al hacer document.getElementsByName('')[0] o [1] 
		//TODO: Revisar si los ids de botones e inputs en las landings de depositos serán siempre button_call-center(2), cajaWphPhone, cajaWphName
		if (event.target.id && (event.target.id == "button_call-center" || event.target.id == "button_call-center2")){
			//console.log(event.target.id);
	 		var phoneNumberValue =  event.target.id == 'button_call-center'? document.getElementsByName('cajaWphPhone')[0]:document.getElementsByName('cajaWphPhone')[1];	
	 		var nameValue = event.target.id == 'button_call-center'? document.getElementsByName('cajaWphName')[0]:document.getElementsByName('cajaWphName')[1];
			if(/^[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+$/.test(nameValue.value)){	
				var phoneSanitized = phoneNumberValue.value.replace('+34 ', '');
				if(/[6789][0-9]{8}/.test(phoneSanitized)){	
					//console.log(phoneSanitized);
					evoBancaProductForm = 'C2C_deposito';
					eventActionCtaHipotecaJoven = convertIdC2CToString(event.target.id);				
					loadWphXMLDocOutScheduleC2C(phoneSanitized, nameValue.value, '11313', new Date().getDate()+"-"+ (new Date().getMonth()+1) +"-"+ new Date().getFullYear(), getCurrentTimeWph(), 'now');	
				}else{
					console.log('Debes introducir un teléfono válido');			
				}				
			}else{			
				console.log('Debes introducir tu nombre');
			}	
		}
			
		}, false)
			
	}();


	//https://www.evobanco.com/MundoEVO/

  	/*var allowedHostnameMundoEVO = ['www.evobanco.com'];
  	var allowedPathnameUrlsMundoEVO = [	  	
	  		{'url':'/MundoEVO/'},	  			  	
  	];

  	if (allowedHostnameMundoEVO.indexOf(document.location.hostname) !== -1) {
  		console.log(allowedPathnameUrlsMundoEVO);
	  	for (var i=0; i<allowedPathnameUrlsMundoEVO.length; i++) {
	  	  if (allowedPathnameUrlsMundoEVO[i].url == document.location.pathname) {	
	  	  	

	  	  	if( window.location.search == ''){													
					window.location.replace(" https://www.evobanco.com/404/");	
			} 	      
	  	    break;
	  	  }
	  	}
	}   
	*/	 	    	
	  	    	 	    	
	


	

	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/
	//thinkids
	var allowedHostnameThinkids = ['www.evobanco.com'];
	var pathnameUrlThinkids = '/servicios-digitales/promociones-evo-banco/thinkids/';
	var allowedPathnameUrlsThinkids = [pathnameUrlThinkids];

	if (allowedHostnameThinkids.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsThinkids.length; i++) {
		if (allowedPathnameUrlsThinkids[i] == document.location.pathname) {
			var newsletterType = 'thinkids';
			jQuery('head').append('<script type="text/javascript" id="newsletterFormsJs" data-type="'+newsletterType+'" src="' + currentProtocoloWph + '//llamamegratis.es/evo/js/newsletter-forms.js"></script>');
			break;
		}
		}
	}	

	//Newsletter
	var allowedHostnameNewsletter = ['www.evobanco.com'];
	var pathnameUrlSubscribe = '/productos-inteligentes/inversion-rentable/ideas-de-inversion/';
	var pathnameUrlUnSubscribe = '/productos-inteligentes/inversion-rentable/ideas-de-inversion/baja/';
	var allowedPathnameUrlsNewletter = [pathnameUrlSubscribe, pathnameUrlUnSubscribe];

	if (allowedHostnameNewsletter.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsNewletter.length; i++) {
		  if (allowedPathnameUrlsNewletter[i] == document.location.pathname) {
		  	var newsletterType = (document.location.pathname == pathnameUrlSubscribe) ? 'subcribe' : 'unsubcribe';
			jQuery('head').append('<script type="text/javascript" id="newsletterFormsJs" data-type="'+newsletterType+'" src="' + currentProtocoloWph + '//llamamegratis.es/evo/js/newsletter-forms.js"></script>');
			break;
		  }
		}
	}

	//[2024-03-08] FBB Nuevo form para promoción móvil Samsung
	//Promo Samsung
	var allowedHostnameThinkids = ['www.evobanco.com'];
	var pathnameUrlThinkids = '/promocion-cliente-evo/';
	var allowedPathnameUrlsThinkids = [pathnameUrlThinkids];

	if (allowedHostnameThinkids.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsThinkids.length; i++) {
		if (allowedPathnameUrlsThinkids[i] == document.location.pathname) {
			var newsletterType = 'subcribe';
			jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/forms-new-custom-version.css' type='text/css' rel='stylesheet' media='all'/>");

			jQuery('head').append('<script type="text/javascript" id="promoSamsungRegFormsJs" data-type="'+newsletterType+'" src="' + currentProtocoloWph + '//llamamegratis.es/evo/js/promo-samsung-forms.js"></script>');
			break;
		}
		}
	}	

	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	//if (typeof localStorage !== 'undefined' && localStorage.getItem('wph_dev') && localStorage.getItem('wph_dev') == "true") {
		//console.log("wph dev");

	//[PCC 2021-07-13]
	//beta-valores/registro
	var allowedHostnameBetaValues = ['www.evobanco.com'];
	var pathnameUrlBetaValuesSubscribe = '/productos-inteligentes/inversion-rentable/beta-valores/registro/';
	//var pathnameUrlBetaValuesUnSubscribe = '/productos-inteligentes/inversion-rentable/beta-valores/registro/baja/';
	var pathnameUrlBetaValuesUnSubscribe = '';
	var allowedPathnameUrlsBetaValues = [pathnameUrlBetaValuesSubscribe, pathnameUrlBetaValuesUnSubscribe];

	if (allowedHostnameBetaValues.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsBetaValues.length; i++) {
			if (allowedPathnameUrlsBetaValues[i] == document.location.pathname) {
				var betaValuesType = (document.location.pathname == pathnameUrlBetaValuesSubscribe) ? 'subcribe' : 'unsubcribe';
				jQuery('head').append('<script type="text/javascript" id="betaValuesRegFormsJs" data-type="'+betaValuesType+'" src="' + currentProtocoloWph + '//llamamegratis.es/evo/js/beta-values-forms.js"></script>');
				break;
			}
		}
	}

	//}

	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/
	
	//Betatester 
	var allowedHostnameBetatester = ['www.evobanco.com'];
	var allowedHostnameBetatesterAll = '/productos-inteligentes/inversion-rentable/betatester/';
	var allowedHostnameBetatesterAndroid = '/productos-inteligentes/inversion-rentable/betatester-android/';
	var allowedHostnameBetatesterIos = '/productos-inteligentes/inversion-rentable/betatester-ios/';
	var allowedPathnameUrlsBetatester = [allowedHostnameBetatesterAll, allowedHostnameBetatesterAndroid, allowedHostnameBetatesterIos];

	if (allowedHostnameBetatester.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsBetatester.length; i++) {
		  if (allowedPathnameUrlsBetatester[i] == document.location.pathname) {
		  	var betatesterType = (document.location.pathname == allowedHostnameBetatesterAll) ? 'betatester-all' : (document.location.pathname == allowedHostnameBetatesterAndroid) ? 'betatester-android':'betatester-ios';
		  	//console.log(betatesterType);
		  	jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
			jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="betatesterFormsJs" data-type="'+betatesterType+'" src="//llamamegratis.es/evo/js/betatester-forms.js"></script>');			
			break;
		  }
		}
	}
	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//Betatester Baja
	var allowedHostnameBetatesterBaja = ['www.evobanco.com'];
	var allowedPathnameUrlsBetatesterBaja = ['/productos-inteligentes/inversion-rentable/betatester-baja/'];

	if (allowedHostnameBetatesterBaja.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsBetatesterBaja.length; i++) {
		  if (allowedPathnameUrlsBetatesterBaja[i] == document.location.pathname) {
		  	var betatesterType ='betatesterBajaFormsJs';
		  	//console.log(betatesterType);
		  	//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
			jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="betatesterBajaFormsJs" data-type="'+betatesterType+'" src="//llamamegratis.es/evo/js/betatesterbaja-forms.js"></script>');			
			break;
		  }
		}
	}

	
	/****** ****** ******** ****** ******** ******** ****** ******** ****** ******** ****** ********/

	
	//Landing Webphone https://www.evobanco.com/webphone
	var allowedHostnameLandingWebphone = ['www.evobanco.com'];
	var allowedPathnameUrlsLandingWebphone = ['/webphone/'];

	if (allowedHostnameLandingWebphone.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsLandingWebphone.length; i++) {
		  if (allowedPathnameUrlsLandingWebphone[i] == document.location.pathname) {
		  	jQuery('.botonLlamar').text('Te llamamos gratis');
		  	jQuery('span a.botonLlamar').addClass('m_btn m_btn_std m_btn_small');
		  	break;
		  }
		}
	}

	//PEDIR CITA https://www.evobanco.com/donde-estamos/
	var allowedHostnameDondeEstamos = ['www.evobanco.com'];
	var allowedPathnameUrlsDondeEstamos = ['/donde-estamos/'];

	if (allowedHostnameDondeEstamos.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsDondeEstamos.length; i++) {
		  if (allowedPathnameUrlsDondeEstamos[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='dondeEstamosFormjs';
		  	//console.log(dondeEstamosFormjs);
		  	//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
			jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="dondeEstamosFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCita.js"></script>');			
			break;
		  }
		}
	}

	//PEDIR CITA nueva VERSIÓN Salesforce https://www.evobanco.com/cajeros-y-oficinas/
	var allowedHostnameDondeEstamos = ['www.evobanco.com'];
	var allowedPathnameUrlsDondeEstamos = ['/cajeros-y-oficinas/','/hdhvvsugds6743sgsihdskah9/cajeros-y-oficinas/'];

	if (allowedHostnameDondeEstamos.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsDondeEstamos.length; i++) {
		  if (allowedPathnameUrlsDondeEstamos[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  	//console.log(dondeEstamosFormjs);
		  	//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
				jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce-v2.js"></script>');
			break;
		  }
		}
	}

	var allowedHostnameSimuladorHipotecas = ['apps-evo-msa.innocv.com'];
	var allowedPathnameUrlsSimuladorHipoteca = ['/simulador-hipotecas/'];

	if (allowedHostnameSimuladorHipotecas.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsSimuladorHipoteca.length; i++) {
		  if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  		//console.log(dondeEstamosFormjs);
		  		//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
				if(document.getElementById("wphHipotecaFormjs") == null){
					jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
				}
			break;
		  }
		}
	}

	var allowedHostnameSimuladorHipotecas = ['apidev.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipoteca = ['/evobanco/apps/simulador-hipotecas/'];

	if (allowedHostnameSimuladorHipotecas.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsSimuladorHipoteca.length; i++) {
		  if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  		//console.log(dondeEstamosFormjs);
		  		//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
				if(document.getElementById("wphHipotecaFormjs") == null){
					jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
				}
			break;
		  }
		}
	}

	var allowedHostnameSimuladorHipotecas = ['apiuat.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipoteca = ['/evobanco/apps/simulador-hipotecas/'];

	if (allowedHostnameSimuladorHipotecas.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsSimuladorHipoteca.length; i++) {
		  if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  		//console.log(dondeEstamosFormjs);
		  		//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
				if(document.getElementById("wphHipotecaFormjs") == null){
					jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
				}
			break;
		  }
		}
	}
	/** SIMUALDOR HIPOTECA  **/

	/** PORTAL HIPOTECA  **/
	var allowedHostnameSimuladorHipotecasLogin = ['apiuat.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipotecaLogin = ['/evobanco/apps/portal-hipotecas/login'];

	if (allowedHostnameSimuladorHipotecasLogin.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsSimuladorHipotecaLogin.length; i++) {
			  if (allowedPathnameUrlsSimuladorHipotecaLogin[i] == document.location.pathname) {
					try { 
						//localStorage.searchQuery = document.location.search;
						if(document.cookie.indexOf('searchQuery=')== -1){
							setWphCookie("searchQuery", document.location.search, 1);
						}
						//console.info("localStorage.searchQuery (SET) ");
					}catch(exception){		          
					  	console.info("setWphCookie searchQuery (ERROR) ");				  
	      			}
			  		break;
			  }
		}
	}
	/** PORTAL HIPOTECA  **/

	/** SIMUALDOR HIPOTECA  **/
	/*var allowedHostnameSimuladorHipotecas = ['simuladorhipotecadev.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipoteca = ['/resultado/'];

	if (allowedHostnameSimuladorHipotecas.indexOf(document.location.hostname) !== -1) {
		
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  	jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
		
	}



	var allowedHostnameSimuladorHipotecas = ['simuladorhipotecauat.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipoteca = ['/resultado/'];

	if (allowedHostnameSimuladorHipotecas.indexOf(document.location.hostname) !== -1) {

		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  	jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');

	}*/

	var allowedHostnameSimuladorHipotecasPro = ['simuladorhipoteca.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipotecaPro = ['/resultado/'];

	if (allowedHostnameSimuladorHipotecasPro.indexOf(document.location.hostname) !== -1) {
		//for (var i=0; i<allowedPathnameUrlsSimuladorHipoteca.length; i++) {
		  //if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  		//console.log(dondeEstamosFormjs);
		  		//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
			if(document.getElementById("wphHipotecaFormjs") == null){
				jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
			}
			//break;
		  //}
		//}
	}

	var allowedHostnameSimuladorHipotecasPro = ['svc.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipotecaPro = ['/simuladorhipoteca/'];

	if (allowedHostnameSimuladorHipotecasPro.indexOf(document.location.hostname) !== -1 /*&& !(document.location.pathname.indexOf('/simuladorhipoteca2/')!==-1)*/) {
		
		var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  	
		if(document.getElementById("wphHipotecaFormjs") == null){
			jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
		}

		if(document.referrer.indexOf('www.evobanco.com')!== -1 && isMobile() == false){
			var cssCustomOnetrust = document.createElement("style");					
			cssCustomOnetrust.innerHTML = "#onetrust-consent-sdk { display:none !important; }";
			document.body.appendChild(cssCustomOnetrust);
		}
	}

	var allowedHostnameSimuladorHipotecasPro = ['svcuat.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipotecaPro = ['/simuladorhipoteca/'];

	if (allowedHostnameSimuladorHipotecasPro.indexOf(document.location.hostname) !== -1 /*&& !(document.location.pathname.indexOf('/simuladorhipoteca2/')!==-1)*/) {
		//for (var i=0; i<allowedPathnameUrlsSimuladorHipoteca.length; i++) {
		  //if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  		//console.log(dondeEstamosFormjs);
		  		//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
			if(document.getElementById("wphHipotecaFormjs") == null){
				jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
			}

			if((document.referrer.indexOf('www.evobanco.com')!== -1 && isMobile() == false)){
				var cssCustomOnetrust = document.createElement("style");					
				cssCustomOnetrust.innerHTML = "#onetrust-consent-sdk { display:none !important; }";
				document.body.appendChild(cssCustomOnetrust);							
			}

			//  [2024-01-03] FBB Test A/B Cookie modal consent mode (ocultamos modal one trust)
			if(getParameterByNameInUrl("test-cookie-modal")!=null){
				var cssCustomOnetrust = document.createElement("style");					
				cssCustomOnetrust.innerHTML = "#onetrust-consent-sdk { display:none !important; }";
				document.body.appendChild(cssCustomOnetrust);							
				setTimeout(function() { 
					openWphICModal("test-cookie-modal");
				}, 3000);
			}
			//break;
		  //}
		//}
	}

	/*var allowedHostnameSimuladorCambiarTlf = ['svcuat.evobanco.com'];
	var allowedPathnameUrlsSimuladorCambiarTlf = ['/cambionumerotelefono/'];

	if (allowedHostnameSimuladorCambiarTlf.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsSimuladorCambiarTlf.length; i++) {
		  if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';

		  		//console.log(dondeEstamosFormjs);
		  		//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
			jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneCambiarTlf.js"></script>');
			break;
		  }
		}
	}*/

	var allowedHostnameSimuladorHipotecasPro = ['llamamegratis.es'];
	
	if (allowedHostnameSimuladorHipotecasPro.indexOf(document.location.hostname) !== -1 /*&& !(document.location.pathname.indexOf('/simuladorhipoteca2/')!==-1)*/) {
		//for (var i=0; i<allowedPathnameUrlsSimuladorHipoteca.length; i++) {
		  //if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  		//console.log(dondeEstamosFormjs);
		  		//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
				//jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphCajerosYoficinasFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphonePedirCitaSalesforce.js"></script>');
			if(document.getElementById("wphHipotecaFormjs") == null){
				jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
			}
			//break;
		  //}
		//}
	}




	/*var allowedHostnameSimuladorHipotecas = ['www.evobanco.com'];
	var allowedPathnameUrlsSimuladorHipoteca = ['/desarrollo/', '/hipoteca/'];

	if (allowedHostnameSimuladorHipotecas.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsSimuladorHipoteca.length; i++) {
		  if (allowedPathnameUrlsSimuladorHipoteca[i] == document.location.pathname) {
		  	var dondeEstamosFormType ='wphCajerosYoficinasFormjs';
		  		jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="wphHipotecaFormjs" data-type="'+dondeEstamosFormType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneHipotecaSalesforce.js"></script>');
			break;
		  }
		}
	}*/



	// Captación Plan Inversion Inteligente - Proyecto Fase 0  /productos-inteligentes/inversion-rentable/plan-inversion-inteligente/contratar/
	var allowedHostnameJsFormWebphoneFondoInversion = ['www.evobanco.com'];  	

  	var allowedPathnameUrlsJsFormWebphoneFondoInversion = [	  	
	  		{'url':'/productos-inteligentes/inversion-rentable/plan-inversion-inteligente/contratar/', 'producto': 'Planes de  Inversion', 'urlType': 'contratar'},
	  		{'url':'/productos-inteligentes/inversion-rentable/plan-inversion-inteligente/contrata/', 'producto': 'Planes de  Inversion', 'urlType': 'contrata'}
  	];

  	if (allowedHostnameJsFormWebphoneFondoInversion.indexOf(document.location.hostname) !== -1) {
	  	for (var i=0; i<allowedPathnameUrlsJsFormWebphoneFondoInversion.length; i++) {
	  	  if (allowedPathnameUrlsJsFormWebphoneFondoInversion[i].url == document.location.pathname) {	  	    	  	   	    
			//jQuery('head').append('<script type="text/javascript" id="newsletterFormsJs" src="//llamamegratis.es/evo/js/webphone.formWebphoneFondoInversion.js"></script>');
			//createJsCustomForm('Planes de  Inversion');	  
			//createJsCustomFormFondosInversion(allowedPathnameUrlsJsFormWebphoneFondoInversion[i].url);
	  	    //evoBancaProductForm =    allowedPathnameUrlsJsFormWebphoneFondoInversion[i].url;
	  	    jQuery('head').append('<script type="text/javascript" id="formWebphoneFondoInversionJs" charset="UTF-8" data-type="'+allowedPathnameUrlsJsFormWebphoneFondoInversion[i].urlType+'" src="//llamamegratis.es/evo/js/webphone.formWebphoneFondoInversion.js"></script>');

	  	    break;
	  	  }
	  	}
	}

	//premios-tus-compras-gratis https://www.evobanco.com/premios-tus-compras-gratis/?token=123456
	var allowedHostnameDondeEstamos = ['www.evobanco.com'];
	var allowedPathnameUrlsDondeEstamos = ['/premios-tus-compras-gratis/'];

	if (allowedHostnameDondeEstamos.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsDondeEstamos.length; i++) {
		  if (allowedPathnameUrlsDondeEstamos[i] == document.location.pathname) {
		  	var formDataType ='compras-gratis';
		  	//console.log(dondeEstamosFormjs);
		  	//jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-wph-betatester.css' type='text/css' rel='stylesheet' media='all'/>");
			jQuery('head').append('<script type="text/javascript" charset="UTF-8" id="compras-gratis" data-type="'+formDataType+'" src="//llamamegratis.es/evo/js/compras-gratis.js"></script>');			
			break;
		  }
		}
	}

	//[FBB 2023-05-22] AUT - C2C para Display (Desktop y mobile)
	var allowedHostnameCuantaIteligente = ['v2.cuentainteligenteuat.evobanco.com'];
	var allowedPathnameUrlsCuantaIteligente = ['/'];

	if (allowedHostnameCuantaIteligente.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsCuantaIteligente.length; i++) {
			if (allowedPathnameUrlsCuantaIteligente[i] == document.location.pathname) {
				var formDataType ='v2-cuentainteligente';
				//[FBB 2023-05-31] Abrimos C2C para todos los orígenes no solo display
				//[FBB 2023-06-02] Abrimos C2C para https://v2.cuentainteligente.evobanco.com/#/bienvenido
				//[FBB 2023-06-15] Excluimos campo/parámetro token
				setTimeout(function() { 
					if(document.location.hash.indexOf("#/bienvenido") !== -1 && document.location.hash.indexOf("#/bienvenido?token") == -1) {
					//if(getParameterByNameInUrl("utm_medium") == 'display'){
						//Append styles to CTAs a C2C Forms
						jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-v2-c2c-styles.css' type='text/css' rel='stylesheet' media='all'/>");					
	  					jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/evo-modal.css' type='text/css' rel='stylesheet' media='all'/>");
	  					//[FBB 2023-06-12] cambios setTimeout
	  					console.log("loading c2c css cuentainteligenteuat");						
	  					if(document.getElementById('header') !=null){	
	  						console.log("loading div c2c cuentainteligenteuat");
							//PURE JS get elements
							//var desktopmodule =  document.getElementById('header');var desktopmodule =  document.getElementsByClassName('desktop')[0];var mobilemodule =  document.getElementsByClassName('mobile')[0];	
							//jQuery version - Desktop & Mobile														
							jQuery('#header').after('<a id="C2C_display" class="btn v2_c2c desktop" href="javascript:void(0)" title="¿TE LLAMAMOS?"><img width="20px" height="20px" src="https://llamamegratis.es/evo/static/img/ic-operadora.svg"> ¿Tienes dudas de la Cuenta Inteligente? Te llamamos</a>');
							jQuery('#header').after('<a id="C2C_display" class="btn v2_c2c mobile" href="javascript:void(0)" title="¿TE LLAMAMOS?"><img width="20px" height="20px" src="https://llamamegratis.es/evo/static/img/ic-operadora.svg"> ¿Tienes dudas de la Cuenta Inteligente? Te llamamos</a>');
						}					
					}
				}, 3000);
				break;
			}
		}
	}

	//[FBB 2024-04-11] FBB - QUITAMOS C2C petición Cliente
	//[FBB 2023-05-25] PRO - C2C para Display (Desktop y mobile)
	/*var allowedHostnameCuantaIteligente = ['v2.cuentainteligente.evobanco.com'];
	var allowedPathnameUrlsCuantaIteligente = ['/'];

	if (allowedHostnameCuantaIteligente.indexOf(document.location.hostname) !== -1) {
		for (var i=0; i<allowedPathnameUrlsCuantaIteligente.length; i++) {
			if (allowedPathnameUrlsCuantaIteligente[i] == document.location.pathname) {
				var formDataType ='v2-cuentainteligente';
				//[FBB 2023-05-31] Abrimos C2C para todos los orígenes no solo display
				//[FBB 2023-06-02] Abrimos C2C para https://v2.cuentainteligente.evobanco.com/#/bienvenido
				//[FBB 2023-06-15] Excluimos campo/parámetro token
				setTimeout(function() { 
					if(document.location.hash.indexOf("#/bienvenido") !== -1 && document.location.hash.indexOf("#/bienvenido?token") == -1) {
				//if(getParameterByNameInUrl("utm_medium") == 'display'){
						//Append styles to CTAs a C2C Forms
						jQuery("head").append("<link id='popup-css' href='//llamamegratis.es/evo/css/form-v2-c2c-styles.css' type='text/css' rel='stylesheet' media='all'/>");					
	  					jQuery("head").append("<link id='popup-css' href='" + currentProtocoloWph + "//llamamegratis.es/evo/css/evo-modal.css' type='text/css' rel='stylesheet' media='all'/>");
	  					//[FBB 2023-06-12] cambios setTimeout
	  					console.log("loading c2c css cuentainteligente");						
	  					if(document.getElementById('header') !=null){	
	  						console.log("loading div c2c cuentainteligente");
							//PURE JS get elements
							//var desktopmodule =  document.getElementById('header');var desktopmodule =  document.getElementsByClassName('desktop')[0];var mobilemodule =  document.getElementsByClassName('mobile')[0];	
							//jQuery version - Desktop & Mobile														
							jQuery('#header').after('<a id="C2C_display" class="btn v2_c2c desktop" href="javascript:void(0)" title="¿TE LLAMAMOS?"><img width="20px" height="20px" src="https://llamamegratis.es/evo/static/img/ic-operadora.svg"> ¿Tienes dudas de la Cuenta Inteligente? Te llamamos</a>');
							jQuery('#header').after('<a id="C2C_display" class="btn v2_c2c mobile" href="javascript:void(0)" title="¿TE LLAMAMOS?"><img width="20px" height="20px" src="https://llamamegratis.es/evo/static/img/ic-operadora.svg"> ¿Tienes dudas de la Cuenta Inteligente? Te llamamos</a>');												
						}							
					}
				}, 3000);
				break;
			}
		}
	}*/



})();



function createCallByPhoneInUrlParam(param){
	if(typeof getParamScript !='undefined'){
		if(typeof getParamScript(param)!='undefined'){
			phone = atob(getParamScript(param));
			callC2CFromEmail(phone);				
		}
		
	}		
}


function callC2CFromEmail(phone) {
    try{ 
      
		loadWphXMLDocCallFromEmail(phone, 'undefined',  '45', new Date().getDate()+"-"+ (new Date().getMonth()+1) +"-"+ new Date().getFullYear(), getCurrentTimeForCallWph(), 'now', 'SIMULADOR HIPOTECA', 'undefined', 'undefined', 'PRÉSTAMOS HIPOTECARIO');
      
    }catch(exception){
      console.log(exception);  
      
    } 
}

function getCurrentTimeForCallWph() {
    var d = new Date();    
    var h = addZeroWph(d.getHours());
    var m = addZeroWph(d.getMinutes());
    var s = addZeroWph(d.getSeconds());
    return h + ":" + m;
}

function addZeroWph(i) {
    if (i < 10) {
        i = "0" + i;
    }
    return i;
}

function loadWphXMLDocCallFromEmail(phone, name,product, fecha, hora, type, origin, documentDNI, email, reasonH2H3) {
 
    var xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function() {
      if (xmlhttp.readyState == XMLHttpRequest.DONE) {   
          // XMLHttpRequest.DONE == 4
         if (xmlhttp.status == 200) {
              response = JSON.parse(xmlhttp.responseText);
              
              if(response.status=='ok'){
                 // XMLHttpRequest.DONE == 4
				console.log(response.status);
				contentAlertC2C = "<br><br><p style='color:#000;'></p>";
				contentAlertC2C +="<p style='color:#000;'><strong>Muchas gracias, en breve nos pondremos en contacto contigo.</strong><br><br>";
				contentAlertC2C +="<p style='color:#000;'></p>";


				createModalForms(contentAlertC2C, "custom"); 
				toggleModal();
              }
         }
         else if (xmlhttp.status == 400) {
                console.log(xmlhttp.status);
         }
         else {
                console.log(xmlhttp.status);
         }
      }else{
        //console.log(xmlhttp);
      }
    };

    xmlhttp.open("GET", "https://webservice.webphone.net/evo/saveCall/"+ phone+"/"+name+"/"+product+"/"+fecha +" " + hora+"/"+type+"/"+origin+"/"+documentDNI+"/"+email+"/"+reasonH2H3, true);
    xmlhttp.send();

}

function createJsCustomFormFondosInversion(product) {
	//Find module with button "LA QUIERO AHORA"
	if(document.getElementsByClassName('m_infobox').length>0){		
		var m_infobox =  document.getElementsByClassName('m_infobox')[0];
		if(m_infobox.getElementsByClassName('m_infobox_content').length>0){
			var m_infobox_content =  document.getElementsByClassName('m_infobox_content')[0];
			if(m_infobox_content.getElementsByClassName('m_infobox_text').length>0){
				var m_infobox_text =  document.getElementsByClassName('m_infobox_text')[0];
				m_infobox_text.setAttribute('id','myWphContentForm');
				
				var template='<div class="form_text_field form_success" id="customWphform">';
				//template+='<p class="wphmsg" id="wphmsg" style="margin-bottom:10px;">D&eacute;janos tu tel&eacute;fono y te llamamos</p>';
				//m_databox_heading
				template+='<p style="margin-bottom:8px;margin-top: 30px;"><strong class="wphmsg" id="wphmsg">D&eacute;janos tu nombre y tel&eacute;fono y te llamamos.</strong></p>';

				//template += isOnSchedulecallcenterFun();

				//template+='<label lang="en" class="form_label visuallyhidden" for="cajaWphPhone">Introduce tu tel&eacute;fono</label>';
				
				//template += isOnSchedulecallcenterFun();

				template+='<input type="text" pattern="\s*" maxlength="35" aria-invalid="false" aria-required="true" placeholder="Tu nombre" class="cajaWphName" name="cajaWphName" id="cajaWphName" required="" value="'+setWphName()+'">';				
				template+='<label id="cajaWphName-error" class="form_error" style="display:none;" for="cajaWphName">Este campo es obligatorio.</label>';
				//template+='<label lang="en" class="form_label visuallyhidden" for="cajaWphPhone">Introduce tu tel&eacute;fono</label>';
				template+='<input style="margin-top:10px;" type="text" pattern="\d*" maxlength="9" aria-invalid="false" aria-required="true" placeholder="Tu tel&eacute;fono" class="cajaWphPhone" name="cajaWphPhone" id="cajaWphPhone" required="" value="'+setWphPhone()+'">';
				template+='<label id="cajaWphPhone-error" class="form_error" style="display:none;" for="cajaWphPhone">Este campo es obligatorio.</label>';
					
				template+='<form class="m_mortgage_type" id="formLegalWph" style="margin-top:5px;"><div class="form_row form_row_auto" >';
				template+='<div class="form_radio"><span class="radio webkit webkit63 not_msie custom-form_hi" id="checklegalWph" onclick="clickOnWphlegal()"><input name="hi" id="hi" value="hi" type="radio" class="radio" checked=""></span>';
				//template+='<label for="hi" class="form_label form_label_inline" style="padding-left: 4px;color:#000; float: right;width:90%;cursor:pointer;"><p id="labelWphLegal"><strong><a href="https://www.evobanco.com/aviso-legal/" title="He le&iacute;do y acepto la pol&iacute;tica de privacidad" target="_blank">He le&iacute;do y acepto la pol&iacute;tica de privacidad</p></label></div>';
				template+='<label for="hi" class="form_label form_label_inline" style="padding-left: 4px;color:#000; float: right;width:90%;cursor:pointer;"><p id="labelWphLegal" onclicK="showLayerLegal(\'block\');"><strong>He le&iacute;do y acepto la pol&iacute;tica de privacidad</strong></p></label></div>';
				template+='</div></form>';

				/*if(!isOnSchedulecallcenter) condicionesHeight='265px';
				else condicionesHeight='225px';*/
				template +='<p><a class="m_btn m_btn_inv  " href="javascript:void(0);saveLead(\'Planes de  Inversion\');"" target="" id="myWphButtontoFormclick" style="display: inline-block;">LO QUIERO</a></p>';

				template+='</div>';
				template+='<div id="condiciones" onclicK="showLayerLegal(\'none\');" style="padding-top:30px;padding-bottom:55px;display: none; position: absolute;z-index: 9999;background:url(https://llamamegratis.es/evo/img/close.gif) #FFF 2px 10px no-repeat;top: 0px;height: 100%;overflow: auto; cursor:pointer;">';
				//template+='<p><em>De conformidad con lo establecido en el Reglamento 679/2016 General de Protecci&oacute;n de Datos y normativa complementaria, desde EVO BANCO S.A.U. (EVO) te informamos que:</em></p><p><em>(i) Los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal www.evobanco.com (en adelante, el "PORTAL"), ser&aacute;n incorporados a los ficheros de titularidad de EVO para que podamos efectuar el tratamiento, automatizado o no, de tales datos, as&iacute; como de los que puedan generarse por causa de la correspondiente relaci&oacute;n que en su caso conciertes con nosotros.</em></p><p><em>Mediante el env&iacute;o de cualquiera de los formularios que figuren en el PORTAL, prestar&aacute;s tu inequ&iacute;voco consentimiento al r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico que se describa en el aviso sobre dicho r&eacute;gimen habilitado en el formulario correspondiente.</em></p><p><em>Asimismo, los datos de car&aacute;cter personal, incluida la direcci&oacute;n de correo electr&oacute;nico, que nos proporciones al rellenar y enviar los formularios que figuran en el presente portal, y s&oacute;lo en aquellos casos donde no sea viable una relaci&oacute;n comercial con nosotros debido a nuestra pol&iacute;tica de admisi&oacute;n y/o riesgos, podr&aacute;n ser cedidos a EVO Finance E.F.C., S.A.U. (EVO Finance, entidad que forma parte del Grupo EVO) para que puedas recibir y acceder a ofertas sobre productos de financiaci&oacute;n similares a los solicitados a nuestra entidad.</em></p><p><em>(ii) Utilizaremos la informaci&oacute;n personal que nos facilites con la finalidad principal de dar acceso o prestar los servicios o productos que comercializamos principalmente sobre los sectores financiero o de seguros, as&iacute; como los siguientes: inmobiliario, ocio, cultura, turismo, viajes, telefon&iacute;a, electr&oacute;nica, seguros, moda o de consumo, entretenimiento, servicios de consultor&iacute;a y asesoramiento.</em></p><p><em>Adem&aacute;s, con el objetivo de hacerte conocedor de esos servicios, EVO puede enviarte, incluso por correo electr&oacute;nico u otro medio de comunicaci&oacute;n electr&oacute;nica equivalente, informaciones publicitarias o promocionales, de car&aacute;cter general o adaptadas a tu perfil comercial, sobre los productos y/o servicios comercializados tanto por EVO como por EVO Finance.</em></p><p><em>En los avisos sobre r&eacute;gimen del tratamiento de los datos de car&aacute;cter personal y de la direcci&oacute;n de correo electr&oacute;nico ser&aacute;s adecuadamente informado respecto del car&aacute;cter obligatorio o facultativo de la respuesta a las cuestiones que te sean planteadas en los formularios respectivos, y de las consecuencias de la negativa a facilitar los datos que te podamos solicitar.</em></p><p><em>(iii) Por otro lado, una vez que seas cliente EVO para utilizar planamente nuestra aplicaci&oacute;n de Banca M&oacute;vil debes conocer que realizamos otros tratamientos, como el uso del micr&oacute;fono, el acceso a tu galer&iacute;a multimedia, los contactos de tu agenda, la geolocalizaci&oacute;n para indicarte tus cajeros m&aacute;s cercanos o el comparador de productos, y te pediremos un consentimiento espec&iacute;fico para ello.</em></p><p><em>(iv) Conservaremos tus datos personales durante el tiempo legalmente establecido en funci&oacute;n de la relaci&oacute;n que conciertes con nosotros. Debes tener en cuenta que los datos que facilites para cursar una solicitud se conservar&aacute;n durante 1 a&ntilde;o, salvo aquellas afectadas por sospechas de fraude, con el fin de poder utilizar dichos datos para la tramitaci&oacute;n de solicitudes y evitar la duplicaci&oacute;n de formalidades.</em></p><p><em>(v) EVO BANCO S.A.U. tratar&aacute; de forma confidencial los datos de car&aacute;cter personal que nos proporciones, ajust&aacute;ndose a lo establecido en el Reglamento 679/2016 de Protecci&oacute;n de Datos y en las normas que lo desarrollen o complementen, y con aplicaci&oacute;n de las medidas de &iacute;ndole t&eacute;cnica y organizativas necesarias que garanticen la seguridad de dichos datos y eviten su alteraci&oacute;n, p&eacute;rdida, tratamiento o acceso no autorizados.</em></p><p><em>Verificar la identidad, verificar la vinculaci&oacute;n entre un cliente y su cuenta bancaria o tarjeta de cr&eacute;dito/d&eacute;bito, proporcionarnos informaci&oacute;n que nos permita tomar decisiones relacionadas con an&aacute;lisis de solvencia de un cliente en materia de prevenci&oacute;n y detecci&oacute;n de delitos, tales como el fraude y/o el blanqueo de capitales, ayudar en la recuperaci&oacute;n de deudas, realizar an&aacute;lisis estad&iacute;sticos, realizar investigaciones y pruebas respecto de la idoneidad de nuevos productos y servicios y control del sistemas.</em></p></div>';				
				template+= configTrafficEvoSiteDefault.defaultlegal;
				template+='</div>';	
				

				 if(document.getElementById("myWphContentForm").querySelectorAll("p").length>0 && 
					typeof document.getElementById("myWphContentForm").querySelectorAll("p")[1]!='undefined'){
					
					myWphContentFormlength = document.getElementById("myWphContentForm").querySelectorAll("p").length;
					
					document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-1].innerHTML = template;
					/*document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-3].style.display = 'none';
					document.getElementById("myWphContentForm").querySelectorAll("p")[myWphContentFormlength-4].style.display = 'none'; */
					document.getElementById("checklegalWph").style.marginTop = '5px';
					document.getElementById("formLegalWph").style.paddingLeft = '0px';
					//Existe botón "LA QUIERO AHORA"						
					
					
				}
								
			}
		}		
	}
}

function appendCssModalC2C(){
	
	var cssId = 'ccsmodal'; 
	if (!document.getElementById(cssId)){
		var head  = document.getElementsByTagName('head')[0];
		var link  = document.createElement('link');
		link.id   = cssId;
		link.rel  = 'stylesheet';
		link.type = 'text/css';
		link.href = '//llamamegratis.es/evo/css/form-wph-modal.css';
		link.media = 'all';
		head.appendChild(link);
	}
}

function isPathUAT(){
    
    try {     
         
      return (document.location.href.indexOf("https://www.evobanco.com/desarrollo/") > -1);

    }catch(exception){ 

        return false;

    }
}


//[FBB 2023-06-12] Comprobamos cambios en hash url para configTrafficEvoSiteDefault.haztecliente.url2
try { 
	window.addEventListener('hashchange',() => {
		try {      
			if (configTrafficEvoSiteDefault.haztecliente.url2.indexOf(document.location.hostname) !== -1) {
				if(document.location.hash.indexOf("#/bienvenido") < 0  && document.querySelectorAll('#C2C_display').length > 0) {
					const c2cV2Box = document.querySelectorAll('#C2C_display');
					c2cV2Box.forEach(box => {
						box.remove();
					});					
				}
			}
		}catch(exception){ 

	       console.log(exception);

	    }
	    //console.log(`The current URL hash is ${location.hash}`);
	});
}catch(exception){ 

   console.log(exception);

}


function removeURLParameter(url, parameter) {
    //prefer to use l.search if you have a location/link object
    var urlparts = url.split('?');   
    if (urlparts.length >= 2) {

        var prefix = encodeURIComponent(parameter) + '=';
        var pars = urlparts[1].split(/[&;]/g);

        //reverse iteration as may be destructive
        for (var i = pars.length; i-- > 0;) {    
            //idiom for string.startsWith
            if (pars[i].lastIndexOf(prefix, 0) !== -1) {  
                pars.splice(i, 1);
            }
        }

        return urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : '');
    }
    return url;
}